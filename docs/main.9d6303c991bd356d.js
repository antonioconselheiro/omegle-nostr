(self.webpackChunkomegle_nostr=self.webpackChunkomegle_nostr||[]).push([[179],{985:(vt,N,ce)=>{"use strict";var de={};function j(e){return"function"==typeof e}function Se(e){const n=e(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}ce.r(de),ce.d(de,{dQ:()=>Yp,ci:()=>ds,bytesToNumberBE:()=>fn,ty:()=>Zp,eV:()=>Go,n$:()=>SC,ql:()=>Nt,hexToBytes:()=>fs,tL:()=>go,S5:()=>DC,FF:()=>Ga});const w=Se(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,o)=>`${o+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function x(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}class H{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const i of n)i.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(j(r))try{r()}catch(i){t=i instanceof w?i.errors:[i]}const{_finalizers:o}=this;if(o){this._finalizers=null;for(const i of o)try{B(i)}catch(s){t=t??[],s instanceof w?t=[...t,...s.errors]:t.push(s)}}if(t)throw new w(t)}}add(t){var n;if(t&&t!==this)if(this.closed)B(t);else{if(t instanceof H){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&x(n,t)}remove(t){const{_finalizers:n}=this;n&&x(n,t),t instanceof H&&t._removeParent(this)}}H.EMPTY=(()=>{const e=new H;return e.closed=!0,e})();const F=H.EMPTY;function G(e){return e instanceof H||e&&"closed"in e&&j(e.remove)&&j(e.add)&&j(e.unsubscribe)}function B(e){j(e)?e():e.unsubscribe()}const X={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},te={setTimeout(e,t,...n){const{delegate:r}=te;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){const{delegate:t}=te;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function V(e){te.setTimeout(()=>{const{onUnhandledError:t}=X;if(!t)throw e;t(e)})}function ue(){}const Y=_e("C",void 0,void 0);function _e(e,t,n){return{kind:e,value:t,error:n}}let qe=null;function Ge(e){if(X.useDeprecatedSynchronousErrorHandling){const t=!qe;if(t&&(qe={errorThrown:!1,error:null}),e(),t){const{errorThrown:n,error:r}=qe;if(qe=null,n)throw r}}else e()}class pe extends H{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,G(t)&&t.add(this)):this.destination=ne}static create(t,n,r){return new Le(t,n,r)}next(t){this.isStopped?A(function wt(e){return _e("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?A(function gt(e){return _e("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?A(Y,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Te=Function.prototype.bind;function Ne(e,t){return Te.call(e,t)}class tt{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){_(r)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){_(r)}else _(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){_(n)}}}class Le extends pe{constructor(t,n,r){let o;if(super(),j(t)||!t)o={next:t??void 0,error:n??void 0,complete:r??void 0};else{let i;this&&X.useDeprecatedNextContext?(i=Object.create(t),i.unsubscribe=()=>this.unsubscribe(),o={next:t.next&&Ne(t.next,i),error:t.error&&Ne(t.error,i),complete:t.complete&&Ne(t.complete,i)}):o=t}this.destination=new tt(o)}}function _(e){X.useDeprecatedSynchronousErrorHandling?function $n(e){X.useDeprecatedSynchronousErrorHandling&&qe&&(qe.errorThrown=!0,qe.error=e)}(e):V(e)}function A(e,t){const{onStoppedNotification:n}=X;n&&te.setTimeout(()=>n(e,t))}const ne={closed:!0,next:ue,error:function S(e){throw e},complete:ue},re="function"==typeof Symbol&&Symbol.observable||"@@observable";function W(e){return e}function St(e){return 0===e.length?W:1===e.length?e[0]:function(n){return e.reduce((r,o)=>o(r),n)}}let Me=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,o){const i=function dt(e){return e&&e instanceof pe||function Oe(e){return e&&j(e.next)&&j(e.error)&&j(e.complete)}(e)&&G(e)}(n)?n:new Le(n,r,o);return Ge(()=>{const{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=rr(r))((o,i)=>{const s=new Le({next:a=>{try{n(a)}catch(c){i(c),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[re](){return this}pipe(...n){return St(n)(this)}toPromise(n){return new(n=rr(n))((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return e.create=t=>new e(t),e})();function rr(e){var t;return null!==(t=e??X.Promise)&&void 0!==t?t:Promise}const rn=Se(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let ot=(()=>{class e extends Me{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new Wr(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new rn}next(n){Ge(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Ge(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ge(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:o,observers:i}=this;return r||o?F:(this.currentObservers=null,i.push(n),new H(()=>{this.currentObservers=null,x(i,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:o,isStopped:i}=this;r?n.error(o):i&&n.complete()}asObservable(){const n=new Me;return n.source=this,n}}return e.create=(t,n)=>new Wr(t,n),e})();class Wr extends ot{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,t)}error(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==r?r:F}}function nt(e){return j(e?.lift)}function We(e){return t=>{if(nt(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function it(e,t,n,r,o){return new iI(e,t,n,r,o)}class iI extends pe{constructor(t,n,r,o,i,s){super(t),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){t.error(c)}}:super._next,this._error=o?function(a){try{o(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function Ye(e,t){return We((n,r)=>{let o=0;n.subscribe(it(r,i=>{r.next(e.call(t,i,o++))}))})}function Zr(e){return this instanceof Zr?(this.v=e,this):new Zr(e)}function im(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function Vl(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=e[i]&&function(s){return new Promise(function(a,c){!function o(i,s,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},s)}(a,c,(s=e[i](s)).done,s.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const sm=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function am(e){return j(e?.then)}function cm(e){return j(e[re])}function um(e){return Symbol.asyncIterator&&j(e?.[Symbol.asyncIterator])}function lm(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const dm=function xI(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function fm(e){return j(e?.[dm])}function hm(e){return function om(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,r=n.apply(e,t||[]),i=[];return o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o;function s(f){r[f]&&(o[f]=function(h){return new Promise(function(p,g){i.push([f,h,p,g])>1||a(f,h)})})}function a(f,h){try{!function c(f){f.value instanceof Zr?Promise.resolve(f.value.v).then(u,l):d(i[0][2],f)}(r[f](h))}catch(p){d(i[0][3],p)}}function u(f){a("next",f)}function l(f){a("throw",f)}function d(f,h){f(h),i.shift(),i.length&&a(i[0][0],i[0][1])}}(this,arguments,function*(){const n=e.getReader();try{for(;;){const{value:r,done:o}=yield Zr(n.read());if(o)return yield Zr(void 0);yield yield Zr(r)}}finally{n.releaseLock()}})}function pm(e){return j(e?.getReader)}function Cn(e){if(e instanceof Me)return e;if(null!=e){if(cm(e))return function TI(e){return new Me(t=>{const n=e[re]();if(j(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(sm(e))return function MI(e){return new Me(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}(e);if(am(e))return function AI(e){return new Me(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,V)})}(e);if(um(e))return gm(e);if(fm(e))return function RI(e){return new Me(t=>{for(const n of e)if(t.next(n),t.closed)return;t.complete()})}(e);if(pm(e))return function kI(e){return gm(hm(e))}(e)}throw lm(e)}function gm(e){return new Me(t=>{(function NI(e,t){var n,r,o,i;return function nm(e,t,n,r){return new(n||(n=Promise))(function(i,s){function a(l){try{u(r.next(l))}catch(d){s(d)}}function c(l){try{u(r.throw(l))}catch(d){s(d)}}function u(l){l.done?i(l.value):function o(i){return i instanceof n?i:new n(function(s){s(i)})}(l.value).then(a,c)}u((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){try{for(n=im(e);!(r=yield n.next()).done;)if(t.next(r.value),t.closed)return}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=n.return)&&(yield i.call(n))}finally{if(o)throw o.error}}t.complete()})})(e,t).catch(n=>t.error(n))})}function Sr(e,t,n,r=0,o=!1){const i=t.schedule(function(){n(),o?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(i),!o)return i}function xt(e,t,n=1/0){return j(t)?xt((r,o)=>Ye((i,s)=>t(r,i,o,s))(Cn(e(r,o))),n):("number"==typeof t&&(n=t),We((r,o)=>function OI(e,t,n,r,o,i,s,a){const c=[];let u=0,l=0,d=!1;const f=()=>{d&&!c.length&&!u&&t.complete()},h=g=>u<r?p(g):c.push(g),p=g=>{i&&t.next(g),u++;let m=!1;Cn(n(g,l++)).subscribe(it(t,v=>{o?.(v),i?h(v):t.next(v)},()=>{m=!0},void 0,()=>{if(m)try{for(u--;c.length&&u<r;){const v=c.shift();s?Sr(t,s,()=>p(v)):p(v)}f()}catch(v){t.error(v)}}))};return e.subscribe(it(t,h,()=>{d=!0,f()})),()=>{a?.()}}(r,o,e,n)))}function Ko(e=1/0){return xt(W,e)}const or=new Me(e=>e.complete());function zl(e){return e[e.length-1]}function vs(e){return function LI(e){return e&&j(e.schedule)}(zl(e))?e.pop():void 0}function mm(e,t=0){return We((n,r)=>{n.subscribe(it(r,o=>Sr(r,e,()=>r.next(o),t),()=>Sr(r,e,()=>r.complete(),t),o=>Sr(r,e,()=>r.error(o),t)))})}function ym(e,t=0){return We((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function vm(e,t){if(!e)throw new Error("Iterable cannot be null");return new Me(n=>{Sr(n,t,()=>{const r=e[Symbol.asyncIterator]();Sr(n,t,()=>{r.next().then(o=>{o.done?n.complete():n.next(o.value)})},0,!0)})})}function Tt(e,t){return t?function zI(e,t){if(null!=e){if(cm(e))return function BI(e,t){return Cn(e).pipe(ym(t),mm(t))}(e,t);if(sm(e))return function $I(e,t){return new Me(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}(e,t);if(am(e))return function jI(e,t){return Cn(e).pipe(ym(t),mm(t))}(e,t);if(um(e))return vm(e,t);if(fm(e))return function HI(e,t){return new Me(n=>{let r;return Sr(n,t,()=>{r=e[dm](),Sr(n,t,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){return void n.error(s)}i?n.complete():n.next(o)},0,!0)}),()=>j(r?.return)&&r.return()})}(e,t);if(pm(e))return function VI(e,t){return vm(hm(e),t)}(e,t)}throw lm(e)}(e,t):Cn(e)}class Sn extends ot{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}function me(...e){return Tt(e,vs(e))}function wm(e={}){const{connector:t=(()=>new ot),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:o=!0}=e;return i=>{let s,a,c,u=0,l=!1,d=!1;const f=()=>{a?.unsubscribe(),a=void 0},h=()=>{f(),s=c=void 0,l=d=!1},p=()=>{const g=s;h(),g?.unsubscribe()};return We((g,m)=>{u++,!d&&!l&&f();const v=c=c??t();m.add(()=>{u--,0===u&&!d&&!l&&(a=ql(p,o))}),v.subscribe(m),!s&&u>0&&(s=new Le({next:y=>v.next(y),error:y=>{d=!0,f(),a=ql(h,n,y),v.error(y)},complete:()=>{l=!0,f(),a=ql(h,r),v.complete()}}),Cn(g).subscribe(s))})(i)}}function ql(e,t,...n){if(!0===t)return void e();if(!1===t)return;const r=new Le({next:()=>{r.unsubscribe(),e()}});return Cn(t(...n)).subscribe(r)}function ir(e,t){return We((n,r)=>{let o=null,i=0,s=!1;const a=()=>s&&!o&&r.complete();n.subscribe(it(r,c=>{o?.unsubscribe();let u=0;const l=i++;Cn(e(c,l)).subscribe(o=it(r,d=>r.next(t?t(c,d,l,u++):d),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function WI(e,t){return e===t}function Ve(e){for(let t in e)if(e[t]===Ve)return t;throw Error("Could not find renamed property on target object.")}function bt(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(bt).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function Gl(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const ZI=Ve({__forward_ref__:Ve});function Wl(e){return e.__forward_ref__=Wl,e.toString=function(){return bt(this())},e}function ge(e){return Zl(e)?e():e}function Zl(e){return"function"==typeof e&&e.hasOwnProperty(ZI)&&e.__forward_ref__===Wl}function Yl(e){return e&&!!e.\u0275providers}class L extends Error{constructor(t,n){super(function rc(e,t){return`NG0${Math.abs(e)}${t?": "+t:""}`}(t,n)),this.code=t}}function ye(e){return"string"==typeof e?e:null==e?"":String(e)}function Ql(e,t){throw new L(-201,!1)}function In(e,t){null==e&&function fe(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}(t,e,null,"!=")}function oe(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function xn(e){return{providers:e.providers||[],imports:e.imports||[]}}function oc(e){return Em(e,sc)||Em(e,_m)}function Em(e,t){return e.hasOwnProperty(t)?e[t]:null}function ic(e){return e&&(e.hasOwnProperty(Jl)||e.hasOwnProperty(nx))?e[Jl]:null}const sc=Ve({\u0275prov:Ve}),Jl=Ve({\u0275inj:Ve}),_m=Ve({ngInjectableDef:Ve}),nx=Ve({ngInjectorDef:Ve});var Ae=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(Ae||{});let Xl;function on(e){const t=Xl;return Xl=e,t}function Cm(e,t,n){const r=oc(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&Ae.Optional?null:void 0!==t?t:void Ql(bt(e))}const Qe=globalThis;class ie{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=oe({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const ws={},rd="__NG_DI_FLAG__",ac="ngTempTokenPath",ix=/\n/gm,Im="__source";let ei;function Yr(e){const t=ei;return ei=e,t}function cx(e,t=Ae.Default){if(void 0===ei)throw new L(-203,!1);return null===ei?Cm(e,void 0,t):ei.get(e,t&Ae.Optional?null:void 0,t)}function ee(e,t=Ae.Default){return(function Dm(){return Xl}()||cx)(ge(e),t)}function Q(e,t=Ae.Default){return ee(e,cc(t))}function cc(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function od(e){const t=[];for(let n=0;n<e.length;n++){const r=ge(e[n]);if(Array.isArray(r)){if(0===r.length)throw new L(900,!1);let o,i=Ae.Default;for(let s=0;s<r.length;s++){const a=r[s],c=ux(a);"number"==typeof c?-1===c?o=a.token:i|=c:o=a}t.push(ee(o,i))}else t.push(ee(r))}return t}function bs(e,t){return e[rd]=t,e.prototype[rd]=t,e}function ux(e){return e[rd]}function Ir(e){return{toString:e}.toString()}var uc=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(uc||{}),Hn=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(Hn||{});const sr={},Be=[],lc=Ve({\u0275cmp:Ve}),id=Ve({\u0275dir:Ve}),sd=Ve({\u0275pipe:Ve}),Tm=Ve({\u0275mod:Ve}),xr=Ve({\u0275fac:Ve}),Es=Ve({__NG_ELEMENT_ID__:Ve}),Mm=Ve({__NG_ENV_ID__:Ve});function Am(e,t,n){let r=e.length;for(;;){const o=e.indexOf(t,n);if(-1===o)return o;if(0===o||e.charCodeAt(o-1)<=32){const i=t.length;if(o+i===r||e.charCodeAt(o+i)<=32)return o}n=o+1}}function ad(e,t,n){let r=0;for(;r<n.length;){const o=n[r];if("number"==typeof o){if(0!==o)break;r++;const i=n[r++],s=n[r++],a=n[r++];e.setAttribute(t,s,a,i)}else{const i=o,s=n[++r];km(i)?e.setProperty(t,i,s):e.setAttribute(t,i,s),r++}}return r}function Rm(e){return 3===e||4===e||6===e}function km(e){return 64===e.charCodeAt(0)}function _s(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const o=t[r];"number"==typeof o?n=o:0===n||Nm(e,n,o,null,-1===n||2===n?t[++r]:null)}}return e}function Nm(e,t,n,r,o){let i=0,s=e.length;if(-1===t)s=-1;else for(;i<e.length;){const a=e[i++];if("number"==typeof a){if(a===t){s=-1;break}if(a>t){s=i-1;break}}}for(;i<e.length;){const a=e[i];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==o&&(e[i+1]=o));if(r===e[i+1])return void(e[i+2]=o)}i++,null!==r&&i++,null!==o&&i++}-1!==s&&(e.splice(s,0,t),i=s+1),e.splice(i++,0,n),null!==r&&e.splice(i++,0,r),null!==o&&e.splice(i++,0,o)}const Om="ng-template";function fx(e,t,n){let r=0,o=!0;for(;r<e.length;){let i=e[r++];if("string"==typeof i&&o){const s=e[r++];if(n&&"class"===i&&-1!==Am(s.toLowerCase(),t,0))return!0}else{if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}"number"==typeof i&&(o=!1)}}return!1}function Pm(e){return 4===e.type&&e.value!==Om}function hx(e,t,n){return t===(4!==e.type||n?e.value:Om)}function px(e,t,n){let r=4;const o=e.attrs||[],i=function yx(e){for(let t=0;t<e.length;t++)if(Rm(e[t]))return t;return e.length}(o);let s=!1;for(let a=0;a<t.length;a++){const c=t[a];if("number"!=typeof c){if(!s)if(4&r){if(r=2|1&r,""!==c&&!hx(e,c,n)||""===c&&1===t.length){if(Vn(r))return!1;s=!0}}else{const u=8&r?c:t[++a];if(8&r&&null!==e.attrs){if(!fx(e.attrs,u,n)){if(Vn(r))return!1;s=!0}continue}const d=gx(8&r?"class":c,o,Pm(e),n);if(-1===d){if(Vn(r))return!1;s=!0;continue}if(""!==u){let f;f=d>i?"":o[d+1].toLowerCase();const h=8&r?f:null;if(h&&-1!==Am(h,u,0)||2&r&&u!==f){if(Vn(r))return!1;s=!0}}}}else{if(!s&&!Vn(r)&&!Vn(c))return!1;if(s&&Vn(c))continue;s=!1,r=c|1&r}}return Vn(r)||s}function Vn(e){return 0==(1&e)}function gx(e,t,n,r){if(null===t)return-1;let o=0;if(r||!n){let i=!1;for(;o<t.length;){const s=t[o];if(s===e)return o;if(3===s||6===s)i=!0;else{if(1===s||2===s){let a=t[++o];for(;"string"==typeof a;)a=t[++o];continue}if(4===s)break;if(0===s){o+=4;continue}}o+=i?1:2}return-1}return function vx(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function Lm(e,t,n=!1){for(let r=0;r<t.length;r++)if(px(e,t[r],n))return!0;return!1}function Fm(e,t){return e?":not("+t.trim()+")":t}function bx(e){let t=e[0],n=1,r=2,o="",i=!1;for(;n<e.length;){let s=e[n];if("string"==typeof s)if(2&r){const a=e[++n];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?o+="."+s:4&r&&(o+=" "+s);else""!==o&&!Vn(s)&&(t+=Fm(i,o),o=""),r=s,i=i||!Vn(r);n++}return""!==o&&(t+=Fm(i,o)),t}function dc(e){return Ir(()=>{const t=Bm(e),n={...t,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===uc.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Hn.Emulated,styles:e.styles||Be,_:null,schemas:e.schemas||null,tView:null,id:""};jm(n);const r=e.dependencies;return n.directiveDefs=fc(r,!1),n.pipeDefs=fc(r,!0),n.id=function Tx(e){let t=0;const n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(const o of n)t=Math.imul(31,t)+o.charCodeAt(0)<<0;return t+=2147483648,"c"+t}(n),n})}function Cx(e){return Fe(e)||Mt(e)}function Sx(e){return null!==e}function zn(e){return Ir(()=>({type:e.type,bootstrap:e.bootstrap||Be,declarations:e.declarations||Be,imports:e.imports||Be,exports:e.exports||Be,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function Um(e,t){if(null==e)return sr;const n={};for(const r in e)if(e.hasOwnProperty(r)){let o=e[r],i=o;Array.isArray(o)&&(i=o[1],o=o[0]),n[o]=r,t&&(t[o]=i)}return n}function $t(e){return Ir(()=>{const t=Bm(e);return jm(t),t})}function Ht(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,standalone:!0===e.standalone,onDestroy:e.type.prototype.ngOnDestroy||null}}function Fe(e){return e[lc]||null}function Mt(e){return e[id]||null}function Vt(e){return e[sd]||null}function gn(e,t){const n=e[Tm]||null;if(!n&&!0===t)throw new Error(`Type ${bt(e)} does not have '\u0275mod' property.`);return n}function Bm(e){const t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||sr,exportAs:e.exportAs||null,standalone:!0===e.standalone,signals:!0===e.signals,selectors:e.selectors||Be,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Um(e.inputs,t),outputs:Um(e.outputs)}}function jm(e){e.features?.forEach(t=>t(e))}function fc(e,t){if(!e)return null;const n=t?Vt:Cx;return()=>("function"==typeof e?e():e).map(r=>n(r)).filter(Sx)}const ct=0,$=1,be=2,st=3,qn=4,Ds=5,Pt=6,ni=7,ft=8,Qr=9,ri=10,ve=11,Cs=12,$m=13,oi=14,ht=15,Ss=16,ii=17,ar=18,Is=19,Hm=20,Jr=21,Tr=22,xs=23,Ts=24,Re=25,cd=1,Vm=2,cr=7,si=9,At=11;function sn(e){return Array.isArray(e)&&"object"==typeof e[cd]}function zt(e){return Array.isArray(e)&&!0===e[cd]}function ud(e){return 0!=(4&e.flags)}function So(e){return e.componentOffset>-1}function pc(e){return 1==(1&e.flags)}function Gn(e){return!!e.template}function ld(e){return 0!=(512&e[be])}function Io(e,t){return e.hasOwnProperty(xr)?e[xr]:null}let Rt=null,gc=!1;function Tn(e){const t=Rt;return Rt=e,t}const Gm={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Zm(e){if(!As(e)||e.dirty){if(!e.producerMustRecompute(e)&&!Jm(e))return void(e.dirty=!1);e.producerRecomputeValue(e),e.dirty=!1}}function Qm(e){e.dirty=!0,function Ym(e){if(void 0===e.liveConsumerNode)return;const t=gc;gc=!0;try{for(const n of e.liveConsumerNode)n.dirty||Qm(n)}finally{gc=t}}(e),e.consumerMarkedDirty?.(e)}function fd(e){return e&&(e.nextProducerIndex=0),Tn(e)}function hd(e,t){if(Tn(t),e&&void 0!==e.producerNode&&void 0!==e.producerIndexOfThis&&void 0!==e.producerLastReadVersion){if(As(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)mc(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function Jm(e){ai(e);for(let t=0;t<e.producerNode.length;t++){const n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(Zm(n),r!==n.version))return!0}return!1}function Xm(e){if(ai(e),As(e))for(let t=0;t<e.producerNode.length;t++)mc(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function mc(e,t){if(function ey(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}(e),ai(e),1===e.liveConsumerNode.length)for(let r=0;r<e.producerNode.length;r++)mc(e.producerNode[r],e.producerIndexOfThis[r]);const n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){const r=e.liveConsumerIndexOfThis[t],o=e.liveConsumerNode[t];ai(o),o.producerIndexOfThis[r]=t}}function As(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function ai(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}let ty=null;const iy=()=>{},$x=(()=>({...Gm,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:e=>{e.schedule(e.ref)},hasRun:!1,cleanupFn:iy}))();class Hx{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function xo(){return sy}function sy(e){return e.type.prototype.ngOnChanges&&(e.setInput=zx),Vx}function Vx(){const e=cy(this),t=e?.current;if(t){const n=e.previous;if(n===sr)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function zx(e,t,n,r){const o=this.declaredInputs[n],i=cy(e)||function qx(e,t){return e[ay]=t}(e,{previous:sr,current:null}),s=i.current||(i.current={}),a=i.previous,c=a[o];s[o]=new Hx(c&&c.currentValue,t,a===sr),e[r]=t}xo.ngInherit=!0;const ay="__ngSimpleChanges__";function cy(e){return e[ay]||null}const ur=function(e,t,n){};function Je(e){for(;Array.isArray(e);)e=e[ct];return e}function yc(e,t){return Je(t[e])}function an(e,t){return Je(t[e.index])}function dy(e,t){return e.data[t]}function ci(e,t){return e[t]}function mn(e,t){const n=t[e];return sn(n)?n:n[ct]}function Kr(e,t){return null==t?null:e[t]}function fy(e){e[ii]=0}function Jx(e){1024&e[be]||(e[be]|=1024,py(e,1))}function hy(e){1024&e[be]&&(e[be]&=-1025,py(e,-1))}function py(e,t){let n=e[st];if(null===n)return;n[Ds]+=t;let r=n;for(n=n[st];null!==n&&(1===t&&1===r[Ds]||-1===t&&0===r[Ds]);)n[Ds]+=t,r=n,n=n[st]}const he={lFrame:Sy(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function yy(){return he.bindingsEnabled}function T(){return he.lFrame.lView}function Ue(){return he.lFrame.tView}function li(e){return he.lFrame.contextLView=e,e[ft]}function di(e){return he.lFrame.contextLView=null,e}function kt(){let e=vy();for(;null!==e&&64===e.type;)e=e.parent;return e}function vy(){return he.lFrame.currentTNode}function lr(e,t){const n=he.lFrame;n.currentTNode=e,n.isParent=t}function vd(){return he.lFrame.isParent}function fi(){return he.lFrame.bindingIndex++}function u1(e,t){const n=he.lFrame;n.bindingIndex=n.bindingRootIndex=e,bd(t)}function bd(e){he.lFrame.currentDirectiveIndex=e}function _d(e){he.lFrame.currentQueryIndex=e}function d1(e){const t=e[$];return 2===t.type?t.declTNode:1===t.type?e[Pt]:null}function Dy(e,t,n){if(n&Ae.SkipSelf){let o=t,i=e;for(;!(o=o.parent,null!==o||n&Ae.Host||(o=d1(i),null===o||(i=i[oi],10&o.type))););if(null===o)return!1;t=o,e=i}const r=he.lFrame=Cy();return r.currentTNode=t,r.lView=e,!0}function Dd(e){const t=Cy(),n=e[$];he.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function Cy(){const e=he.lFrame,t=null===e?null:e.child;return null===t?Sy(e):t}function Sy(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function Iy(){const e=he.lFrame;return he.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const xy=Iy;function Cd(){const e=Iy();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Gt(){return he.lFrame.selectedIndex}function To(e){he.lFrame.selectedIndex=e}function at(){const e=he.lFrame;return dy(e.tView,e.selectedIndex)}let My=!0;function vc(){return My}function eo(e){My=e}function wc(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const i=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=i;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),c&&(e.viewHooks??=[]).push(-n,c),u&&((e.viewHooks??=[]).push(n,u),(e.viewCheckHooks??=[]).push(n,u)),null!=l&&(e.destroyHooks??=[]).push(n,l)}}function bc(e,t,n){Ay(e,t,3,n)}function Ec(e,t,n,r){(3&e[be])===n&&Ay(e,t,n,r)}function Sd(e,t){let n=e[be];(3&n)===t&&(n&=8191,n+=1,e[be]=n)}function Ay(e,t,n,r){const i=r??-1,s=t.length-1;let a=0;for(let c=void 0!==r?65535&e[ii]:0;c<s;c++)if("number"==typeof t[c+1]){if(a=t[c],null!=r&&a>=r)break}else t[c]<0&&(e[ii]+=65536),(a<i||-1==i)&&(w1(e,n,t,c),e[ii]=(4294901760&e[ii])+c+2),c++}function Ry(e,t){ur(4,e,t);const n=Tn(null);try{t.call(e)}finally{Tn(n),ur(5,e,t)}}function w1(e,t,n,r){const o=n[r]<0,i=n[r+1],a=e[o?-n[r]:n[r]];o?e[be]>>13<e[ii]>>16&&(3&e[be])===t&&(e[be]+=8192,Ry(a,i)):Ry(a,i)}const hi=-1;class ks{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function xd(e){return e!==hi}function Ns(e){return 32767&e}function Os(e,t){let n=function D1(e){return e>>16}(e),r=t;for(;n>0;)r=r[oi],n--;return r}let Td=!0;function _c(e){const t=Td;return Td=e,t}const ky=255,Ny=5;let C1=0;const dr={};function Dc(e,t){const n=Oy(e,t);if(-1!==n)return n;const r=t[$];r.firstCreatePass&&(e.injectorIndex=t.length,Md(r.data,e),Md(t,null),Md(r.blueprint,null));const o=Cc(e,t),i=e.injectorIndex;if(xd(o)){const s=Ns(o),a=Os(o,t),c=a[$].data;for(let u=0;u<8;u++)t[i+u]=a[s+u]|c[s+u]}return t[i+8]=o,i}function Md(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Oy(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Cc(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,o=t;for(;null!==o;){if(r=Hy(o),null===r)return hi;if(n++,o=o[oi],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return hi}function Ad(e,t,n){!function S1(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Es)&&(r=n[Es]),null==r&&(r=n[Es]=C1++);const o=r&ky;t.data[e+(o>>Ny)]|=1<<o}(e,t,n)}function Py(e,t,n){if(n&Ae.Optional||void 0!==e)return e;Ql()}function Ly(e,t,n,r){if(n&Ae.Optional&&void 0===r&&(r=null),!(n&(Ae.Self|Ae.Host))){const o=e[Qr],i=on(void 0);try{return o?o.get(t,r,n&Ae.Optional):Cm(t,r,n&Ae.Optional)}finally{on(i)}}return Py(r,0,n)}function Fy(e,t,n,r=Ae.Default,o){if(null!==e){if(2048&t[be]&&!(r&Ae.Self)){const s=function R1(e,t,n,r,o){let i=e,s=t;for(;null!==i&&null!==s&&2048&s[be]&&!(512&s[be]);){const a=Uy(i,s,n,r|Ae.Self,dr);if(a!==dr)return a;let c=i.parent;if(!c){const u=s[Hm];if(u){const l=u.get(n,dr,r);if(l!==dr)return l}c=Hy(s),s=s[oi]}i=c}return o}(e,t,n,r,dr);if(s!==dr)return s}const i=Uy(e,t,n,r,dr);if(i!==dr)return i}return Ly(t,n,r,o)}function Uy(e,t,n,r,o){const i=function T1(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(Es)?e[Es]:void 0;return"number"==typeof t?t>=0?t&ky:A1:t}(n);if("function"==typeof i){if(!Dy(t,e,r))return r&Ae.Host?Py(o,0,r):Ly(t,n,r,o);try{let s;if(s=i(r),null!=s||r&Ae.Optional)return s;Ql()}finally{xy()}}else if("number"==typeof i){let s=null,a=Oy(e,t),c=hi,u=r&Ae.Host?t[ht][Pt]:null;for((-1===a||r&Ae.SkipSelf)&&(c=-1===a?Cc(e,t):t[a+8],c!==hi&&jy(r,!1)?(s=t[$],a=Ns(c),t=Os(c,t)):a=-1);-1!==a;){const l=t[$];if(By(i,a,l.data)){const d=x1(a,t,n,s,r,u);if(d!==dr)return d}c=t[a+8],c!==hi&&jy(r,t[$].data[a+8]===u)&&By(i,a,t)?(s=l,a=Ns(c),t=Os(c,t)):a=-1}}return o}function x1(e,t,n,r,o,i){const s=t[$],a=s.data[e+8],l=function Sc(e,t,n,r,o){const i=e.providerIndexes,s=t.data,a=1048575&i,c=e.directiveStart,l=i>>20,f=o?a+l:e.directiveEnd;for(let h=r?a:a+l;h<f;h++){const p=s[h];if(h<c&&n===p||h>=c&&p.type===n)return h}if(o){const h=s[c];if(h&&Gn(h)&&h.type===n)return c}return null}(a,s,n,null==r?So(a)&&Td:r!=s&&0!=(3&a.type),o&Ae.Host&&i===a);return null!==l?Mo(t,s,l,a):dr}function Mo(e,t,n,r){let o=e[n];const i=t.data;if(function b1(e){return e instanceof ks}(o)){const s=o;s.resolving&&function YI(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new L(-200,`Circular dependency in DI detected for ${e}${n}`)}(function He(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():ye(e)}(i[n]));const a=_c(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?on(s.injectImpl):null;Dy(e,r,Ae.Default);try{o=e[n]=s.factory(void 0,i,e,r),t.firstCreatePass&&n>=r.directiveStart&&function v1(e,t,n){const{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=t.type.prototype;if(r){const s=sy(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}o&&(n.preOrderHooks??=[]).push(0-e,o),i&&((n.preOrderHooks??=[]).push(e,i),(n.preOrderCheckHooks??=[]).push(e,i))}(n,i[n],t)}finally{null!==u&&on(u),_c(a),s.resolving=!1,xy()}}return o}function By(e,t,n){return!!(n[t+(e>>Ny)]&1<<e)}function jy(e,t){return!(e&Ae.Self||e&Ae.Host&&t)}class Wt{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return Fy(this._tNode,this._lView,t,cc(r),n)}}function A1(){return new Wt(kt(),T())}function Rd(e){return Zl(e)?()=>{const t=Rd(ge(e));return t&&t()}:Io(e)}function Hy(e){const t=e[$],n=t.type;return 2===n?t.declTNode:1===n?e[Pt]:null}const gi="__parameters__";function yi(e,t,n){return Ir(()=>{const r=function kd(e){return function(...n){if(e){const r=e(...n);for(const o in r)this[o]=r[o]}}}(t);function o(...i){if(this instanceof o)return r.apply(this,i),this;const s=new o(...i);return a.annotation=s,a;function a(c,u,l){const d=c.hasOwnProperty(gi)?c[gi]:Object.defineProperty(c,gi,{value:[]})[gi];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(s),c}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=e,o.annotationCls=o,o})}function wi(e,t){e.forEach(n=>Array.isArray(n)?wi(n,t):t(n))}function zy(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function xc(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function yn(e,t,n){let r=bi(e,t);return r>=0?e[1|r]=n:(r=~r,function U1(e,t,n,r){let o=e.length;if(o==t)e.push(n,r);else if(1===o)e.push(r,e[0]),e[0]=n;else{for(o--,e.push(e[o-1],e[o]);o>t;)e[o]=e[o-2],o--;e[t]=n,e[t+1]=r}}(e,r,t,n)),r}function Nd(e,t){const n=bi(e,t);if(n>=0)return e[1|n]}function bi(e,t){return function qy(e,t,n){let r=0,o=e.length>>n;for(;o!==r;){const i=r+(o-r>>1),s=e[i<<n];if(t===s)return i<<n;s>t?o=i:r=i+1}return~(o<<n)}(e,t,1)}const Mc=bs(yi("Optional"),8),Ac=bs(yi("SkipSelf"),4);function Pc(e){return 128==(128&e.flags)}var to=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(to||{});const Ud=new Map;let cT=0;const jd="__ngContext__";function Lt(e,t){sn(t)?(e[jd]=t[Is],function lT(e){Ud.set(e[Is],e)}(t)):e[jd]=t}let $d;function Hd(e,t){return $d(e,t)}function js(e){const t=e[st];return zt(t)?t[st]:t}function dv(e){return hv(e[Cs])}function fv(e){return hv(e[qn])}function hv(e){for(;null!==e&&!zt(e);)e=e[qn];return e}function Di(e,t,n,r,o){if(null!=r){let i,s=!1;zt(r)?i=r:sn(r)&&(s=!0,r=r[ct]);const a=Je(r);0===e&&null!==n?null==o?yv(t,n,a):Ao(t,n,a,o||null,!0):1===e&&null!==n?Ao(t,n,a,o||null,!0):2===e?function Hc(e,t,n){const r=jc(e,t);r&&function MT(e,t,n,r){e.removeChild(t,n,r)}(e,r,t,n)}(t,a,s):3===e&&t.destroyNode(a),null!=i&&function kT(e,t,n,r,o){const i=n[cr];i!==Je(n)&&Di(t,e,r,i,o);for(let a=At;a<n.length;a++){const c=n[a];Hs(c[$],c,e,t,r,i)}}(t,e,i,n,o)}}function Uc(e,t,n){return e.createElement(t,n)}function gv(e,t){const n=e[si],r=n.indexOf(t);hy(t),n.splice(r,1)}function Bc(e,t){if(e.length<=At)return;const n=At+t,r=e[n];if(r){const o=r[Ss];null!==o&&o!==e&&gv(o,r),t>0&&(e[n-1][qn]=r[qn]);const i=xc(e,At+t);!function ET(e,t){Hs(e,t,t[ve],2,null,null),t[ct]=null,t[Pt]=null}(r[$],r);const s=i[ar];null!==s&&s.detachView(i[$]),r[st]=null,r[qn]=null,r[be]&=-129}return r}function zd(e,t){if(!(256&t[be])){const n=t[ve];t[xs]&&Xm(t[xs]),t[Ts]&&Xm(t[Ts]),n.destroyNode&&Hs(e,t,n,3,null,null),function CT(e){let t=e[Cs];if(!t)return qd(e[$],e);for(;t;){let n=null;if(sn(t))n=t[Cs];else{const r=t[At];r&&(n=r)}if(!n){for(;t&&!t[qn]&&t!==e;)sn(t)&&qd(t[$],t),t=t[st];null===t&&(t=e),sn(t)&&qd(t[$],t),n=t&&t[qn]}t=n}}(t)}}function qd(e,t){if(!(256&t[be])){t[be]&=-129,t[be]|=256,function TT(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const o=t[n[r]];if(!(o instanceof ks)){const i=n[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){const a=o[i[s]],c=i[s+1];ur(4,a,c);try{c.call(a)}finally{ur(5,a,c)}}else{ur(4,o,i);try{i.call(o)}finally{ur(5,o,i)}}}}}(e,t),function xT(e,t){const n=e.cleanup,r=t[ni];if(null!==n)for(let i=0;i<n.length-1;i+=2)if("string"==typeof n[i]){const s=n[i+3];s>=0?r[s]():r[-s].unsubscribe(),i+=2}else n[i].call(r[n[i+1]]);null!==r&&(t[ni]=null);const o=t[Jr];if(null!==o){t[Jr]=null;for(let i=0;i<o.length;i++)(0,o[i])()}}(e,t),1===t[$].type&&t[ve].destroy();const n=t[Ss];if(null!==n&&zt(t[st])){n!==t[st]&&gv(n,t);const r=t[ar];null!==r&&r.detachView(e)}!function dT(e){Ud.delete(e[Is])}(t)}}function Gd(e,t,n){return function mv(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[ct];{const{componentOffset:o}=r;if(o>-1){const{encapsulation:i}=e.data[r.directiveStart+o];if(i===Hn.None||i===Hn.Emulated)return null}return an(r,n)}}(e,t.parent,n)}function Ao(e,t,n,r,o){e.insertBefore(t,n,r,o)}function yv(e,t,n){e.appendChild(t,n)}function vv(e,t,n,r,o){null!==r?Ao(e,t,n,r,o):yv(e,t,n)}function jc(e,t){return e.parentNode(t)}let Wd,Jd,Ev=function bv(e,t,n){return 40&e.type?an(e,n):null};function $c(e,t,n,r){const o=Gd(e,r,t),i=t[ve],a=function wv(e,t,n){return Ev(e,t,n)}(r.parent||t[Pt],r,t);if(null!=o)if(Array.isArray(n))for(let c=0;c<n.length;c++)vv(i,o,n[c],a,!1);else vv(i,o,n,a,!1);void 0!==Wd&&Wd(i,r,t,n,o)}function $s(e,t){if(null!==t){const n=t.type;if(3&n)return an(t,e);if(4&n)return Zd(-1,e[t.index]);if(8&n){const r=t.child;if(null!==r)return $s(e,r);{const o=e[t.index];return zt(o)?Zd(-1,o):Je(o)}}if(32&n)return Hd(t,e)()||Je(e[t.index]);{const r=Dv(e,t);return null!==r?Array.isArray(r)?r[0]:$s(js(e[ht]),r):$s(e,t.next)}}return null}function Dv(e,t){return null!==t?e[ht][Pt].projection[t.projection]:null}function Zd(e,t){const n=At+e+1;if(n<t.length){const r=t[n],o=r[$].firstChild;if(null!==o)return $s(r,o)}return t[cr]}function Yd(e,t,n,r,o,i,s){for(;null!=n;){const a=r[n.index],c=n.type;if(s&&0===t&&(a&&Lt(Je(a),r),n.flags|=2),32!=(32&n.flags))if(8&c)Yd(e,t,n.child,r,o,i,!1),Di(t,e,o,a,i);else if(32&c){const u=Hd(n,r);let l;for(;l=u();)Di(t,e,o,l,i);Di(t,e,o,a,i)}else 16&c?Sv(e,t,r,n,o,i):Di(t,e,o,a,i);n=s?n.projectionNext:n.next}}function Hs(e,t,n,r,o,i){Yd(n,r,e.firstChild,t,o,i,!1)}function Sv(e,t,n,r,o,i){const s=n[ht],c=s[Pt].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++)Di(t,e,o,c[u],i);else{let u=c;const l=s[st];Pc(r)&&(u.flags|=128),Yd(e,t,u,l,o,i,!0)}}function Iv(e,t,n){""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function xv(e,t,n){const{mergedAttrs:r,classes:o,styles:i}=n;null!==r&&ad(e,t,r),null!==o&&Iv(e,t,o),null!==i&&function OT(e,t,n){e.setAttribute(t,"style",n)}(e,t,i)}class Rv{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const Gs=new ie("ENVIRONMENT_INITIALIZER"),$v=new ie("INJECTOR",-1),Hv=new ie("INJECTOR_DEF_TYPES");class rf{get(t,n=ws){if(n===ws){const r=new Error(`NullInjectorError: No provider for ${bt(t)}!`);throw r.name="NullInjectorError",r}return n}}function aM(...e){return{\u0275providers:zv(0,e),\u0275fromNgModule:!0}}function zv(e,...t){const n=[],r=new Set;let o;const i=s=>{n.push(s)};return wi(t,s=>{const a=s;Gc(a,i,[],r)&&(o||=[],o.push(a))}),void 0!==o&&qv(o,i),n}function qv(e,t){for(let n=0;n<e.length;n++){const{ngModule:r,providers:o}=e[n];sf(o,i=>{t(i,r)})}}function Gc(e,t,n,r){if(!(e=ge(e)))return!1;let o=null,i=ic(e);const s=!i&&Fe(e);if(i||s){if(s&&!s.standalone)return!1;o=e}else{const c=e.ngModule;if(i=ic(c),!i)return!1;o=c}const a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const u of c)Gc(u,t,n,r)}}else{if(!i)return!1;{if(null!=i.imports&&!a){let u;r.add(o);try{wi(i.imports,l=>{Gc(l,t,n,r)&&(u||=[],u.push(l))})}finally{}void 0!==u&&qv(u,t)}if(!a){const u=Io(o)||(()=>new o);t({provide:o,useFactory:u,deps:Be},o),t({provide:Hv,useValue:o,multi:!0},o),t({provide:Gs,useValue:()=>ee(o),multi:!0},o)}const c=i.providers;if(null!=c&&!a){const u=e;sf(c,l=>{t(l,u)})}}}return o!==e&&void 0!==e.providers}function sf(e,t){for(let n of e)Yl(n)&&(n=n.\u0275providers),Array.isArray(n)?sf(n,t):t(n)}const cM=Ve({provide:String,useValue:Ve});function af(e){return null!==e&&"object"==typeof e&&cM in e}function Ro(e){return"function"==typeof e}const cf=new ie("Set Injector scope."),Wc={},lM={};let uf;function Zc(){return void 0===uf&&(uf=new rf),uf}class An{}class xi extends An{get destroyed(){return this._destroyed}constructor(t,n,r,o){super(),this.parent=n,this.source=r,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,df(t,s=>this.processProvider(s)),this.records.set($v,Ti(void 0,this)),o.has("environment")&&this.records.set(An,Ti(void 0,this));const i=this.records.get(cf);null!=i&&"string"==typeof i.value&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(Hv.multi,Be,Ae.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of t)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();const n=Yr(this),r=on(void 0);try{return t()}finally{Yr(n),on(r)}}get(t,n=ws,r=Ae.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(Mm))return t[Mm](this);r=cc(r);const i=Yr(this),s=on(void 0);try{if(!(r&Ae.SkipSelf)){let c=this.records.get(t);if(void 0===c){const u=function gM(e){return"function"==typeof e||"object"==typeof e&&e instanceof ie}(t)&&oc(t);c=u&&this.injectableDefInScope(u)?Ti(lf(t),Wc):null,this.records.set(t,c)}if(null!=c)return this.hydrate(t,c)}return(r&Ae.Self?Zc():this.parent).get(t,n=r&Ae.Optional&&n===ws?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[ac]=a[ac]||[]).unshift(bt(t)),i)throw a;return function lx(e,t,n,r){const o=e[ac];throw t[Im]&&o.unshift(t[Im]),e.message=function dx(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let o=bt(t);if(Array.isArray(t))o=t.map(bt).join(" -> ");else if("object"==typeof t){let i=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];i.push(s+":"+("string"==typeof a?JSON.stringify(a):bt(a)))}o=`{${i.join(", ")}}`}return`${n}${r?"("+r+")":""}[${o}]: ${e.replace(ix,"\n  ")}`}("\n"+e.message,o,n,r),e.ngTokenPath=o,e[ac]=null,e}(a,t,"R3InjectorError",this.source)}throw a}finally{on(s),Yr(i)}}resolveInjectorInitializers(){const t=Yr(this),n=on(void 0);try{const o=this.get(Gs.multi,Be,Ae.Self);for(const i of o)i()}finally{Yr(t),on(n)}}toString(){const t=[],n=this.records;for(const r of n.keys())t.push(bt(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new L(205,!1)}processProvider(t){let n=Ro(t=ge(t))?t:ge(t&&t.provide);const r=function fM(e){return af(e)?Ti(void 0,e.useValue):Ti(function Zv(e,t,n){let r;if(Ro(e)){const o=ge(e);return Io(o)||lf(o)}if(af(e))r=()=>ge(e.useValue);else if(function Wv(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...od(e.deps||[]));else if(function Gv(e){return!(!e||!e.useExisting)}(e))r=()=>ee(ge(e.useExisting));else{const o=ge(e&&(e.useClass||e.provide));if(!function hM(e){return!!e.deps}(e))return Io(o)||lf(o);r=()=>new o(...od(e.deps))}return r}(e),Wc)}(t);if(Ro(t)||!0!==t.multi)this.records.get(n);else{let o=this.records.get(n);o||(o=Ti(void 0,Wc,!0),o.factory=()=>od(o.multi),this.records.set(n,o)),n=t,o.multi.push(t)}this.records.set(n,r)}hydrate(t,n){return n.value===Wc&&(n.value=lM,n.value=n.factory()),"object"==typeof n.value&&n.value&&function pM(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=ge(t.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){const n=this._onDestroyHooks.indexOf(t);-1!==n&&this._onDestroyHooks.splice(n,1)}}function lf(e){const t=oc(e),n=null!==t?t.factory:Io(e);if(null!==n)return n;if(e instanceof ie)throw new L(204,!1);if(e instanceof Function)return function dM(e){const t=e.length;if(t>0)throw function Fs(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}(t,"?"),new L(204,!1);const n=function tx(e){return e&&(e[sc]||e[_m])||null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new L(204,!1)}function Ti(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function df(e,t){for(const n of e)Array.isArray(n)?df(n,t):n&&Yl(n)?df(n.\u0275providers,t):t(n)}const Yc=new ie("AppId",{providedIn:"root",factory:()=>mM}),mM="ng",Yv=new ie("Platform Initializer"),Mi=new ie("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Qv=new ie("CSP nonce",{providedIn:"root",factory:()=>function Si(){if(void 0!==Jd)return Jd;if(typeof document<"u")return document;throw new L(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Jv=(e,t,n)=>null;function wf(e,t,n=!1){return Jv(e,t,n)}class IM{}class ew{}class TM{resolveComponentFactory(t){throw function xM(e){const t=Error(`No component factory found for ${bt(e)}.`);return t.ngComponent=e,t}(t)}}let tu=(()=>{class e{static#e=this.NULL=new TM}return e})();function MM(){return ki(kt(),T())}function ki(e,t){return new ro(an(e,t))}let ro=(()=>{class e{constructor(n){this.nativeElement=n}static#e=this.__NG_ELEMENT_ID__=MM}return e})();class nw{}let kM=(()=>{class e{static#e=this.\u0275prov=oe({token:e,providedIn:"root",factory:()=>null})}return e})();class ru{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const NM=new ru("16.2.12"),_f={};function sw(e,t=null,n=null,r){const o=aw(e,t,n,r);return o.resolveInjectorInitializers(),o}function aw(e,t=null,n=null,r,o=new Set){const i=[n||Be,aM(e)];return r=r||("object"==typeof e?void 0:bt(e)),new xi(i,t||Zc(),r||null,o)}let Rn=(()=>{class e{static#e=this.THROW_IF_NOT_FOUND=ws;static#t=this.NULL=new rf;static create(n,r){if(Array.isArray(n))return sw({name:""},r,n,"");{const o=n.name??"";return sw({name:o},n.parent,n.providers,o)}}static#n=this.\u0275prov=oe({token:e,providedIn:"any",factory:()=>ee($v)});static#r=this.__NG_ELEMENT_ID__=-1}return e})();function Cf(e){return e.ngOriginalError}class kr{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&Cf(t);for(;n&&Cf(n);)n=Cf(n);return n||null}}function If(e){return t=>{setTimeout(e,void 0,t)}}const Zt=class jM extends ot{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){let o=t,i=n||(()=>null),s=r;if(t&&"object"==typeof t){const c=t;o=c.next?.bind(c),i=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(i=If(i),o&&(o=If(o)),s&&(s=If(s)));const a=super.subscribe({next:o,error:i,complete:s});return t instanceof H&&t.add(a),a}};function uw(...e){}class Xe{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Zt(!1),this.onMicrotaskEmpty=new Zt(!1),this.onStable=new Zt(!1),this.onError=new Zt(!1),typeof Zone>"u")throw new L(908,!1);Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&n,o.shouldCoalesceRunChangeDetection=r,o.lastRequestAnimationFrameId=-1,o.nativeRequestAnimationFrame=function $M(){const e="function"==typeof Qe.requestAnimationFrame;let t=Qe[e?"requestAnimationFrame":"setTimeout"],n=Qe[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&n){const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r);const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function zM(e){const t=()=>{!function VM(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Qe,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Tf(e),e.isCheckStableRunning=!0,xf(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Tf(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,o,i,s,a)=>{if(function GM(e){return!(!Array.isArray(e)||1!==e.length)&&!0===e[0].data?.__ignore_ng_zone__}(a))return n.invokeTask(o,i,s,a);try{return lw(e),n.invokeTask(o,i,s,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===i.type||e.shouldCoalesceRunChangeDetection)&&t(),dw(e)}},onInvoke:(n,r,o,i,s,a,c)=>{try{return lw(e),n.invoke(o,i,s,a,c)}finally{e.shouldCoalesceRunChangeDetection&&t(),dw(e)}},onHasTask:(n,r,o,i)=>{n.hasTask(o,i),r===o&&("microTask"==i.change?(e._hasPendingMicrotasks=i.microTask,Tf(e),xf(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:(n,r,o,i)=>(n.handleError(o,i),e.runOutsideAngular(()=>e.onError.emit(i)),!1)})}(o)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Xe.isInAngularZone())throw new L(909,!1)}static assertNotInAngularZone(){if(Xe.isInAngularZone())throw new L(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,o){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,t,HM,uw,uw);try{return i.runTask(s,n,r)}finally{i.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}}const HM={};function xf(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Tf(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function lw(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function dw(e){e._nesting--,xf(e)}class qM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Zt,this.onMicrotaskEmpty=new Zt,this.onStable=new Zt,this.onError=new Zt}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,o){return t.apply(n,r)}}const fw=new ie("",{providedIn:"root",factory:hw});function hw(){const e=Q(Xe);let t=!0;return function qI(...e){const t=vs(e),n=function UI(e,t){return"number"==typeof zl(e)?e.pop():t}(e,1/0),r=e;return r.length?1===r.length?Cn(r[0]):Ko(n)(Tt(r,t)):or}(new Me(o=>{t=e.isStable&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks,e.runOutsideAngular(()=>{o.next(t),o.complete()})}),new Me(o=>{let i;e.runOutsideAngular(()=>{i=e.onStable.subscribe(()=>{Xe.assertNotInAngularZone(),queueMicrotask(()=>{!t&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks&&(t=!0,o.next(!0))})})});const s=e.onUnstable.subscribe(()=>{Xe.assertInAngularZone(),t&&(t=!1,e.runOutsideAngular(()=>{o.next(!1)}))});return()=>{i.unsubscribe(),s.unsubscribe()}}).pipe(wm()))}function Nr(e){return e instanceof Function?e():e}let Mf=(()=>{class e{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=oe({token:e,providedIn:"root",factory:()=>new e})}return e})();function Ys(e){for(;e;){e[be]|=64;const t=js(e);if(ld(e)&&!t)return e;e=t}return null}const vw=new ie("",{providedIn:"root",factory:()=>!1});let iu=null;function _w(e,t){return e[t]??Sw()}function Dw(e,t){const n=Sw();n.producerNode?.length&&(e[t]=iu,n.lView=e,iu=Cw())}const nA={...Gm,consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Ys(e.lView)},lView:null};function Cw(){return Object.create(nA)}function Sw(){return iu??=Cw(),iu}const we={};function Wn(e){Iw(Ue(),T(),Gt()+e,!1)}function Iw(e,t,n,r){if(!r)if(3==(3&t[be])){const i=e.preOrderCheckHooks;null!==i&&bc(t,i,n)}else{const i=e.preOrderHooks;null!==i&&Ec(t,i,0,n)}To(n)}function le(e,t=Ae.Default){const n=T();return null===n?ee(e,t):Fy(kt(),n,ge(e),t)}function su(e,t,n,r,o,i,s,a,c,u,l){const d=t.blueprint.slice();return d[ct]=o,d[be]=140|r,(null!==u||e&&2048&e[be])&&(d[be]|=2048),fy(d),d[st]=d[oi]=e,d[ft]=n,d[ri]=s||e&&e[ri],d[ve]=a||e&&e[ve],d[Qr]=c||e&&e[Qr]||null,d[Pt]=i,d[Is]=function uT(){return cT++}(),d[Tr]=l,d[Hm]=u,d[ht]=2==t.type?e[ht]:d,d}function Pi(e,t,n,r,o){let i=e.data[t];if(null===i)i=function Af(e,t,n,r,o){const i=vy(),s=vd(),c=e.data[t]=function lA(e,t,n,r,o,i){let s=t?t.injectorIndex:-1,a=0;return function ui(){return null!==he.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?i:i&&i.parent,n,t,r,o);return null===e.firstChild&&(e.firstChild=c),null!==i&&(s?null==i.child&&null!==c.parent&&(i.child=c):null===i.next&&(i.next=c,c.prev=i)),c}(e,t,n,r,o),function c1(){return he.lFrame.inI18n}()&&(i.flags|=32);else if(64&i.type){i.type=n,i.value=r,i.attrs=o;const s=function Rs(){const e=he.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();i.injectorIndex=null===s?-1:s.injectorIndex}return lr(i,!0),i}function Qs(e,t,n,r){if(0===n)return-1;const o=t.length;for(let i=0;i<n;i++)t.push(r),e.blueprint.push(r),e.data.push(null);return o}function Tw(e,t,n,r,o){const i=_w(t,xs),s=Gt(),a=2&r;try{To(-1),a&&t.length>Re&&Iw(e,t,Re,!1),ur(a?2:0,o);const u=a?i:null,l=fd(u);try{null!==u&&(u.dirty=!1),n(r,o)}finally{hd(u,l)}}finally{a&&null===t[xs]&&Dw(t,xs),To(s),ur(a?3:1,o)}}function Rf(e,t,n){if(ud(t)){const r=Tn(null);try{const i=t.directiveEnd;for(let s=t.directiveStart;s<i;s++){const a=e.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{Tn(r)}}}function kf(e,t,n){yy()&&(function yA(e,t,n,r){const o=n.directiveStart,i=n.directiveEnd;So(n)&&function CA(e,t,n){const r=an(t,e),o=Mw(n);let s=16;n.signals?s=4096:n.onPush&&(s=64);const a=au(e,su(e,o,null,s,r,t,null,e[ri].rendererFactory.createRenderer(r,n),null,null,null));e[t.index]=a}(t,n,e.data[o+n.componentOffset]),e.firstCreatePass||Dc(n,t),Lt(r,t);const s=n.initialInputs;for(let a=o;a<i;a++){const c=e.data[a],u=Mo(t,e,a,n);Lt(u,t),null!==s&&SA(0,a-o,u,c,0,s),Gn(c)&&(mn(n.index,t)[ft]=Mo(t,e,a,n))}}(e,t,n,an(n,t)),64==(64&n.flags)&&Ow(e,t,n))}function Nf(e,t,n=an){const r=t.localNames;if(null!==r){let o=t.index+1;for(let i=0;i<r.length;i+=2){const s=r[i+1],a=-1===s?n(t,e):e[s];e[o++]=a}}}function Mw(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Of(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function Of(e,t,n,r,o,i,s,a,c,u,l){const d=Re+r,f=d+o,h=function oA(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:we);return n}(d,f),p="function"==typeof u?u():u;return h[$]={type:e,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:t,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:l}}let Aw=e=>null;function Rw(e,t,n,r){for(let o in e)if(e.hasOwnProperty(o)){n=null===n?{}:n;const i=e[o];null===r?kw(n,t,o,i):r.hasOwnProperty(o)&&kw(n,t,r[o],i)}return n}function kw(e,t,n,r){e.hasOwnProperty(n)?e[n].push(t,r):e[n]=[t,r]}function Pf(e,t,n,r){if(yy()){const o=null===r?null:{"":-1},i=function wA(e,t){const n=e.directiveRegistry;let r=null,o=null;if(n)for(let i=0;i<n.length;i++){const s=n[i];if(Lm(t,s.selectors,!1))if(r||(r=[]),Gn(s))if(null!==s.findHostDirectiveDefs){const a=[];o=o||new Map,s.findHostDirectiveDefs(s,a,o),r.unshift(...a,s),Lf(e,t,a.length)}else r.unshift(s),Lf(e,t,0);else o=o||new Map,s.findHostDirectiveDefs?.(s,r,o),r.push(s)}return null===r?null:[r,o]}(e,n);let s,a;null===i?s=a=null:[s,a]=i,null!==s&&Nw(e,t,n,s,o,a),o&&function bA(e,t,n){if(t){const r=e.localNames=[];for(let o=0;o<t.length;o+=2){const i=n[t[o+1]];if(null==i)throw new L(-301,!1);r.push(t[o],i)}}}(n,r,o)}n.mergedAttrs=_s(n.mergedAttrs,n.attrs)}function Nw(e,t,n,r,o,i){for(let u=0;u<r.length;u++)Ad(Dc(n,t),e,r[u].type);!function _A(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}(n,e.data.length,r.length);for(let u=0;u<r.length;u++){const l=r[u];l.providersResolver&&l.providersResolver(l)}let s=!1,a=!1,c=Qs(e,t,r.length,null);for(let u=0;u<r.length;u++){const l=r[u];n.mergedAttrs=_s(n.mergedAttrs,l.hostAttrs),DA(e,n,t,c,l),EA(c,l,o),null!==l.contentQueries&&(n.flags|=4),(null!==l.hostBindings||null!==l.hostAttrs||0!==l.hostVars)&&(n.flags|=64);const d=l.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}!function dA(e,t,n){const o=t.directiveEnd,i=e.data,s=t.attrs,a=[];let c=null,u=null;for(let l=t.directiveStart;l<o;l++){const d=i[l],f=n?n.get(d):null,p=f?f.outputs:null;c=Rw(d.inputs,l,c,f?f.inputs:null),u=Rw(d.outputs,l,u,p);const g=null===c||null===s||Pm(t)?null:IA(c,l,s);a.push(g)}null!==c&&(c.hasOwnProperty("class")&&(t.flags|=8),c.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=c,t.outputs=u}(e,n,i)}function Ow(e,t,n){const r=n.directiveStart,o=n.directiveEnd,i=n.index,s=function l1(){return he.lFrame.currentDirectiveIndex}();try{To(i);for(let a=r;a<o;a++){const c=e.data[a],u=t[a];bd(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&vA(c,u)}}finally{To(-1),bd(s)}}function vA(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Lf(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function EA(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Gn(t)&&(n[""]=e)}}function DA(e,t,n,r,o){e.data[r]=o;const i=o.factory||(o.factory=Io(o.type)),s=new ks(i,Gn(o),le);e.blueprint[r]=s,n[r]=s,function gA(e,t,n,r,o){const i=o.hostBindings;if(i){let s=e.hostBindingOpCodes;null===s&&(s=e.hostBindingOpCodes=[]);const a=~t.index;(function mA(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(s)!=a&&s.push(a),s.push(n,r,i)}}(e,t,r,Qs(e,n,o.hostVars,we),o)}function fr(e,t,n,r,o,i){const s=an(e,t);!function Ff(e,t,n,r,o,i,s){if(null==i)e.removeAttribute(t,o,n);else{const a=null==s?ye(i):s(i,r||"",o);e.setAttribute(t,o,a,n)}}(t[ve],s,i,e.value,n,r,o)}function SA(e,t,n,r,o,i){const s=i[t];if(null!==s)for(let a=0;a<s.length;)Pw(r,n,s[a++],s[a++],s[a++])}function Pw(e,t,n,r,o){const i=Tn(null);try{const s=e.inputTransforms;null!==s&&s.hasOwnProperty(r)&&(o=s[r].call(t,o)),null!==e.setInput?e.setInput(t,o,n,r):t[r]=o}finally{Tn(i)}}function IA(e,t,n){let r=null,o=0;for(;o<n.length;){const i=n[o];if(0!==i)if(5!==i){if("number"==typeof i)break;if(e.hasOwnProperty(i)){null===r&&(r=[]);const s=e[i];for(let a=0;a<s.length;a+=2)if(s[a]===t){r.push(i,s[a+1],n[o+1]);break}}o+=2}else o+=2;else o+=4}return r}function Lw(e,t,n,r){return[e,!0,!1,t,null,0,r,n,null,null,null]}function Fw(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r+1];if(-1!==i){const s=e.data[i];_d(n[r]),s.contentQueries(2,t[i],i)}}}function au(e,t){return e[Cs]?e[$m][qn]=t:e[Cs]=t,e[$m]=t,t}function Uf(e,t,n){_d(0);const r=Tn(null);try{t(e,n)}finally{Tn(r)}}function $w(e,t){const n=e[Qr],r=n?n.get(kr,null):null;r&&r.handleError(t)}function Bf(e,t,n,r,o){for(let i=0;i<n.length;){const s=n[i++],a=n[i++];Pw(e.data[s],t[s],r,a,o)}}function xA(e,t){const n=mn(t,e),r=n[$];!function TA(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n);const o=n[ct];null!==o&&null===n[Tr]&&(n[Tr]=wf(o,n[Qr])),jf(r,n,n[ft])}function jf(e,t,n){Dd(t);try{const r=e.viewQuery;null!==r&&Uf(1,r,n);const o=e.template;null!==o&&Tw(e,t,o,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Fw(e,t),e.staticViewQueries&&Uf(2,e.viewQuery,n);const i=e.components;null!==i&&function MA(e,t){for(let n=0;n<t.length;n++)xA(e,t[n])}(t,i)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[be]&=-5,Cd()}}let Hw=(()=>{class e{constructor(){this.all=new Set,this.queue=new Map}create(n,r,o){const i=typeof Zone>"u"?null:Zone.current,s=function jx(e,t,n){const r=Object.create($x);n&&(r.consumerAllowSignalWrites=!0),r.fn=e,r.schedule=t;const o=s=>{r.cleanupFn=s};return r.ref={notify:()=>Qm(r),run:()=>{if(r.dirty=!1,r.hasRun&&!Jm(r))return;r.hasRun=!0;const s=fd(r);try{r.cleanupFn(),r.cleanupFn=iy,r.fn(o)}finally{hd(r,s)}},cleanup:()=>r.cleanupFn()},r.ref}(n,u=>{this.all.has(u)&&this.queue.set(u,i)},o);let a;this.all.add(s),s.notify();const c=()=>{s.cleanup(),a?.(),this.all.delete(s),this.queue.delete(s)};return a=r?.onDestroy(c),{destroy:c}}flush(){if(0!==this.queue.size)for(const[n,r]of this.queue)this.queue.delete(n),r?r.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=oe({token:e,providedIn:"root",factory:()=>new e})}return e})();function cu(e,t,n){let r=n?e.styles:null,o=n?e.classes:null,i=0;if(null!==t)for(let s=0;s<t.length;s++){const a=t[s];"number"==typeof a?i=a:1==i?o=Gl(o,a):2==i&&(r=Gl(r,a+": "+t[++s]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=o:e.classesWithoutHost=o}function Js(e,t,n,r,o=!1){for(;null!==n;){const i=t[n.index];null!==i&&r.push(Je(i)),zt(i)&&Vw(i,r);const s=n.type;if(8&s)Js(e,t,n.child,r);else if(32&s){const a=Hd(n,t);let c;for(;c=a();)r.push(c)}else if(16&s){const a=Dv(t,n);if(Array.isArray(a))r.push(...a);else{const c=js(t[ht]);Js(c[$],c,a,r,!0)}}n=o?n.projectionNext:n.next}return r}function Vw(e,t){for(let n=At;n<e.length;n++){const r=e[n],o=r[$].firstChild;null!==o&&Js(r[$],r,o,t)}e[cr]!==e[ct]&&t.push(e[cr])}function uu(e,t,n,r=!0){const o=t[ri],i=o.rendererFactory,s=o.afterRenderEventManager;i.begin?.(),s?.begin();try{zw(e,t,e.template,n)}catch(c){throw r&&$w(t,c),c}finally{i.end?.(),o.effectManager?.flush(),s?.end()}}function zw(e,t,n,r){const o=t[be];if(256!=(256&o)){t[ri].effectManager?.flush(),Dd(t);try{fy(t),function by(e){return he.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&Tw(e,t,n,2,r);const s=3==(3&o);if(s){const u=e.preOrderCheckHooks;null!==u&&bc(t,u,null)}else{const u=e.preOrderHooks;null!==u&&Ec(t,u,0,null),Sd(t,0)}if(function kA(e){for(let t=dv(e);null!==t;t=fv(t)){if(!t[Vm])continue;const n=t[si];for(let r=0;r<n.length;r++){Jx(n[r])}}}(t),qw(t,2),null!==e.contentQueries&&Fw(e,t),s){const u=e.contentCheckHooks;null!==u&&bc(t,u)}else{const u=e.contentHooks;null!==u&&Ec(t,u,1),Sd(t,1)}!function rA(e,t){const n=e.hostBindingOpCodes;if(null===n)return;const r=_w(t,Ts);try{for(let o=0;o<n.length;o++){const i=n[o];if(i<0)To(~i);else{const s=i,a=n[++o],c=n[++o];u1(a,s),r.dirty=!1;const u=fd(r);try{c(2,t[s])}finally{hd(r,u)}}}}finally{null===t[Ts]&&Dw(t,Ts),To(-1)}}(e,t);const a=e.components;null!==a&&Ww(t,a,0);const c=e.viewQuery;if(null!==c&&Uf(2,c,r),s){const u=e.viewCheckHooks;null!==u&&bc(t,u)}else{const u=e.viewHooks;null!==u&&Ec(t,u,2),Sd(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[be]&=-73,hy(t)}finally{Cd()}}}function qw(e,t){for(let n=dv(e);null!==n;n=fv(n))for(let r=At;r<n.length;r++)Gw(n[r],t)}function NA(e,t,n){Gw(mn(t,e),n)}function Gw(e,t){if(!function Yx(e){return 128==(128&e[be])}(e))return;const n=e[$],r=e[be];if(80&r&&0===t||1024&r||2===t)zw(n,e,n.template,e[ft]);else if(e[Ds]>0){qw(e,1);const o=n.components;null!==o&&Ww(e,o,1)}}function Ww(e,t,n){for(let r=0;r<t.length;r++)NA(e,t[r],n)}class Xs{get rootNodes(){const t=this._lView,n=t[$];return Js(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ft]}set context(t){this._lView[ft]=t}get destroyed(){return 256==(256&this._lView[be])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[st];if(zt(t)){const n=t[8],r=n?n.indexOf(this):-1;r>-1&&(Bc(t,r),xc(n,r))}this._attachedToViewContainer=!1}zd(this._lView[$],this._lView)}onDestroy(t){!function gy(e,t){if(256==(256&e[be]))throw new L(911,!1);null===e[Jr]&&(e[Jr]=[]),e[Jr].push(t)}(this._lView,t)}markForCheck(){Ys(this._cdRefInjectingView||this._lView)}detach(){this._lView[be]&=-129}reattach(){this._lView[be]|=128}detectChanges(){uu(this._lView[$],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new L(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function DT(e,t){Hs(e,t,t[ve],2,null,null)}(this._lView[$],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new L(902,!1);this._appRef=t}}class OA extends Xs{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;uu(t[$],t,t[ft],!1)}checkNoChanges(){}get context(){return null}}class Zw extends tu{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=Fe(t);return new Ks(n,this.ngModule)}}function Yw(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}class LA{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=cc(r);const o=this.injector.get(t,_f,r);return o!==_f||n===_f?o:this.parentInjector.get(t,n,r)}}class Ks extends ew{get inputs(){const t=this.componentDef,n=t.inputTransforms,r=Yw(t.inputs);if(null!==n)for(const o of r)n.hasOwnProperty(o.propName)&&(o.transform=n[o.propName]);return r}get outputs(){return Yw(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function Ex(e){return e.map(bx).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,o){let i=(o=o||this.ngModule)instanceof An?o:o?.injector;i&&null!==this.componentDef.getStandaloneInjector&&(i=this.componentDef.getStandaloneInjector(i)||i);const s=i?new LA(t,i):t,a=s.get(nw,null);if(null===a)throw new L(407,!1);const d={rendererFactory:a,sanitizer:s.get(kM,null),effectManager:s.get(Hw,null),afterRenderEventManager:s.get(Mf,null)},f=a.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",p=r?function iA(e,t,n,r){const i=r.get(vw,!1)||n===Hn.ShadowDom,s=e.selectRootElement(t,i);return function sA(e){Aw(e)}(s),s}(f,r,this.componentDef.encapsulation,s):Uc(f,h,function PA(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(h)),v=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let y=null;null!==p&&(y=wf(p,s,!0));const b=Of(0,null,null,1,0,null,null,null,null,null,null),E=su(null,b,null,v,null,null,d,f,s,null,y);let D,C;Dd(E);try{const M=this.componentDef;let O,R=null;M.findHostDirectiveDefs?(O=[],R=new Map,M.findHostDirectiveDefs(M,O,R),O.push(M)):O=[M];const q=function UA(e,t){const n=e[$],r=Re;return e[r]=t,Pi(n,r,2,"#host",null)}(E,p),P=function BA(e,t,n,r,o,i,s){const a=o[$];!function jA(e,t,n,r){for(const o of e)t.mergedAttrs=_s(t.mergedAttrs,o.hostAttrs);null!==t.mergedAttrs&&(cu(t,t.mergedAttrs,!0),null!==n&&xv(r,n,t))}(r,e,t,s);let c=null;null!==t&&(c=wf(t,o[Qr]));const u=i.rendererFactory.createRenderer(t,n);let l=16;n.signals?l=4096:n.onPush&&(l=64);const d=su(o,Mw(n),null,l,o[e.index],e,i,u,null,null,c);return a.firstCreatePass&&Lf(a,e,r.length-1),au(o,d),o[e.index]=d}(q,p,M,O,E,d,f);C=dy(b,Re),p&&function HA(e,t,n,r){if(r)ad(e,n,["ng-version",NM.full]);else{const{attrs:o,classes:i}=function _x(e){const t=[],n=[];let r=1,o=2;for(;r<e.length;){let i=e[r];if("string"==typeof i)2===o?""!==i&&t.push(i,e[++r]):8===o&&n.push(i);else{if(!Vn(o))break;o=i}r++}return{attrs:t,classes:n}}(t.selectors[0]);o&&ad(e,n,o),i&&i.length>0&&Iv(e,n,i.join(" "))}}(f,M,p,r),void 0!==n&&function VA(e,t,n){const r=e.projection=[];for(let o=0;o<t.length;o++){const i=n[o];r.push(null!=i?Array.from(i):null)}}(C,this.ngContentSelectors,n),D=function $A(e,t,n,r,o,i){const s=kt(),a=o[$],c=an(s,o);Nw(a,o,s,n,null,r);for(let l=0;l<n.length;l++)Lt(Mo(o,a,s.directiveStart+l,s),o);Ow(a,o,s),c&&Lt(c,o);const u=Mo(o,a,s.directiveStart+s.componentOffset,s);if(e[ft]=o[ft]=u,null!==i)for(const l of i)l(u,t);return Rf(a,s,e),u}(P,M,O,R,E,[zA]),jf(b,E,null)}finally{Cd()}return new FA(this.componentType,D,ki(C,E),E,C)}}class FA extends IM{constructor(t,n,r,o,i){super(),this.location=r,this._rootLView=o,this._tNode=i,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new OA(o),this.componentType=t}setInput(t,n){const r=this._tNode.inputs;let o;if(null!==r&&(o=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;const i=this._rootLView;Bf(i[$],i,o,t,n),this.previousInputValues.set(t,n),Ys(mn(this._tNode.index,i))}}get injector(){return new Wt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function zA(){const e=kt();wc(T()[$],e)}function du(e){return!!function $f(e){return null!==e&&("function"==typeof e||"object"==typeof e)}(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function Ft(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function ta(e,t,n,r){const o=T();return Ft(o,fi(),t)&&(Ue(),fr(at(),o,e,t,n,r)),ta}function ia(e,t,n,r,o,i,s,a){const c=T(),u=Ue(),l=e+Re,d=u.firstCreatePass?function wR(e,t,n,r,o,i,s,a,c){const u=t.consts,l=Pi(t,e,4,s||null,Kr(u,a));Pf(t,n,l,Kr(u,c)),wc(t,l);const d=l.tView=Of(2,l,r,o,i,t.directiveRegistry,t.pipeRegistry,null,t.schemas,u,null);return null!==t.queries&&(t.queries.template(t,l),d.queries=t.queries.embeddedTView(l)),l}(l,u,c,t,n,r,o,i,s):u.data[l];lr(d,!1);const f=g0(u,c,d,e);vc()&&$c(u,c,f,d),Lt(f,c),au(c,c[l]=Lw(f,c,f,d)),pc(d)&&kf(u,c,d),null!=s&&Nf(c,d,a)}let g0=function m0(e,t,n,r){return eo(!0),t[ve].createComment("")};function Wf(e){return ci(function a1(){return he.lFrame.contextLView}(),Re+e)}function qi(e,t,n){const r=T();return Ft(r,fi(),t)&&function vn(e,t,n,r,o,i,s,a){const c=an(t,n);let l,u=t.inputs;!a&&null!=u&&(l=u[r])?(Bf(e,n,l,r,o),So(t)&&function hA(e,t){const n=mn(t,e);16&n[be]||(n[be]|=64)}(n,t.index)):3&t.type&&(r=function fA(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),o=null!=s?s(o,t.value||"",r):o,i.setProperty(c,r,o))}(Ue(),at(),r,e,t,r[ve],n,!1),qi}function Zf(e,t,n,r,o){const s=o?"class":"style";Bf(e,n,t.inputs[s],s,r)}function Yt(e,t,n,r){const o=T(),i=Ue(),s=Re+e,a=o[ve],c=i.firstCreatePass?function DR(e,t,n,r,o,i){const s=t.consts,c=Pi(t,e,2,r,Kr(s,o));return Pf(t,n,c,Kr(s,i)),null!==c.attrs&&cu(c,c.attrs,!1),null!==c.mergedAttrs&&cu(c,c.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,c),c}(s,i,o,t,n,r):i.data[s],u=y0(i,o,c,a,t,e);o[s]=u;const l=pc(c);return lr(c,!0),xv(a,u,c),32!=(32&c.flags)&&vc()&&$c(i,o,u,c),0===function Kx(){return he.lFrame.elementDepthCount}()&&Lt(u,o),function e1(){he.lFrame.elementDepthCount++}(),l&&(kf(i,o,c),Rf(i,c,o)),null!==r&&Nf(o,c),Yt}function wn(){let e=kt();vd()?function wd(){he.lFrame.isParent=!1}():(e=e.parent,lr(e,!1));const t=e;(function n1(e){return he.skipHydrationRootTNode===e})(t)&&function s1(){he.skipHydrationRootTNode=null}(),function t1(){he.lFrame.elementDepthCount--}();const n=Ue();return n.firstCreatePass&&(wc(n,e),ud(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function E1(e){return 0!=(8&e.flags)}(t)&&Zf(n,t,T(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function _1(e){return 0!=(16&e.flags)}(t)&&Zf(n,t,T(),t.stylesWithoutHost,!1),wn}function sa(e,t,n,r){return Yt(e,t,n,r),wn(),sa}let y0=(e,t,n,r,o,i)=>(eo(!0),Uc(r,o,function Ty(){return he.lFrame.currentNamespace}()));function aa(){return T()}function mu(e){return!!e&&"function"==typeof e.then}function b0(e){return!!e&&"function"==typeof e.subscribe}function oo(e,t,n,r){const o=T(),i=Ue(),s=kt();return function _0(e,t,n,r,o,i,s){const a=pc(r),u=e.firstCreatePass&&function Bw(e){return e.cleanup||(e.cleanup=[])}(e),l=t[ft],d=function Uw(e){return e[ni]||(e[ni]=[])}(t);let f=!0;if(3&r.type||s){const g=an(r,t),m=s?s(g):g,v=d.length,y=s?E=>s(Je(E[r.index])):r.index;let b=null;if(!s&&a&&(b=function MR(e,t,n,r){const o=e.cleanup;if(null!=o)for(let i=0;i<o.length-1;i+=2){const s=o[i];if(s===n&&o[i+1]===r){const a=t[ni],c=o[i+2];return a.length>c?a[c]:null}"string"==typeof s&&(i+=2)}return null}(e,t,o,r.index)),null!==b)(b.__ngLastListenerFn__||b).__ngNextListenerFn__=i,b.__ngLastListenerFn__=i,f=!1;else{i=C0(r,t,l,i,!1);const E=n.listen(m,o,i);d.push(i,E),u&&u.push(o,y,v,v+1)}}else i=C0(r,t,l,i,!1);const h=r.outputs;let p;if(f&&null!==h&&(p=h[o])){const g=p.length;if(g)for(let m=0;m<g;m+=2){const D=t[p[m]][p[m+1]].subscribe(i),C=d.length;d.push(i,D),u&&u.push(o,r.index,C,-(C+1))}}}(i,o,o[ve],s,e,t,r),oo}function D0(e,t,n,r){try{return ur(6,t,n),!1!==n(r)}catch(o){return $w(e,o),!1}finally{ur(7,t,n)}}function C0(e,t,n,r,o){return function i(s){if(s===Function)return r;Ys(e.componentOffset>-1?mn(e.index,t):t);let c=D0(t,n,r,s),u=i.__ngNextListenerFn__;for(;u;)c=D0(t,n,u,s)&&c,u=u.__ngNextListenerFn__;return o&&!1===c&&s.preventDefault(),c}}function ca(e=1){return function f1(e){return(he.lFrame.contextLView=function h1(e,t){for(;e>0;)t=t[oi],e--;return t}(e,he.lFrame.contextLView))[ft]}(e)}function yu(e,t){return e<<17|t<<2}function io(e){return e>>17&32767}function Xf(e){return 2|e}function No(e){return(131068&e)>>2}function Kf(e,t){return-131069&e|t<<2}function eh(e){return 1|e}function O0(e,t,n,r,o){const i=e[n+1],s=null===t;let a=r?io(i):No(i),c=!1;for(;0!==a&&(!1===c||s);){const l=e[a+1];UR(e[a],t)&&(c=!0,e[a+1]=r?eh(l):Xf(l)),a=r?io(l):No(l)}c&&(e[n+1]=r?Xf(i):eh(i))}function UR(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&bi(e,t)>=0}function th(e,t){return function Zn(e,t,n,r){const o=T(),i=Ue(),s=function Ar(e){const t=he.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}(2);i.firstUpdatePass&&function V0(e,t,n,r){const o=e.data;if(null===o[n+1]){const i=o[Gt()],s=function H0(e,t){return t>=e.expandoStartIndex}(e,n);(function W0(e,t){return 0!=(e.flags&(t?8:16))})(i,r)&&null===t&&!s&&(t=!1),t=function WR(e,t,n,r){const o=function Ed(e){const t=he.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let i=r?t.residualClasses:t.residualStyles;if(null===o)0===(r?t.classBindings:t.styleBindings)&&(n=ua(n=nh(null,e,t,n,r),t.attrs,r),i=null);else{const s=t.directiveStylingLast;if(-1===s||e[s]!==o)if(n=nh(o,e,t,n,r),null===i){let c=function ZR(e,t,n){const r=n?t.classBindings:t.styleBindings;if(0!==No(r))return e[io(r)]}(e,t,r);void 0!==c&&Array.isArray(c)&&(c=nh(null,e,t,c[1],r),c=ua(c,t.attrs,r),function YR(e,t,n,r){e[io(n?t.classBindings:t.styleBindings)]=r}(e,t,r,c))}else i=function QR(e,t,n){let r;const o=t.directiveEnd;for(let i=1+t.directiveStylingLast;i<o;i++)r=ua(r,e[i].hostAttrs,n);return ua(r,t.attrs,n)}(e,t,r)}return void 0!==i&&(r?t.residualClasses=i:t.residualStyles=i),n}(o,i,t,r),function LR(e,t,n,r,o,i){let s=i?t.classBindings:t.styleBindings,a=io(s),c=No(s);e[r]=n;let l,u=!1;if(Array.isArray(n)?(l=n[1],(null===l||bi(n,l)>0)&&(u=!0)):l=n,o)if(0!==c){const f=io(e[a+1]);e[r+1]=yu(f,a),0!==f&&(e[f+1]=Kf(e[f+1],r)),e[a+1]=function OR(e,t){return 131071&e|t<<17}(e[a+1],r)}else e[r+1]=yu(a,0),0!==a&&(e[a+1]=Kf(e[a+1],r)),a=r;else e[r+1]=yu(c,0),0===a?a=r:e[c+1]=Kf(e[c+1],r),c=r;u&&(e[r+1]=Xf(e[r+1])),O0(e,l,r,!0),O0(e,l,r,!1),function FR(e,t,n,r,o){const i=o?e.residualClasses:e.residualStyles;null!=i&&"string"==typeof t&&bi(i,t)>=0&&(n[r+1]=eh(n[r+1]))}(t,l,e,r,i),s=yu(a,c),i?t.classBindings=s:t.styleBindings=s}(o,i,t,n,s,r)}}(i,e,s,r),t!==we&&Ft(o,s,t)&&function q0(e,t,n,r,o,i,s,a){if(!(3&t.type))return;const c=e.data,u=c[a+1],l=function PR(e){return 1==(1&e)}(u)?G0(c,t,n,o,No(u),s):void 0;vu(l)||(vu(i)||function NR(e){return 2==(2&e)}(u)&&(i=G0(c,null,n,o,a,s)),function NT(e,t,n,r,o){if(t)o?e.addClass(n,r):e.removeClass(n,r);else{let i=-1===r.indexOf("-")?void 0:to.DashCase;null==o?e.removeStyle(n,r,i):("string"==typeof o&&o.endsWith("!important")&&(o=o.slice(0,-10),i|=to.Important),e.setStyle(n,r,o,i))}}(r,s,yc(Gt(),n),o,i))}(i,i.data[Gt()],o,o[ve],e,o[s+1]=function ek(e,t){return null==e||""===e||("string"==typeof t?e+=t:"object"==typeof e&&(e=bt(function no(e){return e instanceof Rv?e.changingThisBreaksApplicationSecurity:e}(e)))),e}(t,n),r,s)}(e,t,null,!0),th}function nh(e,t,n,r,o){let i=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(i=t[a],r=ua(r,i.hostAttrs,o),i!==e);)a++;return null!==e&&(n.directiveStylingLast=a),r}function ua(e,t,n){const r=n?1:2;let o=-1;if(null!==t)for(let i=0;i<t.length;i++){const s=t[i];"number"==typeof s?o=s:o===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),yn(e,s,!!n||t[++i]))}return void 0===e?null:e}function G0(e,t,n,r,o,i){const s=null===t;let a;for(;o>0;){const c=e[o],u=Array.isArray(c),l=u?c[1]:c,d=null===l;let f=n[o+1];f===we&&(f=d?Be:void 0);let h=d?Nd(f,r):l===r?f:void 0;if(u&&!vu(h)&&(h=Nd(c,r)),vu(h)&&(a=h,s))return a;const p=e[o+1];o=s?io(p):No(p)}if(null!==t){let c=i?t.residualClasses:t.residualStyles;null!=c&&(a=Nd(c,r))}return a}function vu(e){return void 0!==e}function Pr(e,t=""){const n=T(),r=Ue(),o=e+Re,i=r.firstCreatePass?Pi(r,o,1,t,null):r.data[o],s=Z0(r,n,i,t,e);n[o]=s,vc()&&$c(r,n,s,i),lr(i,!1)}let Z0=(e,t,n,r,o)=>(eo(!0),function Fc(e,t){return e.createText(t)}(t[ve],r));function wu(e){return bu("",e,""),wu}function bu(e,t,n){const r=T(),o=function Fi(e,t,n,r){return Ft(e,fi(),n)?t+ye(n)+r:we}(r,e,t,n);return o!==we&&function Or(e,t,n){const r=yc(t,e);!function pv(e,t,n){e.setValue(t,n)}(e[ve],r,n)}(r,Gt(),o),bu}const Zi="en-US";let mb=Zi;class Po{}class Hb{}class uh extends Po{constructor(t,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Zw(this);const o=gn(t);this._bootstrapComponents=Nr(o.bootstrap),this._r3Injector=aw(t,n,[{provide:Po,useValue:this},{provide:tu,useValue:this.componentFactoryResolver},...r],bt(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class lh extends Hb{constructor(t){super(),this.moduleType=t}create(t){return new uh(this.moduleType,t,[])}}class Vb extends Po{constructor(t){super(),this.componentFactoryResolver=new Zw(this),this.instance=null;const n=new xi([...t.providers,{provide:Po,useValue:this},{provide:tu,useValue:this.componentFactoryResolver}],t.parent||Zc(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function dh(e,t,n=null){return new Vb({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}let SN=(()=>{class e{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=zv(0,n.type),o=r.length>0?dh([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,o)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=oe({token:e,providedIn:"environment",factory:()=>new e(ee(An))})}return e})();function zb(e){e.getStandaloneInjector=t=>t.get(SN).getOrCreateStandaloneInjector(e)}function Jb(e,t,n,r,o,i){const s=t+n;return Ft(e,s,o)?function hr(e,t,n){return e[t]=n}(e,s+1,i?r.call(i,o):r(o)):function ga(e,t){const n=e[t];return n===we?void 0:n}(e,s+1)}function rE(e,t,n){const r=e+Re,o=T(),i=ci(o,r);return function ma(e,t){return e[$].data[t].pure}(o,r)?Jb(o,function qt(){const e=he.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}(),t,i.transform,n,i):i.transform(n)}function JN(e,t,n,r=!0){const o=t[$];if(function ST(e,t,n,r){const o=At+r,i=n.length;r>0&&(n[o-1][qn]=t),r<i-At?(t[qn]=n[o],zy(n,At+r,t)):(n.push(t),t[qn]=null),t[st]=n;const s=t[Ss];null!==s&&n!==s&&function IT(e,t){const n=e[si];t[ht]!==t[st][st][ht]&&(e[Vm]=!0),null===n?e[si]=[t]:n.push(t)}(s,t);const a=t[ar];null!==a&&a.insertView(e),t[be]|=128}(o,t,e,n),r){const i=Zd(n,e),s=t[ve],a=jc(s,e[cr]);null!==a&&function _T(e,t,n,r,o,i){r[ct]=o,r[Pt]=t,Hs(e,r,n,1,o,i)}(o,e[Pt],s,t,a,i)}}Symbol;let Lr=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=eO}return e})();const XN=Lr,KN=class extends XN{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){const o=function QN(e,t,n,r){const o=t.tView,a=su(e,o,n,4096&e[be]?4096:16,null,t,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[Ss]=e[t.index];const u=e[ar];return null!==u&&(a[ar]=u.createEmbeddedView(o)),jf(o,a,n),a}(this._declarationLView,this._declarationTContainer,t,{injector:n,hydrationInfo:r});return new Xs(o)}};function eO(){return function Su(e,t){return 4&e.type?new KN(t,e,ki(e,t)):null}(kt(),T())}let Qn=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=sO}return e})();function sO(){return function lE(e,t){let n;const r=t[e.index];return zt(r)?n=r:(n=Lw(r,t,null,e),t[e.index]=n,au(t,n)),dE(n,t,e,r),new cE(n,e,t)}(kt(),T())}const aO=Qn,cE=class extends aO{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return ki(this._hostTNode,this._hostLView)}get injector(){return new Wt(this._hostTNode,this._hostLView)}get parentInjector(){const t=Cc(this._hostTNode,this._hostLView);if(xd(t)){const n=Os(t,this._hostLView),r=Ns(t);return new Wt(n[$].data[r+8],n)}return new Wt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=uE(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-At}createEmbeddedView(t,n,r){let o,i;"number"==typeof r?o=r:null!=r&&(o=r.index,i=r.injector);const a=t.createEmbeddedViewImpl(n||{},i,null);return this.insertImpl(a,o,false),a}createComponent(t,n,r,o,i){const s=t&&!function Ls(e){return"function"==typeof e}(t);let a;if(s)a=n;else{const g=n||{};a=g.index,r=g.injector,o=g.projectableNodes,i=g.environmentInjector||g.ngModuleRef}const c=s?t:new Ks(Fe(t)),u=r||this.parentInjector;if(!i&&null==c.ngModule){const m=(s?u:this.parentInjector).get(An,null);m&&(i=m)}Fe(c.componentType??{});const h=c.create(u,o,null,i);return this.insertImpl(h.hostView,a,false),h}insert(t,n){return this.insertImpl(t,n,!1)}insertImpl(t,n,r){const o=t._lView;if(function Qx(e){return zt(e[st])}(o)){const c=this.indexOf(t);if(-1!==c)this.detach(c);else{const u=o[st],l=new cE(u,u[Pt],u[st]);l.detach(l.indexOf(t))}}const s=this._adjustIndex(n),a=this._lContainer;return JN(a,o,s,!r),t.attachToViewContainerRef(),zy(ph(a),s,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=uE(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),r=Bc(this._lContainer,n);r&&(xc(ph(this._lContainer),n),zd(r[$],r))}detach(t){const n=this._adjustIndex(t,-1),r=Bc(this._lContainer,n);return r&&null!=xc(ph(this._lContainer),n)?new Xs(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function uE(e){return e[8]}function ph(e){return e[8]||(e[8]=[])}let dE=function fE(e,t,n,r){if(e[cr])return;let o;o=8&n.type?Je(r):function cO(e,t){const n=e[ve],r=n.createComment(""),o=an(t,e);return Ao(n,jc(n,o),r,function AT(e,t){return e.nextSibling(t)}(n,o),!1),r}(t,n),e[cr]=o};const Sh=new ie("Application Initializer");let Ih=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=Q(Sh,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const o of this.appInits){const i=o();if(mu(i))n.push(i);else if(b0(i)){const s=new Promise((a,c)=>{i.subscribe({complete:a,error:c})});n.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(o=>{this.reject(o)}),0===n.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),FE=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();const Fr=new ie("LocaleId",{providedIn:"root",factory:()=>Q(Fr,Ae.Optional|Ae.SkipSelf)||function BO(){return typeof $localize<"u"&&$localize.locale||Zi}()});let UE=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Sn(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class HO{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}}let BE=(()=>{class e{compileModuleSync(n){return new lh(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),i=Nr(gn(n).declarations).reduce((s,a)=>{const c=Fe(a);return c&&s.push(new Ks(c)),s},[]);return new HO(r,i)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const VE=new ie(""),Mu=new ie("");let Rh,Mh=(()=>{class e{constructor(n,r,o){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Rh||(function l2(e){Rh=e}(o),o.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Xe.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,o){let i=-1;r&&r>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==i),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:i,updateCb:o})}whenStable(n,r,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,o){return[]}static#e=this.\u0275fac=function(r){return new(r||e)(ee(Xe),ee(Ah),ee(Mu))};static#t=this.\u0275prov=oe({token:e,factory:e.\u0275fac})}return e})(),Ah=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return Rh?.findTestabilityInTree(this,n,r)??null}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})(),so=null;const zE=new ie("AllowMultipleToken"),kh=new ie("PlatformDestroyListeners"),Nh=new ie("appBootstrapListener");class GE{constructor(t,n){this.name=t,this.token=n}}function ZE(e,t,n=[]){const r=`Platform: ${t}`,o=new ie(r);return(i=[])=>{let s=Oh();if(!s||s.injector.get(zE,!1)){const a=[...n,...i,{provide:o,useValue:!0}];e?e(a):function h2(e){if(so&&!so.get(zE,!1))throw new L(400,!1);(function qE(){!function Px(e){ty=e}(()=>{throw new L(600,!1)})})(),so=e;const t=e.get(QE);(function WE(e){e.get(Yv,null)?.forEach(n=>n())})(e)}(function YE(e=[],t){return Rn.create({name:t,providers:[{provide:cf,useValue:"platform"},{provide:kh,useValue:new Set([()=>so=null])},...e]})}(a,r))}return function g2(e){const t=Oh();if(!t)throw new L(401,!1);return t}()}}function Oh(){return so?.get(QE)??null}let QE=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const o=function m2(e="zone.js",t){return"noop"===e?new qM:"zone.js"===e?new Xe(t):e}(r?.ngZone,function JE(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return o.run(()=>{const i=function CN(e,t,n){return new uh(e,t,n)}(n.moduleType,this.injector,function n_(e){return[{provide:Xe,useFactory:e},{provide:Gs,multi:!0,useFactory:()=>{const t=Q(v2,{optional:!0});return()=>t.initialize()}},{provide:t_,useFactory:y2},{provide:fw,useFactory:hw}]}(()=>o)),s=i.injector.get(kr,null);return o.runOutsideAngular(()=>{const a=o.onError.subscribe({next:c=>{s.handleError(c)}});i.onDestroy(()=>{Au(this._modules,i),a.unsubscribe()})}),function XE(e,t,n){try{const r=n();return mu(r)?r.catch(o=>{throw t.runOutsideAngular(()=>e.handleError(o)),o}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(s,o,()=>{const a=i.injector.get(Ih);return a.runInitializers(),a.donePromise.then(()=>(function yb(e){In(e,"Expected localeId to be defined"),"string"==typeof e&&(mb=e.toLowerCase().replace(/_/g,"-"))}(i.injector.get(Fr,Zi)||Zi),this._moduleDoBootstrap(i),i))})})}bootstrapModule(n,r=[]){const o=KE({},r);return function d2(e,t,n){const r=new lh(n);return Promise.resolve(r)}(0,0,n).then(i=>this.bootstrapModuleFactory(i,o))}_moduleDoBootstrap(n){const r=n.injector.get(Ji);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(o=>r.bootstrap(o));else{if(!n.instance.ngDoBootstrap)throw new L(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new L(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(kh,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||e)(ee(Rn))};static#t=this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();function KE(e,t){return Array.isArray(t)?t.reduce(KE,e):{...e,...t}}let Ji=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Q(t_),this.zoneIsStable=Q(fw),this.componentTypes=[],this.components=[],this.isStable=Q(UE).hasPendingTasks.pipe(ir(n=>n?me(!1):this.zoneIsStable),function GI(e,t=W){return e=e??WI,We((n,r)=>{let o,i=!0;n.subscribe(it(r,s=>{const a=t(s);(i||!e(o,a))&&(i=!1,o=a,r.next(s))}))})}(),wm()),this._injector=Q(An)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const o=n instanceof ew;if(!this._injector.get(Ih).done)throw!o&&function ti(e){const t=Fe(e)||Mt(e)||Vt(e);return null!==t&&t.standalone}(n),new L(405,!1);let s;s=o?n:this._injector.get(tu).resolveComponentFactory(n),this.componentTypes.push(s.componentType);const a=function f2(e){return e.isBoundToModule}(s)?void 0:this._injector.get(Po),u=s.create(Rn.NULL,[],r||s.selector,a),l=u.location.nativeElement,d=u.injector.get(VE,null);return d?.registerApplication(l),u.onDestroy(()=>{this.detachView(u.hostView),Au(this.components,u),d?.unregisterApplication(l)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new L(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Au(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(Nh,[]);r.push(...this._bootstrapListeners),r.forEach(o=>o(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Au(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new L(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Au(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const t_=new ie("",{providedIn:"root",factory:()=>Q(kr).handleError.bind(void 0)});function y2(){const e=Q(Xe),t=Q(kr);return n=>e.runOutsideAngular(()=>t.handleError(n))}let v2=(()=>{class e{constructor(){this.zone=Q(Xe),this.applicationRef=Q(Ji)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();let Ph=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=b2}return e})();function b2(e){return function E2(e,t,n){if(So(e)&&!n){const r=mn(e.index,t);return new Xs(r,r)}return 47&e.type?new Xs(t[ht],t):null}(kt(),T(),16==(16&e))}class s_{constructor(){}supports(t){return du(t)}create(t){return new x2(t)}}const I2=(e,t)=>t;class x2{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||I2}forEachItem(t){let n;for(n=this._itHead;null!==n;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,o=0,i=null;for(;n||r;){const s=!r||n&&n.currentIndex<c_(r,o,i)?n:r,a=c_(s,o,i),c=s.currentIndex;if(s===r)o--,r=r._nextRemoved;else if(n=n._next,null==s.previousIndex)o++;else{i||(i=[]);const u=a-o,l=c-o;if(u!=l){for(let f=0;f<u;f++){const h=f<i.length?i[f]:i[f]=0,p=h+f;l<=p&&p<u&&(i[f]=h+1)}i[s.previousIndex]=l-u}}a!==c&&t(s,a,c)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)t(n)}diff(t){if(null==t&&(t=[]),!du(t))throw new L(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let o,i,s,n=this._itHead,r=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)i=t[a],s=this._trackByFn(a,i),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,i,s,a)),Object.is(n.item,i)||this._addIdentityChange(n,i)):(n=this._mismatch(n,i,s,a),r=!0),n=n._next}else o=0,function tR(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Symbol.iterator]();let r;for(;!(r=n.next()).done;)t(r.value)}}(t,a=>{s=this._trackByFn(o,a),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,a,s,o)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,s,o),r=!0),n=n._next,o++}),this.length=o;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,o){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,i,o)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(r,o))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,i,o)):t=this._addAfter(new T2(n,r),i,o),t}_verifyReinsertion(t,n,r,o){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==i?t=this._reinsertAfter(i,t._prev,o):t.currentIndex!=o&&(t.currentIndex=o,this._addToMoves(t,o)),t}_truncate(t){for(;null!==t;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const o=t._prevRemoved,i=t._nextRemoved;return null===o?this._removalsHead=i:o._nextRemoved=i,null===i?this._removalsTail=o:i._prevRemoved=o,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){const o=null===n?this._itHead:n._next;return t._next=o,t._prev=n,null===o?this._itTail=t:o._prev=t,null===n?this._itHead=t:n._next=t,null===this._linkedRecords&&(this._linkedRecords=new a_),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const n=t._prev,r=t._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new a_),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class T2{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class M2{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const n=t._prevDup,r=t._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class a_{constructor(){this.map=new Map}put(t){const n=t.trackById;let r=this.map.get(n);r||(r=new M2,this.map.set(n,r)),r.add(t)}get(t,n){const o=this.map.get(t);return o?o.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function c_(e,t,n){const r=e.previousIndex;if(null===r)return r;let o=0;return n&&r<n.length&&(o=n[r]),r+t+o}function l_(){return new Nu([new s_])}let Nu=(()=>{class e{static#e=this.\u0275prov=oe({token:e,providedIn:"root",factory:l_});constructor(n){this.factories=n}static create(n,r){if(null!=r){const o=r.factories.slice();n=n.concat(o)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||l_()),deps:[[e,new Ac,new Mc]]}}find(n){const r=this.factories.find(o=>o.supports(n));if(null!=r)return r;throw new L(901,!1)}}return e})();const O2=ZE(null,"core",[]);let P2=(()=>{class e{constructor(n){}static#e=this.\u0275fac=function(r){return new(r||e)(ee(Ji))};static#t=this.\u0275mod=zn({type:e});static#n=this.\u0275inj=xn({})}return e})(),Hh=null;function Xi(){return Hh}class Y2{}const Nn=new ie("DocumentToken");let Vh=(()=>{class e{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=oe({token:e,factory:function(){return Q(J2)},providedIn:"platform"})}return e})();const Q2=new ie("Location Initialized");let J2=(()=>{class e extends Vh{constructor(){super(),this._doc=Q(Nn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Xi().getBaseHref(this._doc)}onPopState(n){const r=Xi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=Xi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,o){this._history.pushState(n,r,o)}replaceState(n,r,o){this._history.replaceState(n,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=oe({token:e,factory:function(){return new e},providedIn:"platform"})}return e})();function zh(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function b_(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function Ur(e){return e&&"?"!==e[0]?"?"+e:e}let Fo=(()=>{class e{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=oe({token:e,factory:function(){return Q(__)},providedIn:"root"})}return e})();const E_=new ie("appBaseHref");let __=(()=>{class e extends Fo{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Q(Nn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return zh(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+Ur(this._platformLocation.search),o=this._platformLocation.hash;return o&&n?`${r}${o}`:r}pushState(n,r,o,i){const s=this.prepareExternalUrl(o+Ur(i));this._platformLocation.pushState(n,r,s)}replaceState(n,r,o,i){const s=this.prepareExternalUrl(o+Ur(i));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||e)(ee(Vh),ee(E_,8))};static#t=this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),X2=(()=>{class e extends Fo{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=zh(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,o,i){let s=this.prepareExternalUrl(o+Ur(i));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(n,r,s)}replaceState(n,r,o,i){let s=this.prepareExternalUrl(o+Ur(i));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||e)(ee(Vh),ee(E_,8))};static#t=this.\u0275prov=oe({token:e,factory:e.\u0275fac})}return e})(),qh=(()=>{class e{constructor(n){this._subject=new Zt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function tP(e){if(new RegExp("^(https?:)?//").test(e)){const[,n]=e.split(/\/\/[^\/]+/);return n}return e}(b_(D_(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Ur(r))}normalize(n){return e.stripTrailingSlash(function eP(e,t){if(!e||!t.startsWith(e))return t;const n=t.substring(e.length);return""===n||["/",";","?","#"].includes(n[0])?n:t}(this._basePath,D_(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",o=null){this._locationStrategy.pushState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ur(r)),o)}replaceState(n,r="",o=null){this._locationStrategy.replaceState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ur(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(o=>o(n,r))}subscribe(n,r,o){return this._subject.subscribe({next:n,error:r,complete:o})}static#e=this.normalizeQueryParams=Ur;static#t=this.joinWithSlash=zh;static#n=this.stripTrailingSlash=b_;static#r=this.\u0275fac=function(r){return new(r||e)(ee(Fo))};static#o=this.\u0275prov=oe({token:e,factory:function(){return function K2(){return new qh(ee(Fo))}()},providedIn:"root"})}return e})();function D_(e){return e.replace(/\/index.html$/,"")}class HP{constructor(t,n,r,o){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let O_=(()=>{class e{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,o){this._viewContainer=n,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((o,i,s)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new HP(o.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===i?void 0:i);else if(null!==i){const a=r.get(i);r.move(a,s),P_(a,o)}});for(let o=0,i=r.length;o<i;o++){const a=r.get(o).context;a.index=o,a.count=i,a.ngForOf=this._ngForOf}n.forEachIdentityChange(o=>{P_(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||e)(le(Qn),le(Lr),le(Nu))};static#t=this.\u0275dir=$t({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return e})();function P_(e,t){e.context.$implicit=t.item}let L_=(()=>{class e{constructor(n,r){this._viewContainer=n,this._context=new VP,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){F_("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){F_("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||e)(le(Qn),le(Lr))};static#t=this.\u0275dir=$t({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return e})();class VP{constructor(){this.$implicit=null,this.ngIf=null}}function F_(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${bt(t)}'.`)}let _a=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=zn({type:e});static#n=this.\u0275inj=xn({})}return e})();function $_(e){return"server"===e}let yL=(()=>{class e{static#e=this.\u0275prov=oe({token:e,providedIn:"root",factory:()=>new vL(ee(Nn),window)})}return e})();class vL{constructor(t,n){this.document=t,this.window=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const n=function wL(e,t){const n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&"function"==typeof e.body.attachShadow){const r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const i=o.shadowRoot;if(i){const s=i.getElementById(t)||i.querySelector(`[name="${t}"]`);if(s)return s}o=r.nextNode()}}return null}(this.document,t);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(t){this.supportsScrolling()&&(this.window.history.scrollRestoration=t)}scrollToElement(t){const n=t.getBoundingClientRect(),r=n.left+this.window.pageXOffset,o=n.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(r-i[0],o-i[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class VL extends Y2{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class cp extends VL{static makeCurrent(){!function Z2(e){Hh||(Hh=e)}(new cp)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function zL(){return Ca=Ca||document.querySelector("base"),Ca?Ca.getAttribute("href"):null}();return null==n?null:function qL(e){Wu=Wu||document.createElement("a"),Wu.setAttribute("href",e);const t=Wu.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){Ca=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function BP(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const r=n.indexOf("="),[o,i]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(o.trim()===t)return decodeURIComponent(i)}return null}(document.cookie,t)}}let Wu,Ca=null,WL=(()=>{class e{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=oe({token:e,factory:e.\u0275fac})}return e})();const up=new ie("EventManagerPlugins");let G_=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(o=>{o.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,o){return this._findPluginFor(r).addEventListener(n,r,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(i=>i.supports(n)),!r)throw new L(5101,!1);return this._eventNameToPlugin.set(n,r),r}static#e=this.\u0275fac=function(r){return new(r||e)(ee(up),ee(Xe))};static#t=this.\u0275prov=oe({token:e,factory:e.\u0275fac})}return e})();class W_{constructor(t){this._doc=t}}const lp="ng-app-id";let Z_=(()=>{class e{constructor(n,r,o,i={}){this.doc=n,this.appId=r,this.nonce=o,this.platformId=i,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=$_(i),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(o=>o.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${lp}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(o=>{null!=o.textContent&&r.set(o.textContent,o)}),r}return null}changeUsageCount(n,r){const o=this.styleRef;if(o.has(n)){const i=o.get(n);return i.usage+=r,i.usage}return o.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const o=this.styleNodesInDOM,i=o?.get(r);if(i?.parentNode===n)return o.delete(r),i.removeAttribute(lp),i;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(lp,this.appId),s}}addStyleToHost(n,r){const o=this.getStyleElement(n,r);n.appendChild(o);const i=this.styleRef,s=i.get(r)?.elements;s?s.push(o):i.set(r,{elements:[o],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||e)(ee(Nn),ee(Yc),ee(Qv,8),ee(Mi))};static#t=this.\u0275prov=oe({token:e,factory:e.\u0275fac})}return e})();const dp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},fp=/%COMP%/g,JL=new ie("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Q_(e,t){return t.map(n=>n.replace(fp,e))}let J_=(()=>{class e{constructor(n,r,o,i,s,a,c,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=i,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=$_(a),this.defaultRenderer=new hp(n,s,c,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Hn.ShadowDom&&(r={...r,encapsulation:Hn.Emulated});const o=this.getOrCreateRenderer(n,r);return o instanceof K_?o.applyToHost(n):o instanceof pp&&o.applyStyles(),o}getOrCreateRenderer(n,r){const o=this.rendererByCompId;let i=o.get(r.id);if(!i){const s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,l=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case Hn.Emulated:i=new K_(c,u,r,this.appId,l,s,a,d);break;case Hn.ShadowDom:return new tF(c,u,n,r,s,a,this.nonce,d);default:i=new pp(c,u,r,l,s,a,d)}o.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||e)(ee(G_),ee(Z_),ee(Yc),ee(JL),ee(Nn),ee(Mi),ee(Xe),ee(Qv))};static#t=this.\u0275prov=oe({token:e,factory:e.\u0275fac})}return e})();class hp{constructor(t,n,r,o){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=o,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(dp[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(X_(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(X_(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r="string"==typeof t?this.doc.querySelector(t):t;if(!r)throw new L(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,o){if(o){n=o+":"+n;const i=dp[o];i?t.setAttributeNS(i,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){const o=dp[r];o?t.removeAttributeNS(o,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,o){o&(to.DashCase|to.Important)?t.style.setProperty(n,r,o&to.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&to.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t[n]=r}setValue(t,n){t.nodeValue=n}listen(t,n,r){if("string"==typeof t&&!(t=Xi().getGlobalEventTarget(this.doc,t)))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if("__ngUnwrap__"===n)return t;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))&&n.preventDefault()}}}function X_(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class tF extends hp{constructor(t,n,r,o,i,s,a,c){super(t,i,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Q_(o.id,o.styles);for(const l of u){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class pp extends hp{constructor(t,n,r,o,i,s,a,c){super(t,i,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=o,this.styles=c?Q_(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class K_ extends pp{constructor(t,n,r,o,i,s,a,c){const u=o+"-"+r.id;super(t,n,r,i,s,a,c,u),this.contentAttr=function XL(e){return"_ngcontent-%COMP%".replace(fp,e)}(u),this.hostAttr=function KL(e){return"_nghost-%COMP%".replace(fp,e)}(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){const r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}}let nF=(()=>{class e extends W_{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,o){return n.addEventListener(r,o,!1),()=>this.removeEventListener(n,r,o)}removeEventListener(n,r,o){return n.removeEventListener(r,o)}static#e=this.\u0275fac=function(r){return new(r||e)(ee(Nn))};static#t=this.\u0275prov=oe({token:e,factory:e.\u0275fac})}return e})();const eD=["alt","control","meta","shift"],rF={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},oF={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let iF=(()=>{class e extends W_{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,r,o){const i=e.parseEventName(r),s=e.eventCallback(i.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Xi().onAndCancel(n,i.domEventName,s))}static parseEventName(n){const r=n.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const i=e._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),eD.forEach(u=>{const l=r.indexOf(u);l>-1&&(r.splice(l,1),s+=u+".")}),s+=i,0!=r.length||0===i.length)return null;const c={};return c.domEventName=o,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let o=rF[n.key]||n.key,i="";return r.indexOf("code.")>-1&&(o=n.code,i="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),eD.forEach(s=>{s!==o&&(0,oF[s])(n)&&(i+=s+".")}),i+=o,i===r)}static eventCallback(n,r,o){return i=>{e.matchEventFullKeyCode(i,n)&&o.runGuarded(()=>r(i))}}static _normalizeKey(n){return"esc"===n?"escape":n}static#e=this.\u0275fac=function(r){return new(r||e)(ee(Nn))};static#t=this.\u0275prov=oe({token:e,factory:e.\u0275fac})}return e})();const nD=[{provide:Mi,useValue:"browser"},{provide:Yv,useValue:function sF(){cp.makeCurrent()},multi:!0},{provide:Nn,useFactory:function cF(){return function UT(e){Jd=e}(document),document},deps:[]}],uF=ZE(O2,"browser",nD),lF=new ie(""),rD=[{provide:Mu,useClass:class GL{addToWindow(t){Qe.getAngularTestability=(r,o=!0)=>{const i=t.findTestabilityInTree(r,o);if(null==i)throw new L(5103,!1);return i},Qe.getAllAngularTestabilities=()=>t.getAllTestabilities(),Qe.getAllAngularRootElements=()=>t.getAllRootElements(),Qe.frameworkStabilizers||(Qe.frameworkStabilizers=[]),Qe.frameworkStabilizers.push(r=>{const o=Qe.getAllAngularTestabilities();let i=o.length,s=!1;const a=function(c){s=s||c,i--,0==i&&r(s)};o.forEach(c=>{c.whenStable(a)})})}findTestabilityInTree(t,n,r){return null==n?null:t.getTestability(n)??(r?Xi().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},deps:[]},{provide:VE,useClass:Mh,deps:[Xe,Ah,Mu]},{provide:Mh,useClass:Mh,deps:[Xe,Ah,Mu]}],oD=[{provide:cf,useValue:"root"},{provide:kr,useFactory:function aF(){return new kr},deps:[]},{provide:up,useClass:nF,multi:!0,deps:[Nn,Xe,Mi]},{provide:up,useClass:iF,multi:!0,deps:[Nn]},J_,Z_,G_,{provide:nw,useExisting:J_},{provide:class bL{},useClass:WL,deps:[]},[]];let dF=(()=>{class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:Yc,useValue:n.appId}]}}static#e=this.\u0275fac=function(r){return new(r||e)(ee(lF,12))};static#t=this.\u0275mod=zn({type:e});static#n=this.\u0275inj=xn({providers:[...oD,...rD],imports:[_a,P2]})}return e})(),iD=(()=>{class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static#e=this.\u0275fac=function(r){return new(r||e)(ee(Nn))};static#t=this.\u0275prov=oe({token:e,factory:function(r){let o=null;return o=r?new r:function hF(){return new iD(ee(Nn))}(),o},providedIn:"root"})}return e})();typeof window<"u"&&window;const{isArray:wF}=Array,{getPrototypeOf:bF,prototype:EF,keys:_F}=Object;const{isArray:SF}=Array;function mp(...e){const t=vs(e),n=function FI(e){return j(zl(e))?e.pop():void 0}(e),{args:r,keys:o}=function DF(e){if(1===e.length){const t=e[0];if(wF(t))return{args:t,keys:null};if(function CF(e){return e&&"object"==typeof e&&bF(e)===EF}(t)){const n=_F(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}(e);if(0===r.length)return Tt([],t);const i=new Me(function MF(e,t,n=W){return r=>{uD(t,()=>{const{length:o}=e,i=new Array(o);let s=o,a=o;for(let c=0;c<o;c++)uD(t,()=>{const u=Tt(e[c],t);let l=!1;u.subscribe(it(r,d=>{i[c]=d,l||(l=!0,a--),a||r.next(n(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,t,o?s=>function TF(e,t){return e.reduce((n,r,o)=>(n[r]=t[o],n),{})}(o,s):W));return n?i.pipe(function xF(e){return Ye(t=>function IF(e,t){return SF(t)?e(...t):e(t)}(e,t))}(n)):i}function uD(e,t,n){e?Sr(n,e,t):t()}const Sa=Se(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function yp(...e){return function AF(){return Ko(1)}()(Tt(e,vs(e)))}function lD(e){return new Me(t=>{Cn(e()).subscribe(t)})}function Ia(e,t){const n=j(e)?e:()=>e,r=o=>o.error(n());return new Me(t?o=>t.schedule(r,0,o):r)}function vp(){return We((e,t)=>{let n=null;e._refCount++;const r=it(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(n=null);const o=e._connection,i=n;n=null,o&&(!i||o===i)&&o.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}class dD extends Me{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,nt(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new H;const n=this.getSubject();t.add(this.source.subscribe(it(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=H.EMPTY)}return t}refCount(){return vp()(this)}}function es(e){return e<=0?()=>or:We((t,n)=>{let r=0;t.subscribe(it(n,o=>{++r<=e&&(n.next(o),e<=r&&n.complete())}))})}function co(e,t){return We((n,r)=>{let o=0;n.subscribe(it(r,i=>e.call(t,i,o++)&&r.next(i)))})}function Zu(e){return We((t,n)=>{let r=!1;t.subscribe(it(n,o=>{r=!0,n.next(o)},()=>{r||n.next(e),n.complete()}))})}function fD(e=kF){return We((t,n)=>{let r=!1;t.subscribe(it(n,o=>{r=!0,n.next(o)},()=>r?n.complete():n.error(e())))})}function kF(){return new Sa}function Uo(e,t){const n=arguments.length>=2;return r=>r.pipe(e?co((o,i)=>e(o,i,r)):W,es(1),n?Zu(t):fD(()=>new Sa))}function xa(e,t){return j(t)?xt(e,t,1):xt(e,1)}function Ut(e,t,n){const r=j(e)||t||n?{next:e,error:t,complete:n}:e;return r?We((o,i)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;o.subscribe(it(i,c=>{var u;null===(u=r.next)||void 0===u||u.call(r,c),i.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),i.complete()},c=>{var u;a=!1,null===(u=r.error)||void 0===u||u.call(r,c),i.error(c)},()=>{var c,u;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(u=r.finalize)||void 0===u||u.call(r)}))}):W}function Bo(e){return We((t,n)=>{let i,r=null,o=!1;r=t.subscribe(it(n,void 0,void 0,s=>{i=Cn(e(s,Bo(e)(t))),r?(r.unsubscribe(),r=null,i.subscribe(n)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(n))})}function wp(e){return e<=0?()=>or:We((t,n)=>{let r=[];t.subscribe(it(n,o=>{r.push(o),e<r.length&&r.shift()},()=>{for(const o of r)n.next(o);n.complete()},void 0,()=>{r=null}))})}function bp(e){return We((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function hD(e){return We((t,n)=>{Cn(e).subscribe(it(n,()=>n.complete(),ue)),!n.closed&&t.subscribe(n)})}const Ee="primary",Ta=Symbol("RouteTitle");class FF{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function ts(e){return new FF(e)}function UF(e,t,n){const r=n.path.split("/");if(r.length>e.length||"full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const o={};for(let i=0;i<r.length;i++){const s=r[i],a=e[i];if(s.startsWith(":"))o[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,r.length),posParams:o}}function mr(e,t){const n=e?Object.keys(e):void 0,r=t?Object.keys(t):void 0;if(!n||!r||n.length!=r.length)return!1;let o;for(let i=0;i<n.length;i++)if(o=n[i],!pD(e[o],t[o]))return!1;return!0}function pD(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),r=[...t].sort();return n.every((o,i)=>r[i]===o)}return e===t}function gD(e){return e.length>0?e[e.length-1]:null}function uo(e){return function vF(e){return!!e&&(e instanceof Me||j(e.lift)&&j(e.subscribe))}(e)?e:mu(e)?Tt(Promise.resolve(e)):me(e)}const jF={exact:function vD(e,t,n){if(!jo(e.segments,t.segments)||!Yu(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!e.children[r]||!vD(e.children[r],t.children[r],n))return!1;return!0},subset:wD},mD={exact:function $F(e,t){return mr(e,t)},subset:function HF(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>pD(e[n],t[n]))},ignored:()=>!0};function yD(e,t,n){return jF[n.paths](e.root,t.root,n.matrixParams)&&mD[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function wD(e,t,n){return bD(e,t,t.segments,n)}function bD(e,t,n,r){if(e.segments.length>n.length){const o=e.segments.slice(0,n.length);return!(!jo(o,n)||t.hasChildren()||!Yu(o,n,r))}if(e.segments.length===n.length){if(!jo(e.segments,n)||!Yu(e.segments,n,r))return!1;for(const o in t.children)if(!e.children[o]||!wD(e.children[o],t.children[o],r))return!1;return!0}{const o=n.slice(0,e.segments.length),i=n.slice(e.segments.length);return!!(jo(e.segments,o)&&Yu(e.segments,o,r)&&e.children[Ee])&&bD(e.children[Ee],t,i,r)}}function Yu(e,t,n){return t.every((r,o)=>mD[n](e[o].parameters,r.parameters))}class ns{constructor(t=new ze([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ts(this.queryParams)),this._queryParamMap}toString(){return qF.serialize(this)}}class ze{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Qu(this)}}class Ma{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=ts(this.parameters)),this._parameterMap}toString(){return DD(this)}}function jo(e,t){return e.length===t.length&&e.every((n,r)=>n.path===t[r].path)}let Aa=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=oe({token:e,factory:function(){return new Ep},providedIn:"root"})}return e})();class Ep{parse(t){const n=new n3(t);return new ns(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){const n=`/${Ra(t.root,!0)}`,r=function ZF(e){const t=Object.keys(e).map(n=>{const r=e[n];return Array.isArray(r)?r.map(o=>`${Ju(n)}=${Ju(o)}`).join("&"):`${Ju(n)}=${Ju(r)}`}).filter(n=>!!n);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${n}${r}${"string"==typeof t.fragment?`#${function GF(e){return encodeURI(e)}(t.fragment)}`:""}`}}const qF=new Ep;function Qu(e){return e.segments.map(t=>DD(t)).join("/")}function Ra(e,t){if(!e.hasChildren())return Qu(e);if(t){const n=e.children[Ee]?Ra(e.children[Ee],!1):"",r=[];return Object.entries(e.children).forEach(([o,i])=>{o!==Ee&&r.push(`${o}:${Ra(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function zF(e,t){let n=[];return Object.entries(e.children).forEach(([r,o])=>{r===Ee&&(n=n.concat(t(o,r)))}),Object.entries(e.children).forEach(([r,o])=>{r!==Ee&&(n=n.concat(t(o,r)))}),n}(e,(r,o)=>o===Ee?[Ra(e.children[Ee],!1)]:[`${o}:${Ra(r,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[Ee]?`${Qu(e)}/${n[0]}`:`${Qu(e)}/(${n.join("//")})`}}function ED(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ju(e){return ED(e).replace(/%3B/gi,";")}function _p(e){return ED(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Xu(e){return decodeURIComponent(e)}function _D(e){return Xu(e.replace(/\+/g,"%20"))}function DD(e){return`${_p(e.path)}${function WF(e){return Object.keys(e).map(t=>`;${_p(t)}=${_p(e[t])}`).join("")}(e.parameters)}`}const YF=/^[^\/()?;#]+/;function Dp(e){const t=e.match(YF);return t?t[0]:""}const QF=/^[^\/()?;=#]+/,XF=/^[^=?&#]+/,e3=/^[^&#]+/;class n3{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ze([],{}):new ze([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[Ee]=new ze(t,n)),r}parseSegment(){const t=Dp(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new L(4009,!1);return this.capture(t),new Ma(Xu(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const n=function JF(e){const t=e.match(QF);return t?t[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const o=Dp(this.remaining);o&&(r=o,this.capture(r))}t[Xu(n)]=Xu(r)}parseQueryParam(t){const n=function KF(e){const t=e.match(XF);return t?t[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const s=function t3(e){const t=e.match(e3);return t?t[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const o=_D(n),i=_D(r);if(t.hasOwnProperty(o)){let s=t[o];Array.isArray(s)||(s=[s],t[o]=s),s.push(i)}else t[o]=i}parseParens(t){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Dp(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new L(4010,!1);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Ee);const s=this.parseChildren();n[i]=1===Object.keys(s).length?s[Ee]:new ze([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new L(4011,!1)}}function CD(e){return e.segments.length>0?new ze([],{[Ee]:e}):e}function SD(e){const t={};for(const r of Object.keys(e.children)){const i=SD(e.children[r]);if(r===Ee&&0===i.segments.length&&i.hasChildren())for(const[s,a]of Object.entries(i.children))t[s]=a;else(i.segments.length>0||i.hasChildren())&&(t[r]=i)}return function r3(e){if(1===e.numberOfChildren&&e.children[Ee]){const t=e.children[Ee];return new ze(e.segments.concat(t.segments),t.children)}return e}(new ze(e.segments,t))}function $o(e){return e instanceof ns}function ID(e){let t;const o=CD(function n(i){const s={};for(const c of i.children){const u=n(c);s[c.outlet]=u}const a=new ze(i.url,s);return i===e&&(t=a),a}(e.root));return t??o}function xD(e,t,n,r){let o=e;for(;o.parent;)o=o.parent;if(0===t.length)return Cp(o,o,o,n,r);const i=function i3(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new MD(!0,0,e);let t=0,n=!1;const r=e.reduce((o,i,s)=>{if("object"==typeof i&&null!=i){if(i.outlets){const a={};return Object.entries(i.outlets).forEach(([c,u])=>{a[c]="string"==typeof u?u.split("/"):u}),[...o,{outlets:a}]}if(i.segmentPath)return[...o,i.segmentPath]}return"string"!=typeof i?[...o,i]:0===s?(i.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?n=!0:".."===a?t++:""!=a&&o.push(a))}),o):[...o,i]},[]);return new MD(n,t,r)}(t);if(i.toRoot())return Cp(o,o,new ze([],{}),n,r);const s=function s3(e,t,n){if(e.isAbsolute)return new el(t,!0,0);if(!n)return new el(t,!1,NaN);if(null===n.parent)return new el(n,!0,0);const r=Ku(e.commands[0])?0:1;return function a3(e,t,n){let r=e,o=t,i=n;for(;i>o;){if(i-=o,r=r.parent,!r)throw new L(4005,!1);o=r.segments.length}return new el(r,!1,o-i)}(n,n.segments.length-1+r,e.numberOfDoubleDots)}(i,o,e),a=s.processChildren?Na(s.segmentGroup,s.index,i.commands):AD(s.segmentGroup,s.index,i.commands);return Cp(o,s.segmentGroup,a,n,r)}function Ku(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function ka(e){return"object"==typeof e&&null!=e&&e.outlets}function Cp(e,t,n,r,o){let s,i={};r&&Object.entries(r).forEach(([c,u])=>{i[c]=Array.isArray(u)?u.map(l=>`${l}`):`${u}`}),s=e===t?n:TD(e,t,n);const a=CD(SD(s));return new ns(a,i,o)}function TD(e,t,n){const r={};return Object.entries(e.children).forEach(([o,i])=>{r[o]=i===t?n:TD(i,t,n)}),new ze(e.segments,r)}class MD{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&Ku(r[0]))throw new L(4003,!1);const o=r.find(ka);if(o&&o!==gD(r))throw new L(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class el{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}}function AD(e,t,n){if(e||(e=new ze([],{})),0===e.segments.length&&e.hasChildren())return Na(e,t,n);const r=function u3(e,t,n){let r=0,o=t;const i={match:!1,pathIndex:0,commandIndex:0};for(;o<e.segments.length;){if(r>=n.length)return i;const s=e.segments[o],a=n[r];if(ka(a))break;const c=`${a}`,u=r<n.length-1?n[r+1]:null;if(o>0&&void 0===c)break;if(c&&u&&"object"==typeof u&&void 0===u.outlets){if(!kD(c,u,s))return i;r+=2}else{if(!kD(c,{},s))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(e,t,n),o=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const i=new ze(e.segments.slice(0,r.pathIndex),{});return i.children[Ee]=new ze(e.segments.slice(r.pathIndex),e.children),Na(i,0,o)}return r.match&&0===o.length?new ze(e.segments,{}):r.match&&!e.hasChildren()?Sp(e,t,n):r.match?Na(e,0,o):Sp(e,t,n)}function Na(e,t,n){if(0===n.length)return new ze(e.segments,{});{const r=function c3(e){return ka(e[0])?e[0].outlets:{[Ee]:e}}(n),o={};if(Object.keys(r).some(i=>i!==Ee)&&e.children[Ee]&&1===e.numberOfChildren&&0===e.children[Ee].segments.length){const i=Na(e.children[Ee],t,n);return new ze(e.segments,i.children)}return Object.entries(r).forEach(([i,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(o[i]=AD(e.children[i],t,s))}),Object.entries(e.children).forEach(([i,s])=>{void 0===r[i]&&(o[i]=s)}),new ze(e.segments,o)}}function Sp(e,t,n){const r=e.segments.slice(0,t);let o=0;for(;o<n.length;){const i=n[o];if(ka(i)){const c=l3(i.outlets);return new ze(r,c)}if(0===o&&Ku(n[0])){r.push(new Ma(e.segments[t].path,RD(n[0]))),o++;continue}const s=ka(i)?i.outlets[Ee]:`${i}`,a=o<n.length-1?n[o+1]:null;s&&a&&Ku(a)?(r.push(new Ma(s,RD(a))),o+=2):(r.push(new Ma(s,{})),o++)}return new ze(r,{})}function l3(e){const t={};return Object.entries(e).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(t[n]=Sp(new ze([],{}),0,r))}),t}function RD(e){const t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function kD(e,t,n){return e==n.path&&mr(t,n.parameters)}const Oa="imperative";class yr{constructor(t,n){this.id=t,this.url=n}}class tl extends yr{constructor(t,n,r="imperative",o=null){super(t,n),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class lo extends yr{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Pa extends yr{constructor(t,n,r,o){super(t,n),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class rs extends yr{constructor(t,n,r,o){super(t,n),this.reason=r,this.code=o,this.type=16}}class nl extends yr{constructor(t,n,r,o){super(t,n),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ND extends yr{constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class d3 extends yr{constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class f3 extends yr{constructor(t,n,r,o,i){super(t,n),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class h3 extends yr{constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class p3 extends yr{constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class g3{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class m3{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class y3{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class v3{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class w3{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class b3{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class OD{constructor(t,n,r){this.routerEvent=t,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Ip{}class xp{constructor(t){this.url=t}}class E3{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new La,this.attachRef=null}}let La=(()=>{class e{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const o=this.getOrCreateContext(n);o.outlet=r,this.contexts.set(n,o)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new E3,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class PD{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){const n=Tp(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){const n=Tp(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){const n=Mp(t,this._root);return n.length<2?[]:n[n.length-2].children.map(o=>o.value).filter(o=>o!==t)}pathFromRoot(t){return Mp(t,this._root).map(n=>n.value)}}function Tp(e,t){if(e===t.value)return t;for(const n of t.children){const r=Tp(e,n);if(r)return r}return null}function Mp(e,t){if(e===t.value)return[t];for(const n of t.children){const r=Mp(e,n);if(r.length)return r.unshift(t),r}return[]}class $r{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}}function os(e){const t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}class LD extends PD{constructor(t,n){super(t),this.snapshot=n,Ap(this,t)}toString(){return this.snapshot.toString()}}function FD(e,t){const n=function _3(e,t){const s=new rl([],{},{},"",{},Ee,t,null,{});return new BD("",new $r(s,[]))}(0,t),r=new Sn([new Ma("",{})]),o=new Sn({}),i=new Sn({}),s=new Sn({}),a=new Sn(""),c=new is(r,o,s,a,i,Ee,t,n.root);return c.snapshot=n.root,new LD(new $r(c,[]),n)}class is{constructor(t,n,r,o,i,s,a,c){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=i,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Ye(u=>u[Ta]))??me(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=o,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Ye(t=>ts(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Ye(t=>ts(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function UD(e,t="emptyOnly"){const n=e.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const o=n[r],i=n[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(i.component)break;r--}}return function D3(e){return e.reduce((t,n)=>({params:{...t.params,...n.params},data:{...t.data,...n.data},resolve:{...n.data,...t.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class rl{get title(){return this.data?.[Ta]}constructor(t,n,r,o,i,s,a,c,u){this.url=t,this.params=n,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ts(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ts(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class BD extends PD{constructor(t,n){super(n),this.url=t,Ap(this,n)}toString(){return jD(this._root)}}function Ap(e,t){t.value._routerState=e,t.children.forEach(n=>Ap(e,n))}function jD(e){const t=e.children.length>0?` { ${e.children.map(jD).join(", ")} } `:"";return`${e.value}${t}`}function Rp(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,mr(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),mr(t.params,n.params)||e.paramsSubject.next(n.params),function BF(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!mr(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.urlSubject.next(n.url),mr(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function kp(e,t){const n=mr(e.params,t.params)&&function VF(e,t){return jo(e,t)&&e.every((n,r)=>mr(n.parameters,t[r].parameters))}(e.url,t.url);return n&&!(!e.parent!=!t.parent)&&(!e.parent||kp(e.parent,t.parent))}let Np=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ee,this.activateEvents=new Zt,this.deactivateEvents=new Zt,this.attachEvents=new Zt,this.detachEvents=new Zt,this.parentContexts=Q(La),this.location=Q(Qn),this.changeDetector=Q(Ph),this.environmentInjector=Q(An),this.inputBinder=Q(ol,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:o}=n.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new L(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new L(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new L(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new L(4013,!1);this._activatedRoute=n;const o=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new C3(n,a,o.injector);this.activated=o.createComponent(s,{index:o.length,injector:c,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275dir=$t({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[xo]})}return e})();class C3{constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===is?this.route:t===La?this.childContexts:this.parent.get(t,n)}}const ol=new ie("");let $D=(()=>{class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:r}=n,o=mp([r.queryParams,r.params,r.data]).pipe(ir(([i,s,a],c)=>(a={...i,...s,...a},0===c?me(a):Promise.resolve(a)))).subscribe(i=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(n);const s=function W2(e){const t=Fe(e);if(!t)return null;const n=new Ks(t);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}(r.component);if(s)for(const{templateName:a}of s.inputs)n.activatedComponentRef.setInput(a,i[a]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,o)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=oe({token:e,factory:e.\u0275fac})}return e})();function Fa(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=t.value;const o=function I3(e,t,n){return t.children.map(r=>{for(const o of n.children)if(e.shouldReuseRoute(r.value,o.value.snapshot))return Fa(e,r,o);return Fa(e,r)})}(e,t,n);return new $r(r,o)}{if(e.shouldAttach(t.value)){const i=e.retrieve(t.value);if(null!==i){const s=i.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>Fa(e,a)),s}}const r=function x3(e){return new is(new Sn(e.url),new Sn(e.params),new Sn(e.queryParams),new Sn(e.fragment),new Sn(e.data),e.outlet,e.component,e)}(t.value),o=t.children.map(i=>Fa(e,i));return new $r(r,o)}}const Op="ngNavigationCancelingError";function HD(e,t){const{redirectTo:n,navigationBehaviorOptions:r}=$o(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,o=VD(!1,0,t);return o.url=n,o.navigationBehaviorOptions=r,o}function VD(e,t,n){const r=new Error("NavigationCancelingError: "+(e||""));return r[Op]=!0,r.cancellationCode=t,n&&(r.url=n),r}function zD(e){return e&&e[Op]}let qD=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275cmp=dc({type:e,selectors:[["ng-component"]],standalone:!0,features:[zb],decls:1,vars:0,template:function(r,o){1&r&&sa(0,"router-outlet")},dependencies:[Np],encapsulation:2})}return e})();function Pp(e){const t=e.children&&e.children.map(Pp),n=t?{...e,children:t}:{...e};return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==Ee&&(n.component=qD),n}function Kn(e){return e.outlet||Ee}function Ua(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){const n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class P3{constructor(t,n,r,o,i){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=i}activate(t){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),Rp(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){const o=os(n);t.children.forEach(i=>{const s=i.value.outlet;this.deactivateRoutes(i,o[s],r),delete o[s]}),Object.values(o).forEach(i=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(t,n,r){const o=t.value,i=n?n.value:null;if(o===i)if(o.component){const s=r.getContext(o.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,r);else i&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){const r=n.getContext(t.value.outlet),o=r&&t.value.component?r.children:n,i=os(t);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],o);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){const r=n.getContext(t.value.outlet),o=r&&t.value.component?r.children:n,i=os(t);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){const o=os(n);t.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new b3(i.value.snapshot))}),t.children.length&&this.forwardEvent(new v3(t.value.snapshot))}activateRoutes(t,n,r){const o=t.value,i=n?n.value:null;if(Rp(o),o===i)if(o.component){const s=r.getOrCreateContext(o.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,r);else if(o.component){const s=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Rp(a.route.value),this.activateChildRoutes(t,null,s.children)}else{const a=Ua(o.snapshot);s.attachRef=null,s.route=o,s.injector=a,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(t,null,s.children)}}else this.activateChildRoutes(t,null,r)}}class GD{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class il{constructor(t,n){this.component=t,this.route=n}}function L3(e,t,n){const r=e._root;return Ba(r,t?t._root:null,n,[r.value])}function ss(e,t){const n=Symbol(),r=t.get(e,n);return r===n?"function"!=typeof e||function ex(e){return null!==oc(e)}(e)?t.get(e):e:r}function Ba(e,t,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=os(t);return e.children.forEach(s=>{(function U3(e,t,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){const c=function B3(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!jo(e.url,t.url);case"pathParamsOrQueryParamsChange":return!jo(e.url,t.url)||!mr(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!kp(e,t)||!mr(e.queryParams,t.queryParams);default:return!kp(e,t)}}(s,i,i.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new GD(r)):(i.data=s.data,i._resolvedData=s._resolvedData),Ba(e,t,i.component?a?a.children:null:n,r,o),c&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new il(a.outlet.component,s))}else s&&ja(t,a,o),o.canActivateChecks.push(new GD(r)),Ba(e,null,i.component?a?a.children:null:n,r,o)})(s,i[s.value.outlet],n,r.concat([s.value]),o),delete i[s.value.outlet]}),Object.entries(i).forEach(([s,a])=>ja(a,n.getContext(s),o)),o}function ja(e,t,n){const r=os(e),o=e.value;Object.entries(r).forEach(([i,s])=>{ja(s,o.component?t?t.children.getContext(i):null:t,n)}),n.canDeactivateChecks.push(new il(o.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,o))}function $a(e){return"function"==typeof e}function WD(e){return e instanceof Sa||"EmptyError"===e?.name}const sl=Symbol("INITIAL_VALUE");function as(){return ir(e=>mp(e.map(t=>t.pipe(es(1),function RF(...e){const t=vs(e);return We((n,r)=>{(t?yp(e,n,t):yp(e,n)).subscribe(r)})}(sl)))).pipe(Ye(t=>{for(const n of t)if(!0!==n){if(n===sl)return sl;if(!1===n||n instanceof ns)return n}return!0}),co(t=>t!==sl),es(1)))}function ZD(e){return function De(...e){return St(e)}(Ut(t=>{if($o(t))throw HD(0,t)}),Ye(t=>!0===t))}class al{constructor(t){this.segmentGroup=t||null}}class YD{constructor(t){this.urlTree=t}}function cs(e){return Ia(new al(e))}function QD(e){return Ia(new YD(e))}class iU{constructor(t,n){this.urlSerializer=t,this.urlTree=n}noMatchError(t){return new L(4002,!1)}lineralizeSegments(t,n){let r=[],o=n.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return me(r);if(o.numberOfChildren>1||!o.children[Ee])return Ia(new L(4e3,!1));o=o.children[Ee]}}applyRedirectCommands(t,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r)}applyRedirectCreateUrlTree(t,n,r,o){const i=this.createSegmentGroup(t,n.root,r,o);return new ns(i,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){const r={};return Object.entries(t).forEach(([o,i])=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[o]=n[a]}else r[o]=i}),r}createSegmentGroup(t,n,r,o){const i=this.createSegments(t,n.segments,r,o);let s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(t,c,r,o)}),new ze(i,s)}createSegments(t,n,r,o){return n.map(i=>i.path.startsWith(":")?this.findPosParam(t,i,o):this.findOrReturn(i,r))}findPosParam(t,n,r){const o=r[n.path.substring(1)];if(!o)throw new L(4001,!1);return o}findOrReturn(t,n){let r=0;for(const o of n){if(o.path===t.path)return n.splice(r),o;r++}return t}}const Lp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function sU(e,t,n,r,o){const i=Fp(e,t,n);return i.matched?(r=function M3(e,t){return e.providers&&!e._injector&&(e._injector=dh(e.providers,t,`Route: ${e.path}`)),e._injector??t}(t,r),function nU(e,t,n,r){const o=t.canMatch;return o&&0!==o.length?me(o.map(s=>{const a=ss(s,e);return uo(function q3(e){return e&&$a(e.canMatch)}(a)?a.canMatch(t,n):e.runInContext(()=>a(t,n)))})).pipe(as(),ZD()):me(!0)}(r,t,n).pipe(Ye(s=>!0===s?i:{...Lp}))):me(i)}function Fp(e,t,n){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?{...Lp}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const o=(t.matcher||UF)(n,e,t);if(!o)return{...Lp};const i={};Object.entries(o.posParams??{}).forEach(([a,c])=>{i[a]=c.path});const s=o.consumed.length>0?{...i,...o.consumed[o.consumed.length-1].parameters}:i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:n.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function JD(e,t,n,r){return n.length>0&&function uU(e,t,n){return n.some(r=>cl(e,t,r)&&Kn(r)!==Ee)}(e,n,r)?{segmentGroup:new ze(t,cU(r,new ze(n,e.children))),slicedSegments:[]}:0===n.length&&function lU(e,t,n){return n.some(r=>cl(e,t,r))}(e,n,r)?{segmentGroup:new ze(e.segments,aU(e,0,n,r,e.children)),slicedSegments:n}:{segmentGroup:new ze(e.segments,e.children),slicedSegments:n}}function aU(e,t,n,r,o){const i={};for(const s of r)if(cl(e,n,s)&&!o[Kn(s)]){const a=new ze([],{});i[Kn(s)]=a}return{...o,...i}}function cU(e,t){const n={};n[Ee]=t;for(const r of e)if(""===r.path&&Kn(r)!==Ee){const o=new ze([],{});n[Kn(r)]=o}return n}function cl(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}class pU{constructor(t,n,r,o,i,s,a){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=o,this.urlTree=i,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new iU(this.urlSerializer,this.urlTree)}noMatchError(t){return new L(4002,!1)}recognize(){const t=JD(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,Ee).pipe(Bo(n=>{if(n instanceof YD)return this.allowRedirects=!1,this.urlTree=n.urlTree,this.match(n.urlTree);throw n instanceof al?this.noMatchError(n):n}),Ye(n=>{const r=new rl([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ee,this.rootComponentType,null,{}),o=new $r(r,n),i=new BD("",o),s=function o3(e,t,n=null,r=null){return xD(ID(e),t,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(i._root),{state:i,tree:s}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t.root,Ee).pipe(Bo(r=>{throw r instanceof al?this.noMatchError(r):r}))}inheritParamsAndData(t){const n=t.value,r=UD(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(t,n,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(t,n,r):this.processSegment(t,n,r,r.segments,o,!0)}processChildren(t,n,r){const o=[];for(const i of Object.keys(r.children))"primary"===i?o.unshift(i):o.push(i);return Tt(o).pipe(xa(i=>{const s=r.children[i],a=function N3(e,t){const n=e.filter(r=>Kn(r)===t);return n.push(...e.filter(r=>Kn(r)!==t)),n}(n,i);return this.processSegmentGroup(t,a,s,i)}),function OF(e,t){return We(function NF(e,t,n,r,o){return(i,s)=>{let a=n,c=t,u=0;i.subscribe(it(s,l=>{const d=u++;c=a?e(c,l,d):(a=!0,l),r&&s.next(c)},o&&(()=>{a&&s.next(c),s.complete()})))}}(e,t,arguments.length>=2,!0))}((i,s)=>(i.push(...s),i)),Zu(null),function PF(e,t){const n=arguments.length>=2;return r=>r.pipe(e?co((o,i)=>e(o,i,r)):W,wp(1),n?Zu(t):fD(()=>new Sa))}(),xt(i=>{if(null===i)return cs(r);const s=XD(i);return function gU(e){e.sort((t,n)=>t.value.outlet===Ee?-1:n.value.outlet===Ee?1:t.value.outlet.localeCompare(n.value.outlet))}(s),me(s)}))}processSegment(t,n,r,o,i,s){return Tt(n).pipe(xa(a=>this.processSegmentAgainstRoute(a._injector??t,n,a,r,o,i,s).pipe(Bo(c=>{if(c instanceof al)return me(null);throw c}))),Uo(a=>!!a),Bo(a=>{if(WD(a))return function fU(e,t,n){return 0===t.length&&!e.children[n]}(r,o,i)?me([]):cs(r);throw a}))}processSegmentAgainstRoute(t,n,r,o,i,s,a){return function dU(e,t,n,r){return!!(Kn(e)===r||r!==Ee&&cl(t,n,e))&&("**"===e.path||Fp(t,e,n).matched)}(r,o,i,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,o,r,i,s,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,o,n,r,i,s):cs(o):cs(o)}expandSegmentAgainstRouteUsingRedirect(t,n,r,o,i,s){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,o,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,n,r,o,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o){const i=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?QD(i):this.applyRedirects.lineralizeSegments(r,i).pipe(xt(s=>{const a=new ze(s,{});return this.processSegment(t,n,a,s,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,n,r,o,i,s){const{matched:a,consumedSegments:c,remainingSegments:u,positionalParamSegments:l}=Fp(n,o,i);if(!a)return cs(n);const d=this.applyRedirects.applyRedirectCommands(c,o.redirectTo,l);return o.redirectTo.startsWith("/")?QD(d):this.applyRedirects.lineralizeSegments(o,d).pipe(xt(f=>this.processSegment(t,r,n,f.concat(u),s,!1)))}matchSegmentAgainstRoute(t,n,r,o,i,s){let a;if("**"===r.path){const c=o.length>0?gD(o).parameters:{};a=me({snapshot:new rl(o,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,KD(r),Kn(r),r.component??r._loadedComponent??null,r,eC(r)),consumedSegments:[],remainingSegments:[]}),n.children={}}else a=sU(n,r,o,t).pipe(Ye(({matched:c,consumedSegments:u,remainingSegments:l,parameters:d})=>c?{snapshot:new rl(u,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,KD(r),Kn(r),r.component??r._loadedComponent??null,r,eC(r)),consumedSegments:u,remainingSegments:l}:null));return a.pipe(ir(c=>null===c?cs(n):this.getChildConfig(t=r._injector??t,r,o).pipe(ir(({routes:u})=>{const l=r._loadedInjector??t,{snapshot:d,consumedSegments:f,remainingSegments:h}=c,{segmentGroup:p,slicedSegments:g}=JD(n,f,h,u);if(0===g.length&&p.hasChildren())return this.processChildren(l,u,p).pipe(Ye(v=>null===v?null:[new $r(d,v)]));if(0===u.length&&0===g.length)return me([new $r(d,[])]);const m=Kn(r)===i;return this.processSegment(l,u,p,g,m?Ee:i,!0).pipe(Ye(v=>[new $r(d,v)]))}))))}getChildConfig(t,n,r){return n.children?me({routes:n.children,injector:t}):n.loadChildren?void 0!==n._loadedRoutes?me({routes:n._loadedRoutes,injector:n._loadedInjector}):function tU(e,t,n,r){const o=t.canLoad;return void 0===o||0===o.length?me(!0):me(o.map(s=>{const a=ss(s,e);return uo(function $3(e){return e&&$a(e.canLoad)}(a)?a.canLoad(t,n):e.runInContext(()=>a(t,n)))})).pipe(as(),ZD())}(t,n,r).pipe(xt(o=>o?this.configLoader.loadChildren(t,n).pipe(Ut(i=>{n._loadedRoutes=i.routes,n._loadedInjector=i.injector})):function oU(e){return Ia(VD(!1,3))}())):me({routes:[],injector:t})}}function mU(e){const t=e.value.routeConfig;return t&&""===t.path}function XD(e){const t=[],n=new Set;for(const r of e){if(!mU(r)){t.push(r);continue}const o=t.find(i=>r.value.routeConfig===i.value.routeConfig);void 0!==o?(o.children.push(...r.children),n.add(o)):t.push(r)}for(const r of n){const o=XD(r.children);t.push(new $r(r.value,o))}return t.filter(r=>!n.has(r))}function KD(e){return e.data||{}}function eC(e){return e.resolve||{}}function tC(e){return"string"==typeof e.title||null===e.title}function Up(e){return ir(t=>{const n=e(t);return n?Tt(n).pipe(Ye(()=>t)):me(t)})}const us=new ie("ROUTES");let Bp=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Q(BE)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return me(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=uo(n.loadComponent()).pipe(Ye(nC),Ut(i=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=i}),bp(()=>{this.componentLoaders.delete(n)})),o=new dD(r,()=>new ot).pipe(vp());return this.componentLoaders.set(n,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return me({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const i=function DU(e,t,n,r){return uo(e.loadChildren()).pipe(Ye(nC),xt(o=>o instanceof Hb||Array.isArray(o)?me(o):Tt(t.compileModuleAsync(o))),Ye(o=>{r&&r(e);let i,s,a=!1;return Array.isArray(o)?(s=o,!0):(i=o.create(n).injector,s=i.get(us,[],{optional:!0,self:!0}).flat()),{routes:s.map(Pp),injector:i}}))}(r,this.compiler,n,this.onLoadEndListener).pipe(bp(()=>{this.childrenLoaders.delete(r)})),s=new dD(i,()=>new ot).pipe(vp());return this.childrenLoaders.set(r,s),s}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function nC(e){return function CU(e){return e&&"object"==typeof e&&"default"in e}(e)?e.default:e}let ul=(()=>{class e{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ot,this.transitionAbortSubject=new ot,this.configLoader=Q(Bp),this.environmentInjector=Q(An),this.urlSerializer=Q(Aa),this.rootContexts=Q(La),this.inputBindingEnabled=null!==Q(ol,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>me(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new m3(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new g3(o))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n,r,o){return this.transitions=new Sn({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:n.urlHandlingStrategy.extract(r),urlAfterRedirects:n.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Oa,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(co(i=>0!==i.id),Ye(i=>({...i,extractedUrl:n.urlHandlingStrategy.extract(i.rawUrl)})),ir(i=>{this.currentTransition=i;let s=!1,a=!1;return me(i).pipe(Ut(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ir(c=>{const u=c.currentBrowserUrl.toString(),l=!n.navigated||c.extractedUrl.toString()!==u||u!==c.currentUrlTree.toString();if(!l&&"reload"!==(c.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const f="";return this.events.next(new rs(c.id,this.urlSerializer.serialize(c.rawUrl),f,0)),c.resolve(null),or}if(n.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return me(c).pipe(ir(f=>{const h=this.transitions?.getValue();return this.events.next(new tl(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),h!==this.transitions?.getValue()?or:Promise.resolve(f)}),function yU(e,t,n,r,o,i){return xt(s=>function hU(e,t,n,r,o,i,s="emptyOnly"){return new pU(e,t,n,r,o,s,i).recognize()}(e,t,n,r,s.extractedUrl,o,i).pipe(Ye(({state:a,tree:c})=>({...s,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),Ut(f=>{i.targetSnapshot=f.targetSnapshot,i.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:f.urlAfterRedirects};const h=new ND(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(h)}));if(l&&n.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){const{id:f,extractedUrl:h,source:p,restoredState:g,extras:m}=c,v=new tl(f,this.urlSerializer.serialize(h),p,g);this.events.next(v);const y=FD(0,this.rootComponentType).snapshot;return this.currentTransition=i={...c,targetSnapshot:y,urlAfterRedirects:h,extras:{...m,skipLocationChange:!1,replaceUrl:!1}},me(i)}{const f="";return this.events.next(new rs(c.id,this.urlSerializer.serialize(c.extractedUrl),f,1)),c.resolve(null),or}}),Ut(c=>{const u=new d3(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),Ye(c=>(this.currentTransition=i={...c,guards:L3(c.targetSnapshot,c.currentSnapshot,this.rootContexts)},i)),function W3(e,t){return xt(n=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:s}}=n;return 0===s.length&&0===i.length?me({...n,guardsResult:!0}):function Z3(e,t,n,r){return Tt(e).pipe(xt(o=>function eU(e,t,n,r,o){const i=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return i&&0!==i.length?me(i.map(a=>{const c=Ua(t)??o,u=ss(a,c);return uo(function z3(e){return e&&$a(e.canDeactivate)}(u)?u.canDeactivate(e,t,n,r):c.runInContext(()=>u(e,t,n,r))).pipe(Uo())})).pipe(as()):me(!0)}(o.component,o.route,n,t,r)),Uo(o=>!0!==o,!0))}(s,r,o,e).pipe(xt(a=>a&&function j3(e){return"boolean"==typeof e}(a)?function Y3(e,t,n,r){return Tt(t).pipe(xa(o=>yp(function J3(e,t){return null!==e&&t&&t(new y3(e)),me(!0)}(o.route.parent,r),function Q3(e,t){return null!==e&&t&&t(new w3(e)),me(!0)}(o.route,r),function K3(e,t,n){const r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(s=>function F3(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(s)).filter(s=>null!==s).map(s=>lD(()=>me(s.guards.map(c=>{const u=Ua(s.node)??n,l=ss(c,u);return uo(function V3(e){return e&&$a(e.canActivateChild)}(l)?l.canActivateChild(r,e):u.runInContext(()=>l(r,e))).pipe(Uo())})).pipe(as())));return me(i).pipe(as())}(e,o.path,n),function X3(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return me(!0);const o=r.map(i=>lD(()=>{const s=Ua(t)??n,a=ss(i,s);return uo(function H3(e){return e&&$a(e.canActivate)}(a)?a.canActivate(t,e):s.runInContext(()=>a(t,e))).pipe(Uo())}));return me(o).pipe(as())}(e,o.route,n))),Uo(o=>!0!==o,!0))}(r,i,e,t):me(a)),Ye(a=>({...n,guardsResult:a})))})}(this.environmentInjector,c=>this.events.next(c)),Ut(c=>{if(i.guardsResult=c.guardsResult,$o(c.guardsResult))throw HD(0,c.guardsResult);const u=new f3(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),co(c=>!!c.guardsResult||(this.cancelNavigationTransition(c,"",3),!1)),Up(c=>{if(c.guards.canActivateChecks.length)return me(c).pipe(Ut(u=>{const l=new h3(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),ir(u=>{let l=!1;return me(u).pipe(function vU(e,t){return xt(n=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=n;if(!o.length)return me(n);let i=0;return Tt(o).pipe(xa(s=>function wU(e,t,n,r){const o=e.routeConfig,i=e._resolve;return void 0!==o?.title&&!tC(o)&&(i[Ta]=o.title),function bU(e,t,n,r){const o=function EU(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}(e);if(0===o.length)return me({});const i={};return Tt(o).pipe(xt(s=>function _U(e,t,n,r){const o=Ua(t)??r,i=ss(e,o);return uo(i.resolve?i.resolve(t,n):o.runInContext(()=>i(t,n)))}(e[s],t,n,r).pipe(Uo(),Ut(a=>{i[s]=a}))),wp(1),function LF(e){return Ye(()=>e)}(i),Bo(s=>WD(s)?or:Ia(s)))}(i,e,t,r).pipe(Ye(s=>(e._resolvedData=s,e.data=UD(e,n).resolve,o&&tC(o)&&(e.data[Ta]=o.title),null)))}(s.route,r,e,t)),Ut(()=>i++),wp(1),xt(s=>i===o.length?me(n):or))})}(n.paramsInheritanceStrategy,this.environmentInjector),Ut({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(u,"",2)}}))}),Ut(u=>{const l=new p3(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}))}),Up(c=>{const u=l=>{const d=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(l.routeConfig).pipe(Ut(f=>{l.component=f}),Ye(()=>{})));for(const f of l.children)d.push(...u(f));return d};return mp(u(c.targetSnapshot.root)).pipe(Zu(),es(1))}),Up(()=>this.afterPreactivation()),Ye(c=>{const u=function S3(e,t,n){const r=Fa(e,t._root,n?n._root:void 0);return new LD(r,t)}(n.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=i={...c,targetRouterState:u},i}),Ut(()=>{this.events.next(new Ip)}),((e,t,n,r)=>Ye(o=>(new P3(t,o.targetRouterState,o.currentRouterState,n,r).activate(e),o)))(this.rootContexts,n.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),es(1),Ut({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new lo(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),n.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),hD(this.transitionAbortSubject.pipe(Ut(c=>{throw c}))),bp(()=>{s||a||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Bo(c=>{if(a=!0,zD(c))this.events.next(new Pa(i.id,this.urlSerializer.serialize(i.extractedUrl),c.message,c.cancellationCode)),function T3(e){return zD(e)&&$o(e.url)}(c)?this.events.next(new xp(c.url)):i.resolve(!1);else{this.events.next(new nl(i.id,this.urlSerializer.serialize(i.extractedUrl),c,i.targetSnapshot??void 0));try{i.resolve(n.errorHandler(c))}catch(u){i.reject(u)}}return or}))}))}cancelNavigationTransition(n,r,o){const i=new Pa(n.id,this.urlSerializer.serialize(n.extractedUrl),r,o);this.events.next(i),n.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function rC(e){return e!==Oa}let oC=(()=>{class e{buildTitle(n){let r,o=n.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(i=>i.outlet===Ee);return r}getResolvedTitleForRoute(n){return n.data[Ta]}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=oe({token:e,factory:function(){return Q(SU)},providedIn:"root"})}return e})(),SU=(()=>{class e extends oC{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||e)(ee(iD))};static#t=this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),IU=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=oe({token:e,factory:function(){return Q(TU)},providedIn:"root"})}return e})();class xU{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}}let TU=(()=>{class e extends xU{static#e=this.\u0275fac=function(){let n;return function(o){return(n||(n=function $y(e){return Ir(()=>{const t=e.prototype.constructor,n=t[xr]||Rd(t),r=Object.prototype;let o=Object.getPrototypeOf(e.prototype).constructor;for(;o&&o!==r;){const i=o[xr]||Rd(o);if(i&&i!==n)return i;o=Object.getPrototypeOf(o)}return i=>new i})}(e)))(o||e)}}();static#t=this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const ll=new ie("",{providedIn:"root",factory:()=>({})});let MU=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=oe({token:e,factory:function(){return Q(AU)},providedIn:"root"})}return e})(),AU=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Ha=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(Ha||{});function iC(e,t){e.events.pipe(co(n=>n instanceof lo||n instanceof Pa||n instanceof nl||n instanceof rs),Ye(n=>n instanceof lo||n instanceof rs?Ha.COMPLETE:n instanceof Pa&&(0===n.code||1===n.code)?Ha.REDIRECTING:Ha.FAILED),co(n=>n!==Ha.REDIRECTING),es(1)).subscribe(()=>{t()})}function RU(e){throw e}function kU(e,t,n){return t.parse("/")}const NU={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},OU={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ln=(()=>{class e{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Q(FE),this.isNgZoneEnabled=!1,this._events=new ot,this.options=Q(ll,{optional:!0})||{},this.pendingTasks=Q(UE),this.errorHandler=this.options.errorHandler||RU,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||kU,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Q(MU),this.routeReuseStrategy=Q(IU),this.titleStrategy=Q(oC),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Q(us,{optional:!0})?.flat()??[],this.navigationTransitions=Q(ul),this.urlSerializer=Q(Aa),this.location=Q(qh),this.componentInputBindingEnabled=!!Q(ol,{optional:!0}),this.eventsSubscription=new H,this.isNgZoneEnabled=Q(Xe)instanceof Xe&&Xe.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new ns,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=FD(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:o}=this.navigationTransitions;if(null===o)return void(sC(r)&&this._events.next(r));if(r instanceof tl)rC(o.source)&&(this.browserUrlTree=o.extractedUrl);else if(r instanceof rs)this.rawUrlTree=o.rawUrl;else if(r instanceof ND){if("eager"===this.urlUpdateStrategy){if(!o.extras.skipLocationChange){const i=this.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl);this.setBrowserUrl(i,o)}this.browserUrlTree=o.urlAfterRedirects}}else if(r instanceof Ip)this.currentUrlTree=o.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),this.routerState=o.targetRouterState,"deferred"===this.urlUpdateStrategy&&(o.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,o),this.browserUrlTree=o.urlAfterRedirects);else if(r instanceof Pa)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(o);else if(r instanceof xp){const i=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),s={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||rC(o.source)};this.scheduleNavigation(i,Oa,null,s,{resolve:o.resolve,reject:o.reject,promise:o.promise})}r instanceof nl&&this.restoreHistory(o,!0),r instanceof lo&&(this.navigated=!0),sC(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Oa,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,r,n.state)},0)}))}navigateToSyncWithBrowser(n,r,o){const i={replaceUrl:!0},s=o?.navigationId?o:null;if(o){const c={...o};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(i.state=c)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,s,i)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Pp),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){const{relativeTo:o,queryParams:i,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s;let d,l=null;switch(a){case"merge":l={...this.currentUrlTree.queryParams,...i};break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=i||null}null!==l&&(l=this.removeEmptyProps(l));try{d=ID(o?o.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||!n[0].startsWith("/"))&&(n=[]),d=this.currentUrlTree.root}return xD(d,n,l,u??null)}navigateByUrl(n,r={skipLocationChange:!1}){const o=$o(n)?n:this.parseUrl(n),i=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(i,Oa,null,r)}navigate(n,r={skipLocationChange:!1}){return function PU(e){for(let t=0;t<e.length;t++)if(null==e[t])throw new L(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,n)}return r}isActive(n,r){let o;if(o=!0===r?{...NU}:!1===r?{...OU}:r,$o(n))return yD(this.currentUrlTree,n,o);const i=this.parseUrl(n);return yD(this.currentUrlTree,i,o)}removeEmptyProps(n){return Object.keys(n).reduce((r,o)=>{const i=n[o];return null!=i&&(r[o]=i),r},{})}scheduleNavigation(n,r,o,i,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((d,f)=>{a=d,c=f});const l=this.pendingTasks.add();return iC(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(l))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:n,extras:i,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(d=>Promise.reject(d))}setBrowserUrl(n,r){const o=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(o,"",s)}else{const i={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(o,"",i)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-this.browserPageId;0!==i?this.location.historyGo(i):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function sC(e){return!(e instanceof Ip||e instanceof xp)}class aC{}let UU=(()=>{class e{constructor(n,r,o,i,s){this.router=n,this.injector=o,this.preloadingStrategy=i,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(co(n=>n instanceof lo),xa(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const o=[];for(const i of r){i.providers&&!i._injector&&(i._injector=dh(i.providers,n,`Route: ${i.path}`));const s=i._injector??n,a=i._loadedInjector??s;(i.loadChildren&&!i._loadedRoutes&&void 0===i.canLoad||i.loadComponent&&!i._loadedComponent)&&o.push(this.preloadConfig(s,i)),(i.children||i._loadedRoutes)&&o.push(this.processRoutes(a,i.children??i._loadedRoutes))}return Tt(o).pipe(Ko())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):me(null);const i=o.pipe(xt(s=>null===s?me(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??n,s.routes))));return r.loadComponent&&!r._loadedComponent?Tt([i,this.loader.loadComponent(r)]).pipe(Ko()):i})}static#e=this.\u0275fac=function(r){return new(r||e)(ee(Ln),ee(BE),ee(An),ee(aC),ee(Bp))};static#t=this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const $p=new ie("");let cC=(()=>{class e{constructor(n,r,o,i,s={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=o,this.zone=i,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof tl?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof lo?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof rs&&0===n.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof OD&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new OD(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function xw(){throw new Error("invalid")}()};static#t=this.\u0275prov=oe({token:e,factory:e.\u0275fac})}return e})();function Hr(e,t){return{\u0275kind:e,\u0275providers:t}}function lC(){const e=Q(Rn);return t=>{const n=e.get(Ji);if(t!==n.components[0])return;const r=e.get(Ln),o=e.get(dC);1===e.get(Hp)&&r.initialNavigation(),e.get(fC,null,Ae.Optional)?.setUpPreloading(),e.get($p,null,Ae.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}const dC=new ie("",{factory:()=>new ot}),Hp=new ie("",{providedIn:"root",factory:()=>1}),fC=new ie("");function HU(e){return Hr(0,[{provide:fC,useExisting:UU},{provide:aC,useExisting:e}])}const hC=new ie("ROUTER_FORROOT_GUARD"),zU=[qh,{provide:Aa,useClass:Ep},Ln,La,{provide:is,useFactory:function uC(e){return e.routerState.root},deps:[Ln]},Bp,[]];function qU(){return new GE("Router",Ln)}let pC=(()=>{class e{constructor(n){}static forRoot(n,r){return{ngModule:e,providers:[zU,[],{provide:us,multi:!0,useValue:n},{provide:hC,useFactory:YU,deps:[[Ln,new Mc,new Ac]]},{provide:ll,useValue:r||{}},r?.useHash?{provide:Fo,useClass:X2}:{provide:Fo,useClass:__},{provide:$p,useFactory:()=>{const e=Q(yL),t=Q(Xe),n=Q(ll),r=Q(ul),o=Q(Aa);return n.scrollOffset&&e.setOffset(n.scrollOffset),new cC(o,r,e,t,n)}},r?.preloadingStrategy?HU(r.preloadingStrategy).\u0275providers:[],{provide:GE,multi:!0,useFactory:qU},r?.initialNavigation?QU(r):[],r?.bindToComponentInputs?Hr(8,[$D,{provide:ol,useExisting:$D}]).\u0275providers:[],[{provide:gC,useFactory:lC},{provide:Nh,multi:!0,useExisting:gC}]]}}static forChild(n){return{ngModule:e,providers:[{provide:us,multi:!0,useValue:n}]}}static#e=this.\u0275fac=function(r){return new(r||e)(ee(hC,8))};static#t=this.\u0275mod=zn({type:e});static#n=this.\u0275inj=xn({})}return e})();function YU(e){return"guarded"}function QU(e){return["disabled"===e.initialNavigation?Hr(3,[{provide:Sh,multi:!0,useFactory:()=>{const t=Q(Ln);return()=>{t.setUpLocationChangeListener()}}},{provide:Hp,useValue:2}]).\u0275providers:[],"enabledBlocking"===e.initialNavigation?Hr(2,[{provide:Hp,useValue:0},{provide:Sh,multi:!0,deps:[Rn],useFactory:t=>{const n=t.get(Q2,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const o=t.get(Ln),i=t.get(dC);iC(o,()=>{r(!0)}),t.get(ul).afterPreactivation=()=>(r(!0),i.closed?me(void 0):i),o.initialNavigation()}))}}]).\u0275providers:[]]}const gC=new ie("");var Va=function(e){return e.STRANGE="STRANGE",e.YOU="YOU",e}(Va||{}),Ho=function(e){return e.CONNECTED="CONNECTED",e.UP_TO_DISCONNECT="UP_TO_DISCONNECT",e.DISCONNECTED="DISCONNECTED",e}(Ho||{});function mC(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(u){return void n(u)}a.done?t(c):Promise.resolve(c).then(r,o)}function z(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function s(c){mC(i,r,o,s,a,"next",c)}function a(c){mC(i,r,o,s,a,"throw",c)}s(void 0)})}}var er=function(e){return e[e.Metadata=0]="Metadata",e[e.Text=1]="Text",e[e.RecommendRelay=2]="RecommendRelay",e[e.Contacts=3]="Contacts",e[e.EncryptedDirectMessage=4]="EncryptedDirectMessage",e[e.EventDeletion=5]="EventDeletion",e[e.Repost=6]="Repost",e[e.Reaction=7]="Reaction",e[e.BadgeAward=8]="BadgeAward",e[e.ChannelCreation=40]="ChannelCreation",e[e.ChannelMetadata=41]="ChannelMetadata",e[e.ChannelMessage=42]="ChannelMessage",e[e.ChannelHideMessage=43]="ChannelHideMessage",e[e.ChannelMuteUser=44]="ChannelMuteUser",e[e.Report=1984]="Report",e[e.ZapRequest=9734]="ZapRequest",e[e.Zap=9735]="Zap",e[e.MuteList=1e4]="MuteList",e[e.PinList=10001]="PinList",e[e.RelayList=10002]="RelayList",e[e.ClientAuth=22242]="ClientAuth",e[e.NostrConnect=24133]="NostrConnect",e[e.CategorizedPeopleList=3e4]="CategorizedPeopleList",e[e.CategorizedBookmarkList=30001]="CategorizedBookmarkList",e[e.ProfileBadge=30008]="ProfileBadge",e[e.BadgeDefinition=30009]="BadgeDefinition",e[e.Article=30023]="Article",e[e.AppSpecificData=30078]="AppSpecificData",e[e.UserStatuses=30315]="UserStatuses",e}(er||{});function yC(e,t){this.v=e,this.k=t}function XU(e){return new yC(e,0)}function za(e){var t,n;function r(i,s){try{var a=e[i](s),c=a.value,u=c instanceof yC;Promise.resolve(u?c.v:c).then(function(l){if(u){var d="return"===i?"return":"next";if(!c.k||l.done)return r(d,l);l=e[d](l).value}o(a.done?"return":"normal",l)},function(l){r("throw",l)})}catch(l){o("throw",l)}}function o(i,s){switch(i){case"return":t.resolve({value:s,done:!0});break;case"throw":t.reject(s);break;default:t.resolve({value:s,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(i,s){return new Promise(function(a,c){var u={key:i,arg:s,resolve:a,reject:c,next:null};n?n=n.next=u:(t=n=u,r(i,s))})},"function"!=typeof e.return&&(this.return=void 0)}function Vp(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Vo(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}za.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},za.prototype.next=function(e){return this._invoke("next",e)},za.prototype.throw=function(e){return this._invoke("throw",e)},za.prototype.return=function(e){return this._invoke("return",e)};const Bt={number:Vp,bool:function e8(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)},bytes:Vo,hash:function t8(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");Vp(e.outputLen),Vp(e.blockLen)},exists:function n8(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")},output:function r8(e,t){Vo(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}},zp="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,qp=e=>e instanceof Uint8Array,zo=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),vr=(e,t)=>e<<32-t|e>>>t;if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");const o8=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function dn(e){if(!qp(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=o8[e[n]];return t}function ls(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const o=2*r,i=e.slice(o,o+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");n[r]=s}return n}function vC(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function Vr(e){if("string"==typeof e&&(e=vC(e)),!qp(e))throw new Error("expected Uint8Array, got "+typeof e);return e}function fo(...e){const t=new Uint8Array(e.reduce((r,o)=>r+o.length,0));let n=0;return e.forEach(r=>{if(!qp(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}class wC{clone(){return this._cloneInto()}}const s8=e=>"[object Object]"===Object.prototype.toString.call(e)&&e.constructor===Object;function qo(e){const t=r=>e().update(Vr(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function qa(e=32){if(zp&&"function"==typeof zp.getRandomValues)return zp.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}class Wp extends wC{constructor(t,n,r,o){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=zo(this.buffer)}update(t){Bt.exists(this);const{view:n,buffer:r,blockLen:o}=this,i=(t=Vr(t)).length;for(let s=0;s<i;){const a=Math.min(o-this.pos,i-s);if(a!==o)r.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===o&&(this.process(n,0),this.pos=0);else{const c=zo(t);for(;o<=i-s;s+=o)this.process(c,s)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){Bt.exists(this),Bt.output(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:o,isLE:i}=this;let{pos:s}=this;n[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>o-s&&(this.process(r,0),s=0);for(let d=s;d<o;d++)n[d]=0;(function c8(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const o=BigInt(32),i=BigInt(4294967295),s=Number(n>>o&i),a=Number(n&i),u=r?0:4;e.setUint32(t+(r?4:0),s,r),e.setUint32(t+u,a,r)})(r,o-8,BigInt(8*this.length),i),this.process(r,0);const a=zo(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],i)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:o,finished:i,destroyed:s,pos:a}=this;return t.length=o,t.pos=a,t.finished=i,t.destroyed=s,o%n&&t.buffer.set(r),t}}const u8=(e,t,n)=>e&t^~e&n,l8=(e,t,n)=>e&t^e&n^t&n,d8=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ho=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),po=new Uint32Array(64);class bC extends Wp{constructor(){super(64,32,8,!1),this.A=0|ho[0],this.B=0|ho[1],this.C=0|ho[2],this.D=0|ho[3],this.E=0|ho[4],this.F=0|ho[5],this.G=0|ho[6],this.H=0|ho[7]}get(){const{A:t,B:n,C:r,D:o,E:i,F:s,G:a,H:c}=this;return[t,n,r,o,i,s,a,c]}set(t,n,r,o,i,s,a,c){this.A=0|t,this.B=0|n,this.C=0|r,this.D=0|o,this.E=0|i,this.F=0|s,this.G=0|a,this.H=0|c}process(t,n){for(let d=0;d<16;d++,n+=4)po[d]=t.getUint32(n,!1);for(let d=16;d<64;d++){const f=po[d-15],h=po[d-2],p=vr(f,7)^vr(f,18)^f>>>3,g=vr(h,17)^vr(h,19)^h>>>10;po[d]=g+po[d-7]+p+po[d-16]|0}let{A:r,B:o,C:i,D:s,E:a,F:c,G:u,H:l}=this;for(let d=0;d<64;d++){const h=l+(vr(a,6)^vr(a,11)^vr(a,25))+u8(a,c,u)+d8[d]+po[d]|0,g=(vr(r,2)^vr(r,13)^vr(r,22))+l8(r,o,i)|0;l=u,u=c,c=a,a=s+h|0,s=i,i=o,o=r,r=h+g|0}r=r+this.A|0,o=o+this.B|0,i=i+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(r,o,i,s,a,c,u,l)}roundClean(){po.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class f8 extends bC{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const Fn=qo(()=>new bC),dl=(qo(()=>new f8),BigInt(0),BigInt(1)),h8=BigInt(2),fl=e=>e instanceof Uint8Array,p8=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function ds(e){if(!fl(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=p8[e[n]];return t}function _C(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function fs(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const o=2*r,i=e.slice(o,o+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");n[r]=s}return n}function fn(e){return _C(ds(e))}function Zp(e){if(!fl(e))throw new Error("Uint8Array expected");return _C(ds(Uint8Array.from(e).reverse()))}function go(e,t){return fs(e.toString(16).padStart(2*t,"0"))}function DC(e,t){return go(e,t).reverse()}function Nt(e,t,n){let r;if("string"==typeof t)try{r=fs(t)}catch(i){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${i}`)}else{if(!fl(t))throw new Error(`${e} must be hex string or Uint8Array`);r=Uint8Array.from(t)}const o=r.length;if("number"==typeof n&&o!==n)throw new Error(`${e} expected ${n} bytes, got ${o}`);return r}function Go(...e){const t=new Uint8Array(e.reduce((r,o)=>r+o.length,0));let n=0;return e.forEach(r=>{if(!fl(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}const Yp=e=>(h8<<BigInt(e-1))-dl,Qp=e=>new Uint8Array(e),CC=e=>Uint8Array.from(e);function SC(e,t,n){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");let r=Qp(e),o=Qp(e),i=0;const s=()=>{r.fill(1),o.fill(0),i=0},a=(...d)=>n(o,r,...d),c=(d=Qp())=>{o=a(CC([0]),d),r=a(),0!==d.length&&(o=a(CC([1]),d),r=a())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const f=[];for(;d<t;){r=a();const h=r.slice();f.push(h),d+=r.length}return Go(...f)};return(d,f)=>{let h;for(s(),c(d);!(h=f(u()));)c();return s(),h}}const m8={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function Ga(e,t,n={}){const r=(o,i,s)=>{const a=m8[i];if("function"!=typeof a)throw new Error(`Invalid validator "${i}", expected function`);const c=e[o];if(!(s&&void 0===c||a(c,e)))throw new Error(`Invalid param ${String(o)}=${c} (${typeof c}), expected ${i}`)};for(const[o,i]of Object.entries(t))r(o,i,!1);for(const[o,i]of Object.entries(n))r(o,i,!0);return e}const Dt=BigInt(0),rt=BigInt(1),mo=BigInt(2),y8=BigInt(3),Jp=BigInt(4),IC=BigInt(5),xC=BigInt(8);function Ct(e,t){const n=e%t;return n>=Dt?n:t+n}function b8(e,t,n){if(n<=Dt||t<Dt)throw new Error("Expected power/modulo > 0");if(n===rt)return Dt;let r=rt;for(;t>Dt;)t&rt&&(r=r*e%n),e=e*e%n,t>>=rt;return r}function Un(e,t,n){let r=e;for(;t-- >Dt;)r*=r,r%=n;return r}function hl(e,t){if(e===Dt||t<=Dt)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=Ct(e,t),r=t,o=Dt,i=rt,s=rt,a=Dt;for(;n!==Dt;){const u=r/n,l=r%n,d=o-s*u,f=i-a*u;r=n,n=l,o=s,i=a,s=d,a=f}if(r!==rt)throw new Error("invert: does not exist");return Ct(o,t)}BigInt(9),BigInt(16);const D8=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Xp(e,t){const n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}const M8=BigInt(0),Kp=BigInt(1);function TC(e){return function C8(e){Ga(e,D8.reduce((r,o)=>(r[o]="function",r),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"}))}(e.Fp),Ga(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Xp(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const{bytesToNumberBE:k8,hexToBytes:N8}=de,Wo={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){const{Err:t}=Wo;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(128&r[0])throw new t("Invalid signature integer: negative");if(0===r[0]&&!(128&r[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:k8(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=Wo,n="string"==typeof e?N8(e):e;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||48!=n[0])throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:o,l:i}=Wo._parseInt(n.subarray(2)),{d:s,l:a}=Wo._parseInt(i);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:o,s}},hexFromSig(e){const t=u=>8&Number.parseInt(u[0],16)?"00"+u:u,n=u=>{const l=u.toString(16);return 1&l.length?`0${l}`:l},r=t(n(e.s)),o=t(n(e.r)),i=r.length/2,s=o.length/2,a=n(i),c=n(s);return`30${n(s+i+4)}02${c}${o}02${a}${r}`}},tr=BigInt(0),lt=BigInt(1),pl=(BigInt(2),BigInt(3));function L8(e){const t=function P8(e){const t=TC(e);return Ga(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:n,n:r}=t,o=n.BYTES+1,i=2*n.BYTES+1;function a(I){return Ct(I,r)}function c(I){return hl(I,r)}const{ProjectivePoint:u,normPrivateKeyToScalar:l,weierstrassEquation:d,isWithinCurveOrder:f}=function O8(e){const t=function R8(e){const t=TC(e);Ga(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:o}=t;if(n){if(!r.eql(o,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:n}=t,r=t.toBytes||((p,g,m)=>{const v=g.toAffine();return Go(Uint8Array.from([4]),n.toBytes(v.x),n.toBytes(v.y))}),o=t.fromBytes||(p=>{const g=p.subarray(1);return{x:n.fromBytes(g.subarray(0,n.BYTES)),y:n.fromBytes(g.subarray(n.BYTES,2*n.BYTES))}});function i(p){const{a:g,b:m}=t,v=n.sqr(p),y=n.mul(v,p);return n.add(n.add(y,n.mul(p,g)),m)}if(!n.eql(n.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function s(p){return"bigint"==typeof p&&tr<p&&p<t.n}function a(p){if(!s(p))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(p){const{allowedPrivateKeyLengths:g,nByteLength:m,wrapPrivateKey:v,n:y}=t;if(g&&"bigint"!=typeof p){if(p instanceof Uint8Array&&(p=ds(p)),"string"!=typeof p||!g.includes(p.length))throw new Error("Invalid key");p=p.padStart(2*m,"0")}let b;try{b="bigint"==typeof p?p:fn(Nt("private key",p,m))}catch{throw new Error(`private key must be ${m} bytes, hex or bigint, not ${typeof p}`)}return v&&(b=Ct(b,y)),a(b),b}const u=new Map;function l(p){if(!(p instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(g,m,v){if(this.px=g,this.py=m,this.pz=v,null==g||!n.isValid(g))throw new Error("x required");if(null==m||!n.isValid(m))throw new Error("y required");if(null==v||!n.isValid(v))throw new Error("z required")}static fromAffine(g){const{x:m,y:v}=g||{};if(!g||!n.isValid(m)||!n.isValid(v))throw new Error("invalid affine point");if(g instanceof d)throw new Error("projective point not allowed");const y=b=>n.eql(b,n.ZERO);return y(m)&&y(v)?d.ZERO:new d(m,v,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){const m=n.invertBatch(g.map(v=>v.pz));return g.map((v,y)=>v.toAffine(m[y])).map(d.fromAffine)}static fromHex(g){const m=d.fromAffine(o(Nt("pointHex",g)));return m.assertValidity(),m}static fromPrivateKey(g){return d.BASE.multiply(c(g))}_setWindowSize(g){this._WINDOW_SIZE=g,u.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:g,y:m}=this.toAffine();if(!n.isValid(g)||!n.isValid(m))throw new Error("bad point: x or y not FE");const v=n.sqr(m),y=i(g);if(!n.eql(v,y))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:g}=this.toAffine();if(n.isOdd)return!n.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){l(g);const{px:m,py:v,pz:y}=this,{px:b,py:E,pz:D}=g,C=n.eql(n.mul(m,D),n.mul(b,y)),M=n.eql(n.mul(v,D),n.mul(E,y));return C&&M}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:g,b:m}=t,v=n.mul(m,pl),{px:y,py:b,pz:E}=this;let D=n.ZERO,C=n.ZERO,M=n.ZERO,O=n.mul(y,y),R=n.mul(b,b),q=n.mul(E,E),P=n.mul(y,b);return P=n.add(P,P),M=n.mul(y,E),M=n.add(M,M),D=n.mul(g,M),C=n.mul(v,q),C=n.add(D,C),D=n.sub(R,C),C=n.add(R,C),C=n.mul(D,C),D=n.mul(P,D),M=n.mul(v,M),q=n.mul(g,q),P=n.sub(O,q),P=n.mul(g,P),P=n.add(P,M),M=n.add(O,O),O=n.add(M,O),O=n.add(O,q),O=n.mul(O,P),C=n.add(C,O),q=n.mul(b,E),q=n.add(q,q),O=n.mul(q,P),D=n.sub(D,O),M=n.mul(q,R),M=n.add(M,M),M=n.add(M,M),new d(D,C,M)}add(g){l(g);const{px:m,py:v,pz:y}=this,{px:b,py:E,pz:D}=g;let C=n.ZERO,M=n.ZERO,O=n.ZERO;const R=t.a,q=n.mul(t.b,pl);let P=n.mul(m,b),K=n.mul(v,E),se=n.mul(y,D),xe=n.add(m,v),I=n.add(b,E);xe=n.mul(xe,I),I=n.add(P,K),xe=n.sub(xe,I),I=n.add(m,y);let k=n.add(b,D);return I=n.mul(I,k),k=n.add(P,se),I=n.sub(I,k),k=n.add(v,y),C=n.add(E,D),k=n.mul(k,C),C=n.add(K,se),k=n.sub(k,C),O=n.mul(R,I),C=n.mul(q,se),O=n.add(C,O),C=n.sub(K,O),O=n.add(K,O),M=n.mul(C,O),K=n.add(P,P),K=n.add(K,P),se=n.mul(R,se),I=n.mul(q,I),K=n.add(K,se),se=n.sub(P,se),se=n.mul(R,se),I=n.add(I,se),P=n.mul(K,I),M=n.add(M,P),P=n.mul(k,I),C=n.mul(xe,C),C=n.sub(C,P),P=n.mul(xe,K),O=n.mul(k,O),O=n.add(O,P),new d(C,M,O)}subtract(g){return this.add(g.negate())}is0(){return this.equals(d.ZERO)}wNAF(g){return h.wNAFCached(this,u,g,m=>{const v=n.invertBatch(m.map(y=>y.pz));return m.map((y,b)=>y.toAffine(v[b])).map(d.fromAffine)})}multiplyUnsafe(g){const m=d.ZERO;if(g===tr)return m;if(a(g),g===lt)return this;const{endo:v}=t;if(!v)return h.unsafeLadder(this,g);let{k1neg:y,k1:b,k2neg:E,k2:D}=v.splitScalar(g),C=m,M=m,O=this;for(;b>tr||D>tr;)b&lt&&(C=C.add(O)),D&lt&&(M=M.add(O)),O=O.double(),b>>=lt,D>>=lt;return y&&(C=C.negate()),E&&(M=M.negate()),M=new d(n.mul(M.px,v.beta),M.py,M.pz),C.add(M)}multiply(g){a(g);let v,y,m=g;const{endo:b}=t;if(b){const{k1neg:E,k1:D,k2neg:C,k2:M}=b.splitScalar(m);let{p:O,f:R}=this.wNAF(D),{p:q,f:P}=this.wNAF(M);O=h.constTimeNegate(E,O),q=h.constTimeNegate(C,q),q=new d(n.mul(q.px,b.beta),q.py,q.pz),v=O.add(q),y=R.add(P)}else{const{p:E,f:D}=this.wNAF(m);v=E,y=D}return d.normalizeZ([v,y])[0]}multiplyAndAddUnsafe(g,m,v){const y=d.BASE,b=(D,C)=>C!==tr&&C!==lt&&D.equals(y)?D.multiply(C):D.multiplyUnsafe(C),E=b(this,m).add(b(g,v));return E.is0()?void 0:E}toAffine(g){const{px:m,py:v,pz:y}=this,b=this.is0();null==g&&(g=b?n.ONE:n.inv(y));const E=n.mul(m,g),D=n.mul(v,g),C=n.mul(y,g);if(b)return{x:n.ZERO,y:n.ZERO};if(!n.eql(C,n.ONE))throw new Error("invZ was invalid");return{x:E,y:D}}isTorsionFree(){const{h:g,isTorsionFree:m}=t;if(g===lt)return!0;if(m)return m(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:g,clearCofactor:m}=t;return g===lt?this:m?m(d,this):this.multiplyUnsafe(t.h)}toRawBytes(g=!0){return this.assertValidity(),r(d,this,g)}toHex(g=!0){return ds(this.toRawBytes(g))}}d.BASE=new d(t.Gx,t.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const f=t.nBitLength,h=function A8(e,t){const n=(o,i)=>{const s=i.negate();return o?s:i},r=o=>({windows:Math.ceil(t/o)+1,windowSize:2**(o-1)});return{constTimeNegate:n,unsafeLadder(o,i){let s=e.ZERO,a=o;for(;i>M8;)i&Kp&&(s=s.add(a)),a=a.double(),i>>=Kp;return s},precomputeWindow(o,i){const{windows:s,windowSize:a}=r(i),c=[];let u=o,l=u;for(let d=0;d<s;d++){l=u,c.push(l);for(let f=1;f<a;f++)l=l.add(u),c.push(l);u=l.double()}return c},wNAF(o,i,s){const{windows:a,windowSize:c}=r(o);let u=e.ZERO,l=e.BASE;const d=BigInt(2**o-1),f=2**o,h=BigInt(o);for(let p=0;p<a;p++){const g=p*c;let m=Number(s&d);s>>=h,m>c&&(m-=f,s+=Kp);const v=g,y=g+Math.abs(m)-1,E=m<0;0===m?l=l.add(n(p%2!=0,i[v])):u=u.add(n(E,i[y]))}return{p:u,f:l}},wNAFCached(o,i,s,a){const c=o._WINDOW_SIZE||1;let u=i.get(o);return u||(u=this.precomputeWindow(o,c),1!==c&&i.set(o,a(u))),this.wNAF(c,u,s)}}}(d,t.endo?Math.ceil(f/2):f);return{CURVE:t,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:s}}({...t,toBytes(I,k,Z){const ae=k.toAffine(),U=n.toBytes(ae.x),Ce=Go;return Z?Ce(Uint8Array.from([k.hasEvenY()?2:3]),U):Ce(Uint8Array.from([4]),U,n.toBytes(ae.y))},fromBytes(I){const k=I.length,Z=I[0],ae=I.subarray(1);if(k!==o||2!==Z&&3!==Z){if(k===i&&4===Z)return{x:n.fromBytes(ae.subarray(0,n.BYTES)),y:n.fromBytes(ae.subarray(n.BYTES,2*n.BYTES))};throw new Error(`Point of length ${k} was invalid. Expected ${o} compressed bytes or ${i} uncompressed bytes`)}{const U=fn(ae);if(!function s(I){return tr<I&&I<n.ORDER}(U))throw new Error("Point is not on curve");const Ce=d(U);let Pe=n.sqrt(Ce);return 1==(1&Z)!=((Pe&lt)===lt)&&(Pe=n.neg(Pe)),{x:U,y:Pe}}}}),h=I=>ds(go(I,t.nByteLength));function p(I){return I>r>>lt}const m=(I,k,Z)=>fn(I.slice(k,Z));class v{constructor(k,Z,ae){this.r=k,this.s=Z,this.recovery=ae,this.assertValidity()}static fromCompact(k){const Z=t.nByteLength;return k=Nt("compactSignature",k,2*Z),new v(m(k,0,Z),m(k,Z,2*Z))}static fromDER(k){const{r:Z,s:ae}=Wo.toSig(Nt("DER",k));return new v(Z,ae)}assertValidity(){if(!f(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!f(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(k){return new v(this.r,this.s,k)}recoverPublicKey(k){const{r:Z,s:ae,recovery:U}=this,Ce=M(Nt("msgHash",k));if(null==U||![0,1,2,3].includes(U))throw new Error("recovery id invalid");const Pe=2===U||3===U?Z+t.n:Z;if(Pe>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const It=u.fromHex((1&U?"03":"02")+h(Pe)),tn=c(Pe),Dn=a(-Ce*tn),jn=a(ae*tn),nn=u.BASE.multiplyAndAddUnsafe(It,Dn,jn);if(!nn)throw new Error("point at infinify");return nn.assertValidity(),nn}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new v(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return fs(this.toDERHex())}toDERHex(){return Wo.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return fs(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const y={isValidPrivateKey(I){try{return l(I),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const k=function T8(e,t,n=!1){const r=(e=Nt("privateHash",e)).length,o=Xp(t).nByteLength+8;if(o<24||r<o||r>1024)throw new Error(`hashToPrivateScalar: expected ${o}-1024 bytes of input, got ${r}`);return Ct(n?Zp(e):fn(e),t-rt)+rt}(t.randomBytes(n.BYTES+8),r);return go(k,t.nByteLength)},precompute:(I=8,k=u.BASE)=>(k._setWindowSize(I),k.multiply(BigInt(3)),k)};function E(I){const k=I instanceof Uint8Array,Z="string"==typeof I,ae=(k||Z)&&I.length;return k?ae===o||ae===i:Z?ae===2*o||ae===2*i:I instanceof u}const C=t.bits2int||function(I){const k=fn(I),Z=8*I.length-t.nBitLength;return Z>0?k>>BigInt(Z):k},M=t.bits2int_modN||function(I){return a(C(I))},O=Yp(t.nBitLength);function R(I){if("bigint"!=typeof I)throw new Error("bigint expected");if(!(tr<=I&&I<O))throw new Error(`bigint expected < 2^${t.nBitLength}`);return go(I,t.nByteLength)}const P={lowS:t.lowS,prehash:!1},K={lowS:t.lowS,prehash:!1};return u.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function b(I,k=!0){return u.fromPrivateKey(I).toRawBytes(k)},getSharedSecret:function D(I,k,Z=!0){if(E(I))throw new Error("first arg must be private key");if(!E(k))throw new Error("second arg must be public key");return u.fromHex(k).multiply(l(I)).toRawBytes(Z)},sign:function se(I,k,Z=P){const{seed:ae,k2sig:U}=function q(I,k,Z=P){if(["recovered","canonical"].some(hn=>hn in Z))throw new Error("sign() legacy options not supported");const{hash:ae,randomBytes:U}=t;let{lowS:Ce,prehash:Pe,extraEntropy:ke}=Z;null==Ce&&(Ce=!0),I=Nt("msgHash",I),Pe&&(I=Nt("prehashed msgHash",ae(I)));const It=M(I),tn=l(k),Dn=[R(tn),R(It)];if(null!=ke){const hn=!0===ke?U(n.BYTES):ke;Dn.push(Nt("extraEntropy",hn,n.BYTES))}const jn=Go(...Dn),nn=It;return{seed:jn,k2sig:function Dr(hn){const ms=C(hn);if(!f(ms))return;const nI=c(ms),Cr=u.BASE.multiply(ms).toAffine(),ys=a(Cr.x);if(ys===tr)return;const Bl=a(nI*a(nn+ys*tn));if(Bl===tr)return;let rI=(Cr.x===ys?0:2)|Number(Cr.y&lt),oI=Bl;return Ce&&p(Bl)&&(oI=function g(I){return p(I)?a(-I):I}(Bl),rI^=1),new v(ys,oI,rI)}}}(I,k,Z);return SC(t.hash.outputLen,t.nByteLength,t.hmac)(ae,U)},verify:function xe(I,k,Z,ae=K){const U=I;if(k=Nt("msgHash",k),Z=Nt("publicKey",Z),"strict"in ae)throw new Error("options.strict was renamed to lowS");const{lowS:Ce,prehash:Pe}=ae;let ke,It;try{if("string"==typeof U||U instanceof Uint8Array)try{ke=v.fromDER(U)}catch(Cr){if(!(Cr instanceof Wo.Err))throw Cr;ke=v.fromCompact(U)}else{if("object"!=typeof U||"bigint"!=typeof U.r||"bigint"!=typeof U.s)throw new Error("PARSE");{const{r:Cr,s:ys}=U;ke=new v(Cr,ys)}}It=u.fromHex(Z)}catch(Cr){if("PARSE"===Cr.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Ce&&ke.hasHighS())return!1;Pe&&(k=t.hash(k));const{r:tn,s:Dn}=ke,jn=M(k),nn=c(Dn),Dr=a(jn*nn),hn=a(tn*nn),ms=u.BASE.multiplyAndAddUnsafe(It,Dr,hn)?.toAffine();return!!ms&&a(ms.x)===tn},ProjectivePoint:u,Signature:v,utils:y}}BigInt(4);class RC extends wC{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,Bt.hash(t);const r=Vr(n);if(this.iHash=t.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,i=new Uint8Array(o);i.set(r.length>o?t.create().update(r).digest():r);for(let s=0;s<i.length;s++)i[s]^=54;this.iHash.update(i),this.oHash=t.create();for(let s=0;s<i.length;s++)i[s]^=106;this.oHash.update(i),i.fill(0)}update(t){return Bt.exists(this),this.iHash.update(t),this}digestInto(t){Bt.exists(this),Bt.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:o,destroyed:i,blockLen:s,outputLen:a}=this;return t.finished=o,t.destroyed=i,t.blockLen=s,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const zr=(e,t,n)=>new RC(e,t).update(n).digest();function V8(e){return{hash:e,hmac:(t,...n)=>zr(e,t,fo(...n)),randomBytes:qa}}zr.create=(e,t)=>new RC(e,t);const gl=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),ml=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),kC=BigInt(1),yl=BigInt(2),NC=(e,t)=>(e+t/yl)/t;function OC(e){const t=gl,n=BigInt(3),r=BigInt(6),o=BigInt(11),i=BigInt(22),s=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%t,l=u*u*e%t,d=Un(l,n,t)*l%t,f=Un(d,n,t)*l%t,h=Un(f,yl,t)*u%t,p=Un(h,o,t)*h%t,g=Un(p,i,t)*p%t,m=Un(g,a,t)*g%t,v=Un(m,c,t)*m%t,y=Un(v,a,t)*g%t,b=Un(y,n,t)*l%t,E=Un(b,s,t)*p%t,D=Un(E,r,t)*u%t,C=Un(D,yl,t);if(!tg.eql(tg.sqr(C),e))throw new Error("Cannot find square root");return C}const tg=function x8(e,t,n=!1,r={}){if(e<=Dt)throw new Error(`Expected Fp ORDER > 0, got ${e}`);const{nBitLength:o,nByteLength:i}=Xp(e,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=function _8(e){if(e%Jp===y8){const t=(e+rt)/Jp;return function(r,o){const i=r.pow(o,t);if(!r.eql(r.sqr(i),o))throw new Error("Cannot find square root");return i}}if(e%xC===IC){const t=(e-IC)/xC;return function(r,o){const i=r.mul(o,mo),s=r.pow(i,t),a=r.mul(o,s),c=r.mul(r.mul(a,mo),s),u=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(u),o))throw new Error("Cannot find square root");return u}}return function E8(e){const t=(e-rt)/mo;let n,r,o;for(n=e-rt,r=0;n%mo===Dt;n/=mo,r++);for(o=mo;o<e&&b8(o,t,e)!==e-rt;o++);if(1===r){const s=(e+rt)/Jp;return function(c,u){const l=c.pow(u,s);if(!c.eql(c.sqr(l),u))throw new Error("Cannot find square root");return l}}const i=(n+rt)/mo;return function(a,c){if(a.pow(c,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=r,l=a.pow(a.mul(a.ONE,o),n),d=a.pow(c,i),f=a.pow(c,n);for(;!a.eql(f,a.ONE);){if(a.eql(f,a.ZERO))return a.ZERO;let h=1;for(let g=a.sqr(f);h<u&&!a.eql(g,a.ONE);h++)g=a.sqr(g);const p=a.pow(l,rt<<BigInt(u-h-1));l=a.sqr(p),d=a.mul(d,p),f=a.mul(f,l),u=h}return d}}(e)}(e),a=Object.freeze({ORDER:e,BITS:o,BYTES:i,MASK:Yp(o),ZERO:Dt,ONE:rt,create:c=>Ct(c,e),isValid:c=>{if("bigint"!=typeof c)throw new Error("Invalid field element: expected bigint, got "+typeof c);return Dt<=c&&c<e},is0:c=>c===Dt,isOdd:c=>(c&rt)===rt,neg:c=>Ct(-c,e),eql:(c,u)=>c===u,sqr:c=>Ct(c*c,e),add:(c,u)=>Ct(c+u,e),sub:(c,u)=>Ct(c-u,e),mul:(c,u)=>Ct(c*u,e),pow:(c,u)=>function S8(e,t,n){if(n<Dt)throw new Error("Expected power > 0");if(n===Dt)return e.ONE;if(n===rt)return t;let r=e.ONE,o=t;for(;n>Dt;)n&rt&&(r=e.mul(r,o)),o=e.sqr(o),n>>=rt;return r}(a,c,u),div:(c,u)=>Ct(c*hl(u,e),e),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>hl(c,e),sqrt:r.sqrt||(c=>s(a,c)),invertBatch:c=>function I8(e,t){const n=new Array(t.length),r=t.reduce((i,s,a)=>e.is0(s)?i:(n[a]=i,e.mul(i,s)),e.ONE),o=e.inv(r);return t.reduceRight((i,s,a)=>e.is0(s)?i:(n[a]=e.mul(i,n[a]),e.mul(i,s)),o),n}(a,c),cmov:(c,u,l)=>l?u:c,toBytes:c=>n?DC(c,i):go(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return n?Zp(c):fn(c)}});return Object.freeze(a)}(gl,void 0,void 0,{sqrt:OC}),Kt=function z8(e,t){const n=r=>L8({...e,...V8(r)});return Object.freeze({...n(t),create:n})}({a:BigInt(0),b:BigInt(7),Fp:tg,n:ml,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=ml,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-kC*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,s=BigInt("0x100000000000000000000000000000000"),a=NC(i*e,t),c=NC(-r*e,t);let u=Ct(e-a*n-c*o,t),l=Ct(-a*r-c*i,t);const d=u>s,f=l>s;if(d&&(u=t-u),f&&(l=t-l),u>s||l>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:d,k1:u,k2neg:f,k2:l}}}},Fn),vl=BigInt(0),PC=e=>"bigint"==typeof e&&vl<e&&e<gl,q8=e=>"bigint"==typeof e&&vl<e&&e<ml,LC={};function wl(e,...t){let n=LC[e];if(void 0===n){const r=Fn(Uint8Array.from(e,o=>o.charCodeAt(0)));n=Go(r,r),LC[e]=n}return Fn(Go(n,...t))}const ng=e=>e.toRawBytes(!0).slice(1),rg=e=>go(e,32),og=e=>Ct(e,gl),Za=e=>Ct(e,ml),ig=Kt.ProjectivePoint,G8=(e,t,n)=>ig.BASE.multiplyAndAddUnsafe(e,t,n);function sg(e){let t=Kt.utils.normPrivateKeyToScalar(e),n=ig.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:Za(-t),bytes:ng(n)}}function FC(e){if(!PC(e))throw new Error("bad x: need 0 < x < p");const t=og(e*e);let r=OC(og(t*e+BigInt(7)));r%yl!==vl&&(r=og(-r));const o=new ig(e,r,kC);return o.assertValidity(),o}function UC(...e){return Za(fn(wl("BIP0340/challenge",...e)))}function W8(e){return sg(e).bytes}function Z8(e,t,n=qa(32)){const r=Nt("message",e),{bytes:o,scalar:i}=sg(t),s=Nt("auxRand",n,32),a=rg(i^fn(wl("BIP0340/aux",s))),c=wl("BIP0340/nonce",a,o,r),u=Za(fn(c));if(u===vl)throw new Error("sign failed: k is zero");const{bytes:l,scalar:d}=sg(u),f=UC(l,o,r),h=new Uint8Array(64);if(h.set(l,0),h.set(rg(Za(d+f*i)),32),!BC(h,r,o))throw new Error("sign: Invalid signature produced");return h}function BC(e,t,n){const r=Nt("signature",e,64),o=Nt("message",t),i=Nt("publicKey",n,32);try{const s=FC(fn(i)),a=fn(r.subarray(0,32));if(!PC(a))return!1;const c=fn(r.subarray(32,64));if(!q8(c))return!1;const u=UC(rg(a),ng(s),o),l=G8(s,c,Za(-u));return!(!l||!l.hasEvenY()||l.toAffine().x!==a)}catch{return!1}}const hs=(()=>({getPublicKey:W8,sign:Z8,verify:BC,utils:{randomPrivateKey:Kt.utils.randomPrivateKey,lift_x:FC,pointToBytes:ng,numberToBytesBE:go,bytesToNumberBE:fn,taggedHash:wl,mod:Ct}}))();function Zo(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function nr(...e){const t=(o,i)=>s=>o(i(s));return{encode:Array.from(e).reverse().reduce((o,i)=>o?t(o,i.encode):i.encode,void 0),decode:e.reduce((o,i)=>o?t(o,i.decode):i.decode,void 0)}}function wr(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map(n=>{if(Zo(n),n<0||n>=e.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${e.length})`);return e[n]})},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map(n=>{if("string"!=typeof n)throw new Error(`alphabet.decode: not string element=${n}`);const r=e.indexOf(n);if(-1===r)throw new Error(`Unknown letter: "${n}". Allowed: ${e}`);return r})}}}function br(e=""){if("string"!=typeof e)throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("join.encode input should be array of strings");for(let n of t)if("string"!=typeof n)throw new Error(`join.encode: non-string input=${n}`);return t.join(e)},decode:t=>{if("string"!=typeof t)throw new Error("join.decode input should be string");return t.split(e)}}}function Ya(e,t="="){if(Zo(e),"string"!=typeof t)throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&"string"!=typeof n[0])throw new Error("padding.encode input should be array of strings");for(let r of n)if("string"!=typeof r)throw new Error(`padding.encode: non-string input=${r}`);for(;n.length*e%8;)n.push(t);return n},decode(n){if(!Array.isArray(n)||n.length&&"string"!=typeof n[0])throw new Error("padding.encode input should be array of strings");for(let o of n)if("string"!=typeof o)throw new Error(`padding.decode: non-string input=${o}`);let r=n.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function jC(e){if("function"!=typeof e)throw new Error("normalize fn should be function");return{encode:t=>t,decode:t=>e(t)}}function $C(e,t,n){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let r=0;const o=[],i=Array.from(e);for(i.forEach(s=>{if(Zo(s),s<0||s>=t)throw new Error(`Wrong integer: ${s}`)});;){let s=0,a=!0;for(let c=r;c<i.length;c++){const u=i[c],l=t*s+u;if(!Number.isSafeInteger(l)||t*s/t!==s||l-u!=t*s)throw new Error("convertRadix: carry overflow");if(s=l%n,i[c]=Math.floor(l/n),!Number.isSafeInteger(i[c])||i[c]*n+s!==l)throw new Error("convertRadix: carry overflow");a&&(i[c]?a=!1:r=c)}if(o.push(s),a)break}for(let s=0;s<e.length-1&&0===e[s];s++)o.push(0);return o.reverse()}const HC=(e,t)=>t?HC(t,e%t):e,bl=(e,t)=>e+(t-HC(e,t));function ag(e,t,n,r){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(bl(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${bl(t,n)}`);let o=0,i=0;const s=2**n-1,a=[];for(const c of e){if(Zo(c),c>=2**t)throw new Error(`convertRadix2: invalid data word=${c} from=${t}`);if(o=o<<t|c,i+t>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${t}`);for(i+=t;i>=n;i-=n)a.push((o>>i-n&s)>>>0);o&=2**i-1}if(o=o<<n-i&s,!r&&i>=t)throw new Error("Excess padding");if(!r&&o)throw new Error(`Non-zero padding: ${o}`);return r&&i>0&&a.push(o>>>0),a}function VC(e){return Zo(e),{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return $C(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("radix.decode input should be array of strings");return Uint8Array.from($C(t,e,256))}}}function qr(e,t=!1){if(Zo(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(bl(8,e)>32||bl(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return ag(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&"number"!=typeof n[0])throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(ag(n,e,8,t))}}}function zC(e){if("function"!=typeof e)throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch{}}}function qC(e,t){if(Zo(e),"function"!=typeof t)throw new Error("checksum fn should be function");return{encode(n){if(!(n instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const r=t(n).slice(0,e),o=new Uint8Array(n.length+e);return o.set(n),o.set(r,n.length),o},decode(n){if(!(n instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const r=n.slice(0,-e),o=t(r).slice(0,e),i=n.slice(-e);for(let s=0;s<e;s++)if(o[s]!==i[s])throw new Error("Invalid checksum");return r}}}const El={alphabet:wr,chain:nr,checksum:qC,radix:VC,radix2:qr,join:br,padding:Ya},Gr=(nr(qr(4),wr("0123456789ABCDEF"),br("")),nr(qr(5),wr("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Ya(5),br("")),nr(qr(5),wr("0123456789ABCDEFGHIJKLMNOPQRSTUV"),Ya(5),br("")),nr(qr(5),wr("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),br(""),jC(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),nr(qr(6),wr("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Ya(6),br(""))),cg=(nr(qr(6),wr("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Ya(6),br("")),e=>nr(VC(58),wr(e),br(""))),_l=cg("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),ug=(cg("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),cg("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz"),nr(wr("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),br(""))),WC=[996825010,642813549,513874426,1027748829,705979059];function Qa(e){const t=e>>25;let n=(33554431&e)<<5;for(let r=0;r<WC.length;r++)1==(t>>r&1)&&(n^=WC[r]);return n}function ZC(e,t,n=1){const r=e.length;let o=1;for(let i=0;i<r;i++){const s=e.charCodeAt(i);if(s<33||s>126)throw new Error(`Invalid prefix (${e})`);o=Qa(o)^s>>5}o=Qa(o);for(let i=0;i<r;i++)o=Qa(o)^31&e.charCodeAt(i);for(let i of t)o=Qa(o)^i;for(let i=0;i<6;i++)o=Qa(o);return o^=n,ug.encode(ag([o%2**30],30,5,!1))}function YC(e){const t="bech32"===e?1:734539939,n=qr(5),r=n.decode,o=n.encode,i=zC(r);function a(l,d=90){if("string"!=typeof l)throw new Error("bech32.decode input should be string, not "+typeof l);if(l.length<8||!1!==d&&l.length>d)throw new TypeError(`Wrong string length: ${l.length} (${l}). Expected (8..${d})`);const f=l.toLowerCase();if(l!==f&&l!==l.toUpperCase())throw new Error("String must be lowercase or uppercase");const h=(l=f).lastIndexOf("1");if(0===h||-1===h)throw new Error('Letter "1" must be present between prefix and data only');const p=l.slice(0,h),g=l.slice(h+1);if(g.length<6)throw new Error("Data must be at least 6 characters long");const m=ug.decode(g).slice(0,-6),v=ZC(p,m,t);if(!g.endsWith(v))throw new Error(`Invalid checksum in ${l}: expected "${v}"`);return{prefix:p,words:m}}return{encode:function s(l,d,f=90){if("string"!=typeof l)throw new Error("bech32.encode prefix should be string, not "+typeof l);if(!Array.isArray(d)||d.length&&"number"!=typeof d[0])throw new Error("bech32.encode words should be array of numbers, not "+typeof d);const h=l.length+7+d.length;if(!1!==f&&h>f)throw new TypeError(`Length ${h} exceeds limit ${f}`);return`${l=l.toLowerCase()}1${ug.encode(d)}${ZC(l,d,t)}`},decode:a,decodeToBytes:function u(l){const{prefix:d,words:f}=a(l,!1);return{prefix:d,words:f,bytes:r(f)}},decodeUnsafe:zC(a),fromWords:r,fromWordsUnsafe:i,toWords:o}}const wo=YC("bech32"),JC=(YC("bech32m"),nr(qr(4),wr("0123456789abcdef"),br(""),jC(e=>{if("string"!=typeof e||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})),"abandon\nability\nable\nabout\nabove\nabsent\nabsorb\nabstract\nabsurd\nabuse\naccess\naccident\naccount\naccuse\nachieve\nacid\nacoustic\nacquire\nacross\nact\naction\nactor\nactress\nactual\nadapt\nadd\naddict\naddress\nadjust\nadmit\nadult\nadvance\nadvice\naerobic\naffair\nafford\nafraid\nagain\nage\nagent\nagree\nahead\naim\nair\nairport\naisle\nalarm\nalbum\nalcohol\nalert\nalien\nall\nalley\nallow\nalmost\nalone\nalpha\nalready\nalso\nalter\nalways\namateur\namazing\namong\namount\namused\nanalyst\nanchor\nancient\nanger\nangle\nangry\nanimal\nankle\nannounce\nannual\nanother\nanswer\nantenna\nantique\nanxiety\nany\napart\napology\nappear\napple\napprove\napril\narch\narctic\narea\narena\nargue\narm\narmed\narmor\narmy\naround\narrange\narrest\narrive\narrow\nart\nartefact\nartist\nartwork\nask\naspect\nassault\nasset\nassist\nassume\nasthma\nathlete\natom\nattack\nattend\nattitude\nattract\nauction\naudit\naugust\naunt\nauthor\nauto\nautumn\naverage\navocado\navoid\nawake\naware\naway\nawesome\nawful\nawkward\naxis\nbaby\nbachelor\nbacon\nbadge\nbag\nbalance\nbalcony\nball\nbamboo\nbanana\nbanner\nbar\nbarely\nbargain\nbarrel\nbase\nbasic\nbasket\nbattle\nbeach\nbean\nbeauty\nbecause\nbecome\nbeef\nbefore\nbegin\nbehave\nbehind\nbelieve\nbelow\nbelt\nbench\nbenefit\nbest\nbetray\nbetter\nbetween\nbeyond\nbicycle\nbid\nbike\nbind\nbiology\nbird\nbirth\nbitter\nblack\nblade\nblame\nblanket\nblast\nbleak\nbless\nblind\nblood\nblossom\nblouse\nblue\nblur\nblush\nboard\nboat\nbody\nboil\nbomb\nbone\nbonus\nbook\nboost\nborder\nboring\nborrow\nboss\nbottom\nbounce\nbox\nboy\nbracket\nbrain\nbrand\nbrass\nbrave\nbread\nbreeze\nbrick\nbridge\nbrief\nbright\nbring\nbrisk\nbroccoli\nbroken\nbronze\nbroom\nbrother\nbrown\nbrush\nbubble\nbuddy\nbudget\nbuffalo\nbuild\nbulb\nbulk\nbullet\nbundle\nbunker\nburden\nburger\nburst\nbus\nbusiness\nbusy\nbutter\nbuyer\nbuzz\ncabbage\ncabin\ncable\ncactus\ncage\ncake\ncall\ncalm\ncamera\ncamp\ncan\ncanal\ncancel\ncandy\ncannon\ncanoe\ncanvas\ncanyon\ncapable\ncapital\ncaptain\ncar\ncarbon\ncard\ncargo\ncarpet\ncarry\ncart\ncase\ncash\ncasino\ncastle\ncasual\ncat\ncatalog\ncatch\ncategory\ncattle\ncaught\ncause\ncaution\ncave\nceiling\ncelery\ncement\ncensus\ncentury\ncereal\ncertain\nchair\nchalk\nchampion\nchange\nchaos\nchapter\ncharge\nchase\nchat\ncheap\ncheck\ncheese\nchef\ncherry\nchest\nchicken\nchief\nchild\nchimney\nchoice\nchoose\nchronic\nchuckle\nchunk\nchurn\ncigar\ncinnamon\ncircle\ncitizen\ncity\ncivil\nclaim\nclap\nclarify\nclaw\nclay\nclean\nclerk\nclever\nclick\nclient\ncliff\nclimb\nclinic\nclip\nclock\nclog\nclose\ncloth\ncloud\nclown\nclub\nclump\ncluster\nclutch\ncoach\ncoast\ncoconut\ncode\ncoffee\ncoil\ncoin\ncollect\ncolor\ncolumn\ncombine\ncome\ncomfort\ncomic\ncommon\ncompany\nconcert\nconduct\nconfirm\ncongress\nconnect\nconsider\ncontrol\nconvince\ncook\ncool\ncopper\ncopy\ncoral\ncore\ncorn\ncorrect\ncost\ncotton\ncouch\ncountry\ncouple\ncourse\ncousin\ncover\ncoyote\ncrack\ncradle\ncraft\ncram\ncrane\ncrash\ncrater\ncrawl\ncrazy\ncream\ncredit\ncreek\ncrew\ncricket\ncrime\ncrisp\ncritic\ncrop\ncross\ncrouch\ncrowd\ncrucial\ncruel\ncruise\ncrumble\ncrunch\ncrush\ncry\ncrystal\ncube\nculture\ncup\ncupboard\ncurious\ncurrent\ncurtain\ncurve\ncushion\ncustom\ncute\ncycle\ndad\ndamage\ndamp\ndance\ndanger\ndaring\ndash\ndaughter\ndawn\nday\ndeal\ndebate\ndebris\ndecade\ndecember\ndecide\ndecline\ndecorate\ndecrease\ndeer\ndefense\ndefine\ndefy\ndegree\ndelay\ndeliver\ndemand\ndemise\ndenial\ndentist\ndeny\ndepart\ndepend\ndeposit\ndepth\ndeputy\nderive\ndescribe\ndesert\ndesign\ndesk\ndespair\ndestroy\ndetail\ndetect\ndevelop\ndevice\ndevote\ndiagram\ndial\ndiamond\ndiary\ndice\ndiesel\ndiet\ndiffer\ndigital\ndignity\ndilemma\ndinner\ndinosaur\ndirect\ndirt\ndisagree\ndiscover\ndisease\ndish\ndismiss\ndisorder\ndisplay\ndistance\ndivert\ndivide\ndivorce\ndizzy\ndoctor\ndocument\ndog\ndoll\ndolphin\ndomain\ndonate\ndonkey\ndonor\ndoor\ndose\ndouble\ndove\ndraft\ndragon\ndrama\ndrastic\ndraw\ndream\ndress\ndrift\ndrill\ndrink\ndrip\ndrive\ndrop\ndrum\ndry\nduck\ndumb\ndune\nduring\ndust\ndutch\nduty\ndwarf\ndynamic\neager\neagle\nearly\nearn\nearth\neasily\neast\neasy\necho\necology\neconomy\nedge\nedit\neducate\neffort\negg\neight\neither\nelbow\nelder\nelectric\nelegant\nelement\nelephant\nelevator\nelite\nelse\nembark\nembody\nembrace\nemerge\nemotion\nemploy\nempower\nempty\nenable\nenact\nend\nendless\nendorse\nenemy\nenergy\nenforce\nengage\nengine\nenhance\nenjoy\nenlist\nenough\nenrich\nenroll\nensure\nenter\nentire\nentry\nenvelope\nepisode\nequal\nequip\nera\nerase\nerode\nerosion\nerror\nerupt\nescape\nessay\nessence\nestate\neternal\nethics\nevidence\nevil\nevoke\nevolve\nexact\nexample\nexcess\nexchange\nexcite\nexclude\nexcuse\nexecute\nexercise\nexhaust\nexhibit\nexile\nexist\nexit\nexotic\nexpand\nexpect\nexpire\nexplain\nexpose\nexpress\nextend\nextra\neye\neyebrow\nfabric\nface\nfaculty\nfade\nfaint\nfaith\nfall\nfalse\nfame\nfamily\nfamous\nfan\nfancy\nfantasy\nfarm\nfashion\nfat\nfatal\nfather\nfatigue\nfault\nfavorite\nfeature\nfebruary\nfederal\nfee\nfeed\nfeel\nfemale\nfence\nfestival\nfetch\nfever\nfew\nfiber\nfiction\nfield\nfigure\nfile\nfilm\nfilter\nfinal\nfind\nfine\nfinger\nfinish\nfire\nfirm\nfirst\nfiscal\nfish\nfit\nfitness\nfix\nflag\nflame\nflash\nflat\nflavor\nflee\nflight\nflip\nfloat\nflock\nfloor\nflower\nfluid\nflush\nfly\nfoam\nfocus\nfog\nfoil\nfold\nfollow\nfood\nfoot\nforce\nforest\nforget\nfork\nfortune\nforum\nforward\nfossil\nfoster\nfound\nfox\nfragile\nframe\nfrequent\nfresh\nfriend\nfringe\nfrog\nfront\nfrost\nfrown\nfrozen\nfruit\nfuel\nfun\nfunny\nfurnace\nfury\nfuture\ngadget\ngain\ngalaxy\ngallery\ngame\ngap\ngarage\ngarbage\ngarden\ngarlic\ngarment\ngas\ngasp\ngate\ngather\ngauge\ngaze\ngeneral\ngenius\ngenre\ngentle\ngenuine\ngesture\nghost\ngiant\ngift\ngiggle\nginger\ngiraffe\ngirl\ngive\nglad\nglance\nglare\nglass\nglide\nglimpse\nglobe\ngloom\nglory\nglove\nglow\nglue\ngoat\ngoddess\ngold\ngood\ngoose\ngorilla\ngospel\ngossip\ngovern\ngown\ngrab\ngrace\ngrain\ngrant\ngrape\ngrass\ngravity\ngreat\ngreen\ngrid\ngrief\ngrit\ngrocery\ngroup\ngrow\ngrunt\nguard\nguess\nguide\nguilt\nguitar\ngun\ngym\nhabit\nhair\nhalf\nhammer\nhamster\nhand\nhappy\nharbor\nhard\nharsh\nharvest\nhat\nhave\nhawk\nhazard\nhead\nhealth\nheart\nheavy\nhedgehog\nheight\nhello\nhelmet\nhelp\nhen\nhero\nhidden\nhigh\nhill\nhint\nhip\nhire\nhistory\nhobby\nhockey\nhold\nhole\nholiday\nhollow\nhome\nhoney\nhood\nhope\nhorn\nhorror\nhorse\nhospital\nhost\nhotel\nhour\nhover\nhub\nhuge\nhuman\nhumble\nhumor\nhundred\nhungry\nhunt\nhurdle\nhurry\nhurt\nhusband\nhybrid\nice\nicon\nidea\nidentify\nidle\nignore\nill\nillegal\nillness\nimage\nimitate\nimmense\nimmune\nimpact\nimpose\nimprove\nimpulse\ninch\ninclude\nincome\nincrease\nindex\nindicate\nindoor\nindustry\ninfant\ninflict\ninform\ninhale\ninherit\ninitial\ninject\ninjury\ninmate\ninner\ninnocent\ninput\ninquiry\ninsane\ninsect\ninside\ninspire\ninstall\nintact\ninterest\ninto\ninvest\ninvite\ninvolve\niron\nisland\nisolate\nissue\nitem\nivory\njacket\njaguar\njar\njazz\njealous\njeans\njelly\njewel\njob\njoin\njoke\njourney\njoy\njudge\njuice\njump\njungle\njunior\njunk\njust\nkangaroo\nkeen\nkeep\nketchup\nkey\nkick\nkid\nkidney\nkind\nkingdom\nkiss\nkit\nkitchen\nkite\nkitten\nkiwi\nknee\nknife\nknock\nknow\nlab\nlabel\nlabor\nladder\nlady\nlake\nlamp\nlanguage\nlaptop\nlarge\nlater\nlatin\nlaugh\nlaundry\nlava\nlaw\nlawn\nlawsuit\nlayer\nlazy\nleader\nleaf\nlearn\nleave\nlecture\nleft\nleg\nlegal\nlegend\nleisure\nlemon\nlend\nlength\nlens\nleopard\nlesson\nletter\nlevel\nliar\nliberty\nlibrary\nlicense\nlife\nlift\nlight\nlike\nlimb\nlimit\nlink\nlion\nliquid\nlist\nlittle\nlive\nlizard\nload\nloan\nlobster\nlocal\nlock\nlogic\nlonely\nlong\nloop\nlottery\nloud\nlounge\nlove\nloyal\nlucky\nluggage\nlumber\nlunar\nlunch\nluxury\nlyrics\nmachine\nmad\nmagic\nmagnet\nmaid\nmail\nmain\nmajor\nmake\nmammal\nman\nmanage\nmandate\nmango\nmansion\nmanual\nmaple\nmarble\nmarch\nmargin\nmarine\nmarket\nmarriage\nmask\nmass\nmaster\nmatch\nmaterial\nmath\nmatrix\nmatter\nmaximum\nmaze\nmeadow\nmean\nmeasure\nmeat\nmechanic\nmedal\nmedia\nmelody\nmelt\nmember\nmemory\nmention\nmenu\nmercy\nmerge\nmerit\nmerry\nmesh\nmessage\nmetal\nmethod\nmiddle\nmidnight\nmilk\nmillion\nmimic\nmind\nminimum\nminor\nminute\nmiracle\nmirror\nmisery\nmiss\nmistake\nmix\nmixed\nmixture\nmobile\nmodel\nmodify\nmom\nmoment\nmonitor\nmonkey\nmonster\nmonth\nmoon\nmoral\nmore\nmorning\nmosquito\nmother\nmotion\nmotor\nmountain\nmouse\nmove\nmovie\nmuch\nmuffin\nmule\nmultiply\nmuscle\nmuseum\nmushroom\nmusic\nmust\nmutual\nmyself\nmystery\nmyth\nnaive\nname\nnapkin\nnarrow\nnasty\nnation\nnature\nnear\nneck\nneed\nnegative\nneglect\nneither\nnephew\nnerve\nnest\nnet\nnetwork\nneutral\nnever\nnews\nnext\nnice\nnight\nnoble\nnoise\nnominee\nnoodle\nnormal\nnorth\nnose\nnotable\nnote\nnothing\nnotice\nnovel\nnow\nnuclear\nnumber\nnurse\nnut\noak\nobey\nobject\noblige\nobscure\nobserve\nobtain\nobvious\noccur\nocean\noctober\nodor\noff\noffer\noffice\noften\noil\nokay\nold\nolive\nolympic\nomit\nonce\none\nonion\nonline\nonly\nopen\nopera\nopinion\noppose\noption\norange\norbit\norchard\norder\nordinary\norgan\norient\noriginal\norphan\nostrich\nother\noutdoor\nouter\noutput\noutside\noval\noven\nover\nown\nowner\noxygen\noyster\nozone\npact\npaddle\npage\npair\npalace\npalm\npanda\npanel\npanic\npanther\npaper\nparade\nparent\npark\nparrot\nparty\npass\npatch\npath\npatient\npatrol\npattern\npause\npave\npayment\npeace\npeanut\npear\npeasant\npelican\npen\npenalty\npencil\npeople\npepper\nperfect\npermit\nperson\npet\nphone\nphoto\nphrase\nphysical\npiano\npicnic\npicture\npiece\npig\npigeon\npill\npilot\npink\npioneer\npipe\npistol\npitch\npizza\nplace\nplanet\nplastic\nplate\nplay\nplease\npledge\npluck\nplug\nplunge\npoem\npoet\npoint\npolar\npole\npolice\npond\npony\npool\npopular\nportion\nposition\npossible\npost\npotato\npottery\npoverty\npowder\npower\npractice\npraise\npredict\nprefer\nprepare\npresent\npretty\nprevent\nprice\npride\nprimary\nprint\npriority\nprison\nprivate\nprize\nproblem\nprocess\nproduce\nprofit\nprogram\nproject\npromote\nproof\nproperty\nprosper\nprotect\nproud\nprovide\npublic\npudding\npull\npulp\npulse\npumpkin\npunch\npupil\npuppy\npurchase\npurity\npurpose\npurse\npush\nput\npuzzle\npyramid\nquality\nquantum\nquarter\nquestion\nquick\nquit\nquiz\nquote\nrabbit\nraccoon\nrace\nrack\nradar\nradio\nrail\nrain\nraise\nrally\nramp\nranch\nrandom\nrange\nrapid\nrare\nrate\nrather\nraven\nraw\nrazor\nready\nreal\nreason\nrebel\nrebuild\nrecall\nreceive\nrecipe\nrecord\nrecycle\nreduce\nreflect\nreform\nrefuse\nregion\nregret\nregular\nreject\nrelax\nrelease\nrelief\nrely\nremain\nremember\nremind\nremove\nrender\nrenew\nrent\nreopen\nrepair\nrepeat\nreplace\nreport\nrequire\nrescue\nresemble\nresist\nresource\nresponse\nresult\nretire\nretreat\nreturn\nreunion\nreveal\nreview\nreward\nrhythm\nrib\nribbon\nrice\nrich\nride\nridge\nrifle\nright\nrigid\nring\nriot\nripple\nrisk\nritual\nrival\nriver\nroad\nroast\nrobot\nrobust\nrocket\nromance\nroof\nrookie\nroom\nrose\nrotate\nrough\nround\nroute\nroyal\nrubber\nrude\nrug\nrule\nrun\nrunway\nrural\nsad\nsaddle\nsadness\nsafe\nsail\nsalad\nsalmon\nsalon\nsalt\nsalute\nsame\nsample\nsand\nsatisfy\nsatoshi\nsauce\nsausage\nsave\nsay\nscale\nscan\nscare\nscatter\nscene\nscheme\nschool\nscience\nscissors\nscorpion\nscout\nscrap\nscreen\nscript\nscrub\nsea\nsearch\nseason\nseat\nsecond\nsecret\nsection\nsecurity\nseed\nseek\nsegment\nselect\nsell\nseminar\nsenior\nsense\nsentence\nseries\nservice\nsession\nsettle\nsetup\nseven\nshadow\nshaft\nshallow\nshare\nshed\nshell\nsheriff\nshield\nshift\nshine\nship\nshiver\nshock\nshoe\nshoot\nshop\nshort\nshoulder\nshove\nshrimp\nshrug\nshuffle\nshy\nsibling\nsick\nside\nsiege\nsight\nsign\nsilent\nsilk\nsilly\nsilver\nsimilar\nsimple\nsince\nsing\nsiren\nsister\nsituate\nsix\nsize\nskate\nsketch\nski\nskill\nskin\nskirt\nskull\nslab\nslam\nsleep\nslender\nslice\nslide\nslight\nslim\nslogan\nslot\nslow\nslush\nsmall\nsmart\nsmile\nsmoke\nsmooth\nsnack\nsnake\nsnap\nsniff\nsnow\nsoap\nsoccer\nsocial\nsock\nsoda\nsoft\nsolar\nsoldier\nsolid\nsolution\nsolve\nsomeone\nsong\nsoon\nsorry\nsort\nsoul\nsound\nsoup\nsource\nsouth\nspace\nspare\nspatial\nspawn\nspeak\nspecial\nspeed\nspell\nspend\nsphere\nspice\nspider\nspike\nspin\nspirit\nsplit\nspoil\nsponsor\nspoon\nsport\nspot\nspray\nspread\nspring\nspy\nsquare\nsqueeze\nsquirrel\nstable\nstadium\nstaff\nstage\nstairs\nstamp\nstand\nstart\nstate\nstay\nsteak\nsteel\nstem\nstep\nstereo\nstick\nstill\nsting\nstock\nstomach\nstone\nstool\nstory\nstove\nstrategy\nstreet\nstrike\nstrong\nstruggle\nstudent\nstuff\nstumble\nstyle\nsubject\nsubmit\nsubway\nsuccess\nsuch\nsudden\nsuffer\nsugar\nsuggest\nsuit\nsummer\nsun\nsunny\nsunset\nsuper\nsupply\nsupreme\nsure\nsurface\nsurge\nsurprise\nsurround\nsurvey\nsuspect\nsustain\nswallow\nswamp\nswap\nswarm\nswear\nsweet\nswift\nswim\nswing\nswitch\nsword\nsymbol\nsymptom\nsyrup\nsystem\ntable\ntackle\ntag\ntail\ntalent\ntalk\ntank\ntape\ntarget\ntask\ntaste\ntattoo\ntaxi\nteach\nteam\ntell\nten\ntenant\ntennis\ntent\nterm\ntest\ntext\nthank\nthat\ntheme\nthen\ntheory\nthere\nthey\nthing\nthis\nthought\nthree\nthrive\nthrow\nthumb\nthunder\nticket\ntide\ntiger\ntilt\ntimber\ntime\ntiny\ntip\ntired\ntissue\ntitle\ntoast\ntobacco\ntoday\ntoddler\ntoe\ntogether\ntoilet\ntoken\ntomato\ntomorrow\ntone\ntongue\ntonight\ntool\ntooth\ntop\ntopic\ntopple\ntorch\ntornado\ntortoise\ntoss\ntotal\ntourist\ntoward\ntower\ntown\ntoy\ntrack\ntrade\ntraffic\ntragic\ntrain\ntransfer\ntrap\ntrash\ntravel\ntray\ntreat\ntree\ntrend\ntrial\ntribe\ntrick\ntrigger\ntrim\ntrip\ntrophy\ntrouble\ntruck\ntrue\ntruly\ntrumpet\ntrust\ntruth\ntry\ntube\ntuition\ntumble\ntuna\ntunnel\nturkey\nturn\nturtle\ntwelve\ntwenty\ntwice\ntwin\ntwist\ntwo\ntype\ntypical\nugly\numbrella\nunable\nunaware\nuncle\nuncover\nunder\nundo\nunfair\nunfold\nunhappy\nuniform\nunique\nunit\nuniverse\nunknown\nunlock\nuntil\nunusual\nunveil\nupdate\nupgrade\nuphold\nupon\nupper\nupset\nurban\nurge\nusage\nuse\nused\nuseful\nuseless\nusual\nutility\nvacant\nvacuum\nvague\nvalid\nvalley\nvalve\nvan\nvanish\nvapor\nvarious\nvast\nvault\nvehicle\nvelvet\nvendor\nventure\nvenue\nverb\nverify\nversion\nvery\nvessel\nveteran\nviable\nvibrant\nvicious\nvictory\nvideo\nview\nvillage\nvintage\nviolin\nvirtual\nvirus\nvisa\nvisit\nvisual\nvital\nvivid\nvocal\nvoice\nvoid\nvolcano\nvolume\nvote\nvoyage\nwage\nwagon\nwait\nwalk\nwall\nwalnut\nwant\nwarfare\nwarm\nwarrior\nwash\nwasp\nwaste\nwater\nwave\nway\nwealth\nweapon\nwear\nweasel\nweather\nweb\nwedding\nweekend\nweird\nwelcome\nwest\nwet\nwhale\nwhat\nwheat\nwheel\nwhen\nwhere\nwhip\nwhisper\nwide\nwidth\nwife\nwild\nwill\nwin\nwindow\nwine\nwing\nwink\nwinner\nwinter\nwire\nwisdom\nwise\nwish\nwitness\nwolf\nwoman\nwonder\nwood\nwool\nword\nwork\nworld\nworry\nworth\nwrap\nwreck\nwrestle\nwrist\nwrite\nwrong\nyard\nyear\nyellow\nyou\nyoung\nyouth\nzebra\nzero\nzone\nzoo".split("\n"));const Cl=BigInt(2**32-1),dg=BigInt(32);function eS(e,t=!1){return t?{h:Number(e&Cl),l:Number(e>>dg&Cl)}:{h:0|Number(e>>dg&Cl),l:0|Number(e&Cl)}}const Ie_split=function rB(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let o=0;o<e.length;o++){const{h:i,l:s}=eS(e[o],t);[n[o],r[o]]=[i,s]}return[n,r]},Ie_shrSH=(e,t,n)=>e>>>n,Ie_shrSL=(e,t,n)=>e<<32-n|t>>>n,Ie_rotrSH=(e,t,n)=>e>>>n|t<<32-n,Ie_rotrSL=(e,t,n)=>e<<32-n|t>>>n,Ie_rotrBH=(e,t,n)=>e<<64-n|t>>>n-32,Ie_rotrBL=(e,t,n)=>e>>>n-32|t<<64-n,Ie_add=function yB(e,t,n,r){const o=(t>>>0)+(r>>>0);return{h:e+n+(o/2**32|0)|0,l:0|o}},Ie_add3L=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),Ie_add3H=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,Ie_add4L=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),Ie_add4H=(e,t,n,r,o)=>t+n+r+o+(e/2**32|0)|0,Ie_add5H=(e,t,n,r,o,i)=>t+n+r+o+i+(e/2**32|0)|0,Ie_add5L=(e,t,n,r,o)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(o>>>0),[vB,wB]=Ie_split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),bo=new Uint32Array(80),Eo=new Uint32Array(80);class Sl extends Wp{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:n,Bh:r,Bl:o,Ch:i,Cl:s,Dh:a,Dl:c,Eh:u,El:l,Fh:d,Fl:f,Gh:h,Gl:p,Hh:g,Hl:m}=this;return[t,n,r,o,i,s,a,c,u,l,d,f,h,p,g,m]}set(t,n,r,o,i,s,a,c,u,l,d,f,h,p,g,m){this.Ah=0|t,this.Al=0|n,this.Bh=0|r,this.Bl=0|o,this.Ch=0|i,this.Cl=0|s,this.Dh=0|a,this.Dl=0|c,this.Eh=0|u,this.El=0|l,this.Fh=0|d,this.Fl=0|f,this.Gh=0|h,this.Gl=0|p,this.Hh=0|g,this.Hl=0|m}process(t,n){for(let b=0;b<16;b++,n+=4)bo[b]=t.getUint32(n),Eo[b]=t.getUint32(n+=4);for(let b=16;b<80;b++){const E=0|bo[b-15],D=0|Eo[b-15],C=Ie_rotrSH(E,D,1)^Ie_rotrSH(E,D,8)^Ie_shrSH(E,D,7),M=Ie_rotrSL(E,D,1)^Ie_rotrSL(E,D,8)^Ie_shrSL(E,D,7),O=0|bo[b-2],R=0|Eo[b-2],q=Ie_rotrSH(O,R,19)^Ie_rotrBH(O,R,61)^Ie_shrSH(O,R,6),P=Ie_rotrSL(O,R,19)^Ie_rotrBL(O,R,61)^Ie_shrSL(O,R,6),K=Ie_add4L(M,P,Eo[b-7],Eo[b-16]),se=Ie_add4H(K,C,q,bo[b-7],bo[b-16]);bo[b]=0|se,Eo[b]=0|K}let{Ah:r,Al:o,Bh:i,Bl:s,Ch:a,Cl:c,Dh:u,Dl:l,Eh:d,El:f,Fh:h,Fl:p,Gh:g,Gl:m,Hh:v,Hl:y}=this;for(let b=0;b<80;b++){const E=Ie_rotrSH(d,f,14)^Ie_rotrSH(d,f,18)^Ie_rotrBH(d,f,41),D=Ie_rotrSL(d,f,14)^Ie_rotrSL(d,f,18)^Ie_rotrBL(d,f,41),C=d&h^~d&g,O=Ie_add5L(y,D,f&p^~f&m,wB[b],Eo[b]),R=Ie_add5H(O,v,E,C,vB[b],bo[b]),q=0|O,P=Ie_rotrSH(r,o,28)^Ie_rotrBH(r,o,34)^Ie_rotrBH(r,o,39),K=Ie_rotrSL(r,o,28)^Ie_rotrBL(r,o,34)^Ie_rotrBL(r,o,39),se=r&i^r&a^i&a,xe=o&s^o&c^s&c;v=0|g,y=0|m,g=0|h,m=0|p,h=0|d,p=0|f,({h:d,l:f}=Ie_add(0|u,0|l,0|R,0|q)),u=0|a,l=0|c,a=0|i,c=0|s,i=0|r,s=0|o;const I=Ie_add3L(q,K,xe);r=Ie_add3H(I,R,P,se),o=0|I}({h:r,l:o}=Ie_add(0|this.Ah,0|this.Al,0|r,0|o)),({h:i,l:s}=Ie_add(0|this.Bh,0|this.Bl,0|i,0|s)),({h:a,l:c}=Ie_add(0|this.Ch,0|this.Cl,0|a,0|c)),({h:u,l}=Ie_add(0|this.Dh,0|this.Dl,0|u,0|l)),({h:d,l:f}=Ie_add(0|this.Eh,0|this.El,0|d,0|f)),({h,l:p}=Ie_add(0|this.Fh,0|this.Fl,0|h,0|p)),({h:g,l:m}=Ie_add(0|this.Gh,0|this.Gl,0|g,0|m)),({h:v,l:y}=Ie_add(0|this.Hh,0|this.Hl,0|v,0|y)),this.set(r,o,i,s,a,c,u,l,d,f,h,p,g,m,v,y)}roundClean(){bo.fill(0),Eo.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class bB extends Sl{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class EB extends Sl{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class _B extends Sl{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const fg=qo(()=>new Sl),DB=(qo(()=>new bB),qo(()=>new EB),qo(()=>new _B),e=>"\u3042\u3044\u3053\u304f\u3057\u3093"===e[0]);function tS(e){if("string"!=typeof e)throw new TypeError("Invalid mnemonic type: "+typeof e);return e.normalize("NFKD")}function hg(e){const t=tS(e),n=t.split(" ");if(![12,15,18,21,24].includes(n.length))throw new Error("Invalid mnemonic");return{nfkd:t,words:n}}function nS(e){Bt.bytes(e,16,20,24,28,32)}const SB=e=>{const t=8-e.length/4;return new Uint8Array([Fn(e)[0]>>t<<t])};function rS(e){if(!Array.isArray(e)||2048!==e.length||"string"!=typeof e[0])throw new Error("Worlist: expected array of 2048 strings");return e.forEach(t=>{if("string"!=typeof t)throw new Error(`Wordlist: non-string element: ${t}`)}),El.chain(El.checksum(1,SB),El.radix2(11,!0),El.alphabet(e))}const oS=e=>tS(`mnemonic${e}`);function MB(e,t=""){return function nB(e,t,n,r){const{c:o,dkLen:i,DK:s,PRF:a,PRFSalt:c}=function XC(e,t,n,r){Bt.hash(e);const o=function a8(e,t){if(void 0!==t&&("object"!=typeof t||!s8(t)))throw new Error("Options should be object or undefined");return Object.assign(e,t)}({dkLen:32,asyncTick:10},r),{c:i,dkLen:s,asyncTick:a}=o;if(Bt.number(i),Bt.number(s),Bt.number(a),i<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=Vr(t),u=Vr(n),l=new Uint8Array(s),d=zr.create(e,c),f=d._cloneInto().update(u);return{c:i,dkLen:s,asyncTick:a,DK:l,PRF:d,PRFSalt:f}}(e,t,n,r);let u;const l=new Uint8Array(4),d=zo(l),f=new Uint8Array(a.outputLen);for(let h=1,p=0;p<i;h++,p+=a.outputLen){const g=s.subarray(p,p+a.outputLen);d.setInt32(0,h,!1),(u=c._cloneInto(u)).update(l).digestInto(f),g.set(f.subarray(0,g.length));for(let m=1;m<o;m++){a._cloneInto(u).update(f).digestInto(f);for(let v=0;v<g.length;v++)g[v]^=f[v]}}return function KC(e,t,n,r,o){return e.destroy(),t.destroy(),r&&r.destroy(),o.fill(0),n}(a,c,s,u,f)}(fg,hg(e).nfkd,oS(t),{c:2048,dkLen:64})}const AB=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),iS=Uint8Array.from({length:16},(e,t)=>t),RB=iS.map(e=>(9*e+5)%16);let pg=[iS],gg=[RB];for(let e=0;e<4;e++)for(let t of[pg,gg])t.push(t[e].map(n=>AB[n]));const sS=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),kB=pg.map((e,t)=>e.map(n=>sS[t][n])),NB=gg.map((e,t)=>e.map(n=>sS[t][n])),OB=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),PB=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),Il=(e,t)=>e<<t|e>>>32-t;function aS(e,t,n,r){return 0===e?t^n^r:1===e?t&n|~t&r:2===e?(t|~n)^r:3===e?t&r|n&~r:t^(n|~r)}const xl=new Uint32Array(16);class LB extends Wp{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:t,h1:n,h2:r,h3:o,h4:i}=this;return[t,n,r,o,i]}set(t,n,r,o,i){this.h0=0|t,this.h1=0|n,this.h2=0|r,this.h3=0|o,this.h4=0|i}process(t,n){for(let h=0;h<16;h++,n+=4)xl[h]=t.getUint32(n,!0);let r=0|this.h0,o=r,i=0|this.h1,s=i,a=0|this.h2,c=a,u=0|this.h3,l=u,d=0|this.h4,f=d;for(let h=0;h<5;h++){const p=4-h,g=OB[h],m=PB[h],v=pg[h],y=gg[h],b=kB[h],E=NB[h];for(let D=0;D<16;D++){const C=Il(r+aS(h,i,a,u)+xl[v[D]]+g,b[D])+d|0;r=d,d=u,u=0|Il(a,10),a=i,i=C}for(let D=0;D<16;D++){const C=Il(o+aS(p,s,c,l)+xl[y[D]]+m,E[D])+f|0;o=f,f=l,l=0|Il(c,10),c=s,s=C}}this.set(this.h1+a+l|0,this.h2+u+f|0,this.h3+d+o|0,this.h4+r+s|0,this.h0+i+c|0)}roundClean(){xl.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const FB=qo(()=>new LB),Tl=Kt.ProjectivePoint,mg=(e=Fn,nr(qC(4,t=>e(e(t))),_l));var e;function cS(e){return BigInt(`0x${dn(e)}`)}const BB=vC("Bitcoin seed"),yg={private:76066276,public:76067358},vg=2147483648,Ml=e=>{if(!Number.isSafeInteger(e)||e<0||e>2**32-1)throw new Error(`Invalid number=${e}. Should be from 0 to 2 ** 32 - 1`);const t=new Uint8Array(4);return zo(t).setUint32(0,e,!1),t};class Yo{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return(e=>zo(this.pubHash).getUint32(0,!1))()}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){const t=this.privateKey;if(!t)throw new Error("No private key");return mg.encode(this.serialize(this.versions.private,fo(new Uint8Array([0]),t)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return mg.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(t,n=yg){if(Vo(t),8*t.length<128||8*t.length>512)throw new Error(`HDKey: wrong seed length=${t.length}. Should be between 128 and 512 bits; 256 bits is advised)`);const r=zr(fg,BB,t);return new Yo({versions:n,chainCode:r.slice(32),privateKey:r.slice(0,32)})}static fromExtendedKey(t,n=yg){const r=mg.decode(t),o=zo(r),i=o.getUint32(0,!1),s={versions:n,depth:r[4],parentFingerprint:o.getUint32(5,!1),index:o.getUint32(9,!1),chainCode:r.slice(13,45)},a=r.slice(45),c=0===a[0];if(i!==n[c?"private":"public"])throw new Error("Version mismatch");return new Yo(c?{...s,privateKey:a.slice(1)}:{...s,publicKey:a})}static fromJSON(t){return Yo.fromExtendedKey(t.xpriv)}constructor(t){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!t||"object"!=typeof t)throw new Error("HDKey.constructor must not be called directly");if(this.versions=t.versions||yg,this.depth=t.depth||0,this.chainCode=t.chainCode,this.index=t.index||0,this.parentFingerprint=t.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(t.publicKey&&t.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(t.privateKey){if(!Kt.utils.isValidPrivateKey(t.privateKey))throw new Error("Invalid private key");this.privKey="bigint"==typeof t.privateKey?t.privateKey:cS(t.privateKey),this.privKeyBytes=function UB(e){return ls(e.toString(16).padStart(64,"0"))}(this.privKey),this.pubKey=Kt.getPublicKey(t.privateKey,!0)}else{if(!t.publicKey)throw new Error("HDKey: no public or private key provided");this.pubKey=Tl.fromHex(t.publicKey).toRawBytes(!0)}this.pubHash=(e=>FB(Fn(this.pubKey)))()}derive(t){if(!/^[mM]'?/.test(t))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(t))return this;const n=t.replace(/^[mM]'?\//,"").split("/");let r=this;for(const o of n){const i=/^(\d+)('?)$/.exec(o);if(!i||3!==i.length)throw new Error(`Invalid child index: ${o}`);let s=+i[1];if(!Number.isSafeInteger(s)||s>=vg)throw new Error("Invalid index");"'"===i[2]&&(s+=vg),r=r.deriveChild(s)}return r}deriveChild(t){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let n=Ml(t);if(t>=vg){const a=this.privateKey;if(!a)throw new Error("Could not derive hardened child key");n=fo(new Uint8Array([0]),a,n)}else n=fo(this.pubKey,n);const r=zr(fg,this.chainCode,n),o=cS(r.slice(0,32)),i=r.slice(32);if(!Kt.utils.isValidPrivateKey(o))throw new Error("Tweak bigger than curve order");const s={versions:this.versions,chainCode:i,depth:this.depth+1,parentFingerprint:this.fingerprint,index:t};try{if(this.privateKey){const a=Ct(this.privKey+o,Kt.CURVE.n);if(!Kt.utils.isValidPrivateKey(a))throw new Error("The tweak was out of range or the resulted private key is invalid");s.privateKey=a}else{const a=Tl.fromHex(this.pubKey).add(Tl.fromPrivateKey(o));if(a.equals(Tl.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");s.publicKey=a.toRawBytes(!0)}return new Yo(s)}catch{return this.deriveChild(t+1)}}sign(t){if(!this.privateKey)throw new Error("No privateKey set!");return Vo(t,32),Kt.sign(t,this.privKey).toCompactRawBytes()}verify(t,n){if(Vo(t,32),Vo(n,64),!this.publicKey)throw new Error("No publicKey set!");let r;try{r=Kt.Signature.fromCompact(n)}catch{return!1}return Kt.verify(r,t,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(t,n){if(!this.chainCode)throw new Error("No chainCode set");return Vo(n,33),fo(Ml(t),new Uint8Array([this.depth]),Ml(this.parentFingerprint),Ml(this.index),this.chainCode,n)}}const Er=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");function Eg(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function _g(e){if("string"==typeof e&&(e=Eg(e)),!(e=>e instanceof Uint8Array)(e))throw new Error("expected Uint8Array, got "+typeof e);return e}function Dg(e,t){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");if("number"==typeof t&&e.length!==t)throw new Error(`Uint8Array length ${t} expected`)}function Cg(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function uS(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}const En={number:Cg,bool:function WB(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)},bytes:uS,hash:function ZB(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("hash must be wrapped by utils.wrapConstructor");Cg(e.outputLen),Cg(e.blockLen)},exists:function YB(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")},output:function QB(e,t){uS(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}},Ot=(e,t)=>255&e[t++]|(255&e[t++])<<8;class JB{constructor(t){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,Dg(t=_g(t),32);const n=Ot(t,0),r=Ot(t,2),o=Ot(t,4),i=Ot(t,6),s=Ot(t,8),a=Ot(t,10),c=Ot(t,12),u=Ot(t,14);this.r[0]=8191&n,this.r[1]=8191&(n>>>13|r<<3),this.r[2]=7939&(r>>>10|o<<6),this.r[3]=8191&(o>>>7|i<<9),this.r[4]=255&(i>>>4|s<<12),this.r[5]=s>>>1&8190,this.r[6]=8191&(s>>>14|a<<2),this.r[7]=8065&(a>>>11|c<<5),this.r[8]=8191&(c>>>8|u<<8),this.r[9]=u>>>5&127;for(let l=0;l<8;l++)this.pad[l]=Ot(t,16+2*l)}process(t,n,r=!1){const o=r?0:2048,{h:i,r:s}=this,a=s[0],c=s[1],u=s[2],l=s[3],d=s[4],f=s[5],h=s[6],p=s[7],g=s[8],m=s[9],v=Ot(t,n+0),y=Ot(t,n+2),b=Ot(t,n+4),E=Ot(t,n+6),D=Ot(t,n+8),C=Ot(t,n+10),M=Ot(t,n+12),O=Ot(t,n+14);let R=i[0]+(8191&v),q=i[1]+(8191&(v>>>13|y<<3)),P=i[2]+(8191&(y>>>10|b<<6)),K=i[3]+(8191&(b>>>7|E<<9)),se=i[4]+(8191&(E>>>4|D<<12)),xe=i[5]+(D>>>1&8191),I=i[6]+(8191&(D>>>14|C<<2)),k=i[7]+(8191&(C>>>11|M<<5)),Z=i[8]+(8191&(M>>>8|O<<8)),ae=i[9]+(O>>>5|o),U=0,Ce=U+R*a+q*(5*m)+P*(5*g)+K*(5*p)+se*(5*h);U=Ce>>>13,Ce&=8191,Ce+=xe*(5*f)+I*(5*d)+k*(5*l)+Z*(5*u)+ae*(5*c),U+=Ce>>>13,Ce&=8191;let Pe=U+R*c+q*a+P*(5*m)+K*(5*g)+se*(5*p);U=Pe>>>13,Pe&=8191,Pe+=xe*(5*h)+I*(5*f)+k*(5*d)+Z*(5*l)+ae*(5*u),U+=Pe>>>13,Pe&=8191;let ke=U+R*u+q*c+P*a+K*(5*m)+se*(5*g);U=ke>>>13,ke&=8191,ke+=xe*(5*p)+I*(5*h)+k*(5*f)+Z*(5*d)+ae*(5*l),U+=ke>>>13,ke&=8191;let It=U+R*l+q*u+P*c+K*a+se*(5*m);U=It>>>13,It&=8191,It+=xe*(5*g)+I*(5*p)+k*(5*h)+Z*(5*f)+ae*(5*d),U+=It>>>13,It&=8191;let tn=U+R*d+q*l+P*u+K*c+se*a;U=tn>>>13,tn&=8191,tn+=xe*(5*m)+I*(5*g)+k*(5*p)+Z*(5*h)+ae*(5*f),U+=tn>>>13,tn&=8191;let Dn=U+R*f+q*d+P*l+K*u+se*c;U=Dn>>>13,Dn&=8191,Dn+=xe*a+I*(5*m)+k*(5*g)+Z*(5*p)+ae*(5*h),U+=Dn>>>13,Dn&=8191;let jn=U+R*h+q*f+P*d+K*l+se*u;U=jn>>>13,jn&=8191,jn+=xe*c+I*a+k*(5*m)+Z*(5*g)+ae*(5*p),U+=jn>>>13,jn&=8191;let nn=U+R*p+q*h+P*f+K*d+se*l;U=nn>>>13,nn&=8191,nn+=xe*u+I*c+k*a+Z*(5*m)+ae*(5*g),U+=nn>>>13,nn&=8191;let Dr=U+R*g+q*p+P*h+K*f+se*d;U=Dr>>>13,Dr&=8191,Dr+=xe*l+I*u+k*c+Z*a+ae*(5*m),U+=Dr>>>13,Dr&=8191;let hn=U+R*m+q*g+P*p+K*h+se*f;U=hn>>>13,hn&=8191,hn+=xe*d+I*l+k*u+Z*c+ae*a,U+=hn>>>13,hn&=8191,U=(U<<2)+U|0,U=U+Ce|0,Ce=8191&U,U>>>=13,Pe+=U,i[0]=Ce,i[1]=Pe,i[2]=ke,i[3]=It,i[4]=tn,i[5]=Dn,i[6]=jn,i[7]=nn,i[8]=Dr,i[9]=hn}finalize(){const{h:t,pad:n}=this,r=new Uint16Array(10);let o=t[1]>>>13;t[1]&=8191;for(let a=2;a<10;a++)t[a]+=o,o=t[a]>>>13,t[a]&=8191;t[0]+=5*o,o=t[0]>>>13,t[0]&=8191,t[1]+=o,o=t[1]>>>13,t[1]&=8191,t[2]+=o,r[0]=t[0]+5,o=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=t[a]+o,o=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(1^o)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)t[a]=t[a]&i|r[a];t[0]=65535&(t[0]|t[1]<<13),t[1]=65535&(t[1]>>>3|t[2]<<10),t[2]=65535&(t[2]>>>6|t[3]<<7),t[3]=65535&(t[3]>>>9|t[4]<<4),t[4]=65535&(t[4]>>>12|t[5]<<1|t[6]<<14),t[5]=65535&(t[6]>>>2|t[7]<<11),t[6]=65535&(t[7]>>>5|t[8]<<8),t[7]=65535&(t[8]>>>8|t[9]<<5);let s=t[0]+n[0];t[0]=65535&s;for(let a=1;a<8;a++)s=(t[a]+n[a]|0)+(s>>>16)|0,t[a]=65535&s}update(t){En.exists(this);const{buffer:n,blockLen:r}=this,o=(t=_g(t)).length;for(let i=0;i<o;){const s=Math.min(r-this.pos,o-i);if(s!==r)n.set(t.subarray(i,i+s),this.pos),this.pos+=s,i+=s,this.pos===r&&(this.process(n,0,!1),this.pos=0);else for(;r<=o-i;i+=r)this.process(t,i)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(t){En.exists(this),En.output(t,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:o}=this;if(o){for(n[o++]=1;o<16;o++)n[o]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let s=0;s<8;s++)t[i++]=r[s]>>>0,t[i++]=r[s]>>>8;return t}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}}!function XB(e){const t=(r,o)=>e(o).update(_g(r)).digest(),n=e(new Uint8Array(32));t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r)}(e=>new JB(e));const KB=Eg("expand 16-byte k"),ej=Eg("expand 32-byte k"),tj=Er(KB),nj=Er(ej),lS=e=>!(e.byteOffset%4),Ja=e=>{const{core:t,rounds:n,counterRight:r,counterLen:o,allow128bitKeys:i,extendNonceFn:s,blockLen:a}=function qB(e,t){if(void 0!==t&&("object"!=typeof t||!(e=>"[object Object]"===Object.prototype.toString.call(e)&&e.constructor===Object)(t)))throw new Error("options must be object or undefined");return Object.assign(e,t)}({rounds:20,counterRight:!1,counterLen:8,allow128bitKeys:!0,blockLen:64},e);En.number(o),En.number(n),En.number(a),En.bool(r),En.bool(i);const c=a/4;if(a%4!=0)throw new Error("Salsa/ChaCha: blockLen must be aligned to 4 bytes");return(u,l,d,f,h=0)=>{if(En.bytes(u),En.bytes(l),En.bytes(d),f||(f=new Uint8Array(d.length)),En.bytes(f),En.number(h),h<0||h>=2**32-1)throw new Error("Salsa/ChaCha: counter overflow");if(f.length<d.length)throw new Error(`Salsa/ChaCha: output (${f.length}) is shorter than data (${d.length})`);const p=[];let g,m;if(32===u.length)g=u,m=nj;else{if(16!==u.length||!i)throw new Error(`Salsa/ChaCha: invalid 32-byte key, got length=${u.length}`);g=new Uint8Array(32),g.set(u),g.set(u,16),m=tj,p.push(g)}if(s){if(l.length<=16)throw new Error("Salsa/ChaCha: extended nonce must be bigger than 16 bytes");g=s(m,g,l.subarray(0,16),new Uint8Array(32)),p.push(g),l=l.subarray(16)}const v=16-o;if(l.length!==v)throw new Error(`Salsa/ChaCha: nonce must be ${v} or 16 bytes`);if(12!==v){const R=new Uint8Array(12);R.set(l,r?0:12-l.length),p.push(l=R)}const y=new Uint8Array(a),b=Er(y),E=Er(g),D=Er(l),C=lS(d)&&Er(d),M=lS(f)&&Er(f);p.push(b);const O=d.length;for(let R=0,q=h;R<O;q++){if(t(m,E,D,b,q,n),q>=2**32-1)throw new Error("Salsa/ChaCha: counter overflow");const P=Math.min(a,O-R);if(P===a&&M&&C){const K=R/4;if(R%4!=0)throw new Error("Salsa/ChaCha: invalid block position");for(let se=0;se<c;se++)M[K+se]=C[K+se]^b[se];R+=a}else{for(let K=0;K<P;K++)f[R+K]=d[R+K]^y[K];R+=P}}for(let R=0;R<p.length;R++)p[R].fill(0);return f}},J=(e,t)=>e<<t|e>>>32-t;const dS=Ja({core:function Xa(e,t,n,r,o,i=20){let s=e[0],a=e[1],c=e[2],u=e[3],l=t[0],d=t[1],f=t[2],h=t[3],p=t[4],g=t[5],m=t[6],v=t[7],y=o,b=n[0],E=n[1],D=n[2],C=s,M=a,O=c,R=u,q=l,P=d,K=f,se=h,xe=p,I=g,k=m,Z=v,ae=y,U=b,Ce=E,Pe=D;for(let It=0;It<i;It+=2)C=C+q|0,ae=J(ae^C,16),xe=xe+ae|0,q=J(q^xe,12),C=C+q|0,ae=J(ae^C,8),xe=xe+ae|0,q=J(q^xe,7),M=M+P|0,U=J(U^M,16),I=I+U|0,P=J(P^I,12),M=M+P|0,U=J(U^M,8),I=I+U|0,P=J(P^I,7),O=O+K|0,Ce=J(Ce^O,16),k=k+Ce|0,K=J(K^k,12),O=O+K|0,Ce=J(Ce^O,8),k=k+Ce|0,K=J(K^k,7),R=R+se|0,Pe=J(Pe^R,16),Z=Z+Pe|0,se=J(se^Z,12),R=R+se|0,Pe=J(Pe^R,8),Z=Z+Pe|0,se=J(se^Z,7),C=C+P|0,Pe=J(Pe^C,16),k=k+Pe|0,P=J(P^k,12),C=C+P|0,Pe=J(Pe^C,8),k=k+Pe|0,P=J(P^k,7),M=M+K|0,ae=J(ae^M,16),Z=Z+ae|0,K=J(K^Z,12),M=M+K|0,ae=J(ae^M,8),Z=Z+ae|0,K=J(K^Z,7),O=O+se|0,U=J(U^O,16),xe=xe+U|0,se=J(se^xe,12),O=O+se|0,U=J(U^O,8),xe=xe+U|0,se=J(se^xe,7),R=R+q|0,Ce=J(Ce^R,16),I=I+Ce|0,q=J(q^I,12),R=R+q|0,Ce=J(Ce^R,8),I=I+Ce|0,q=J(q^I,7);let ke=0;r[ke++]=s+C|0,r[ke++]=a+M|0,r[ke++]=c+O|0,r[ke++]=u+R|0,r[ke++]=l+q|0,r[ke++]=d+P|0,r[ke++]=f+K|0,r[ke++]=h+se|0,r[ke++]=p+xe|0,r[ke++]=g+I|0,r[ke++]=m+k|0,r[ke++]=v+Z|0,r[ke++]=y+ae|0,r[ke++]=b+U|0,r[ke++]=E+Ce|0,r[ke++]=D+Pe|0},counterRight:!1,counterLen:4,allow128bitKeys:!1}),Sg=new Uint8Array([0]),pS=new Uint8Array;var cj=Object.defineProperty,yt=(e,t)=>{for(var n in t)cj(e,n,{get:t[n],enumerable:!0})};function Ig(e){return dn(hs.getPublicKey(e))}yt({},{MessageNode:()=>gS,MessageQueue:()=>mS,insertEventIntoAscendingList:()=>fj,insertEventIntoDescendingList:()=>dj,normalizeURL:()=>xg,utf8Decoder:()=>_r,utf8Encoder:()=>Bn});var _r=new TextDecoder("utf-8"),Bn=new TextEncoder;function xg(e){let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),("80"===t.port&&"ws:"===t.protocol||"443"===t.port&&"wss:"===t.protocol)&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}function dj(e,t){let o,n=0,r=e.length-1,i=n;if(r<0)i=0;else if(t.created_at<e[r].created_at)i=r+1;else if(t.created_at>=e[n].created_at)i=n;else for(;;){if(r<=n+1){i=r;break}if(o=Math.floor(n+(r-n)/2),e[o].created_at>t.created_at)n=o;else{if(!(e[o].created_at<t.created_at)){i=o;break}r=o}}return e[i]?.id!==t.id?[...e.slice(0,i),t,...e.slice(i)]:e}function fj(e,t){let o,n=0,r=e.length-1,i=n;if(r<0)i=0;else if(t.created_at>e[r].created_at)i=r+1;else if(t.created_at<=e[n].created_at)i=n;else for(;;){if(r<=n+1){i=r;break}if(o=Math.floor(n+(r-n)/2),e[o].created_at<t.created_at)n=o;else{if(!(e[o].created_at>t.created_at)){i=o;break}r=o}}return e[i]?.id!==t.id?[...e.slice(0,i),t,...e.slice(i)]:e}var gS=class{_value;_next;get value(){return this._value}set value(e){this._value=e}get next(){return this._next}set next(e){this._next=e}constructor(e){this._value=e,this._next=null}},mS=class{_first;_last;get first(){return this._first}set first(e){this._first=e}get last(){return this._last}set last(e){this._last=e}_size;get size(){return this._size}set size(e){this._size=e}constructor(){this._first=null,this._last=null,this._size=0}enqueue(e){const t=new gS(e);return 0!==this._size&&this._last?(this._last.next=t,this._last=t):(this._first=t,this._last=t),this._size++,!0}dequeue(){if(0===this._size||!this._first)return null;let e=this._first;return this._first=e.next,e.next=null,this._size--,e.value}},ps=Symbol("verified");function _o(e,t){const n=e;return n.pubkey=Ig(t),n.id=Qo(n),n.sig=Rl(n,t),n[ps]=!0,n}function Qo(e){let t=Fn(Bn.encode(function gj(e){if(!Tg(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}(e)));return dn(t)}var mj=e=>e instanceof Object;function Tg(e){if(!mj(e)||"number"!=typeof e.kind||"string"!=typeof e.content||"number"!=typeof e.created_at||"string"!=typeof e.pubkey||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let r=0;r<n.length;r++)if("object"==typeof n[r])return!1}return!0}function Al(e){if("boolean"==typeof e[ps])return e[ps];const t=Qo(e);if(t!==e.id)return e[ps]=!1;try{return e[ps]=hs.verify(e.sig,t,e.pubkey)}catch{return e[ps]=!1}}function Rl(e,t){return dn(hs.sign(Qo(e),t))}function yS(e,t){if(e.ids&&-1===e.ids.indexOf(t.id)&&!e.ids.some(n=>t.id.startsWith(n))||e.kinds&&-1===e.kinds.indexOf(t.kind)||e.authors&&-1===e.authors.indexOf(t.pubkey)&&!e.authors.some(n=>t.pubkey.startsWith(n)))return!1;for(let n in e)if("#"===n[0]){let o=e[`#${n.slice(1)}`];if(o&&!t.tags.find(([i,s])=>i===n.slice(1)&&-1!==o.indexOf(s)))return!1}return!(e.since&&t.created_at<e.since||e.until&&t.created_at>e.until)}function kl(e,t){let n=t.length+3,r=e.indexOf(`"${t}":`)+n,o=e.slice(r).indexOf('"')+r+1;return e.slice(o,o+64)}function wS(e,t){let n=t.length,r=e.indexOf(`"${t}":`)+n+3,o=e.slice(r),i=Math.min(o.indexOf(","),o.indexOf("}"));return parseInt(o.slice(0,i),10)}function bS(e){let t=e.slice(0,22).indexOf('"EVENT"');if(-1===t)return null;let n=e.slice(t+7+1).indexOf('"');if(-1===n)return null;let r=t+7+1+n,o=e.slice(r+1,80).indexOf('"');return-1===o?null:e.slice(r+1,r+1+o)}function wj(e,t){return t===kl(e,"id")}function bj(e,t){return t===kl(e,"pubkey")}function Ej(e,t){return t===wS(e,"kind")}function _S(e,t={}){let{listTimeout:n=3e3,getTimeout:r=3e3,countTimeout:o=3e3}=t;var i,l,s={},a={connect:[],disconnect:[],error:[],notice:[],auth:[]},c={},u={};function f(){return(f=z(function*(){return l||(l=new Promise((E,D)=>{try{i=new WebSocket(e)}catch(R){D(R)}i.onopen=()=>{a.connect.forEach(R=>R()),E()},i.onerror=()=>{l=void 0,a.error.forEach(R=>R()),D()},i.onclose=z(function*(){l=void 0,a.disconnect.forEach(R=>R())});let M,C=new mS;function O(){if(0===C.size)return clearInterval(M),void(M=null);var R=C.dequeue();if(!R)return;let q=bS(R);if(q){let P=s[q];if(P&&P.alreadyHaveEvent&&P.alreadyHaveEvent(kl(R,"id"),e))return}try{let P=JSON.parse(R);switch(P[0]){case"EVENT":{let I=P[1],k=P[2];return void(Tg(k)&&s[I]&&(s[I].skipVerification||Al(k))&&function vS(e,t){for(let n=0;n<e.length;n++)if(yS(e[n],t))return!0;return!1}(s[I].filters,k)&&(c[I]?.event||[]).forEach(Z=>Z(k)))}case"COUNT":let K=P[1],se=P[2];return void(s[K]&&(c[K]?.count||[]).forEach(I=>I(se)));case"EOSE":{let I=P[1];return void(I in c&&(c[I].eose.forEach(k=>k()),c[I].eose=[]))}case"OK":{let I=P[1],k=P[2],Z=P[3]||"";if(I in u){let{resolve:ae,reject:U}=u[I];k?ae(null):U(new Error(Z))}return}case"NOTICE":let xe=P[1];return void a.notice.forEach(I=>I(xe));case"AUTH":{let I=P[1];return void a.auth?.forEach(k=>k(I))}}}catch{return}}i.onmessage=R=>{C.enqueue(R.data),M||(M=setInterval(O,0))}}))})).apply(this,arguments)}function h(){return 1===i?.readyState}function g(){return g=z(function*(){h()||(yield function d(){return f.apply(this,arguments)}())}),g.apply(this,arguments)}function m(E){return v.apply(this,arguments)}function v(){return(v=z(function*(E){let D=JSON.stringify(E);if(h()||(yield new Promise(C=>setTimeout(C,1e3)),h()))try{i.send(D)}catch(C){console.log(C)}})).apply(this,arguments)}const y=(E,{verb:D="REQ",skipVerification:C=!1,alreadyHaveEvent:M=null,id:O=Math.random().toString().slice(2)}={})=>{let R=O;s[R]={id:R,filters:E,skipVerification:C,alreadyHaveEvent:M},m([D,R,...E]);let q={sub:(P,K={})=>y(P||E,{skipVerification:K.skipVerification||C,alreadyHaveEvent:K.alreadyHaveEvent||M,id:R}),unsub:()=>{delete s[R],delete c[R],m(["CLOSE",R])},on:(P,K)=>{c[R]=c[R]||{event:[],count:[],eose:[]},c[R][P].push(K)},off:(P,K)=>{let se=c[R],xe=se[P].indexOf(K);xe>=0&&se[P].splice(xe,1)},get events(){return function DS(e){return Mg.apply(this,arguments)}(q)}};return q};function b(E,D){return new Promise((C,M)=>{if(!E.id)return void M(new Error(`event ${E} has no id`));let O=E.id;m([D,E]),u[O]={resolve:C,reject:M}})}return{url:e,sub:y,on:(E,D)=>{a[E].push(D),"connect"===E&&1===i?.readyState&&D()},off:(E,D)=>{let C=a[E].indexOf(D);-1!==C&&a[E].splice(C,1)},list:(E,D)=>new Promise(C=>{let M=y(E,D),O=[],R=setTimeout(()=>{M.unsub(),C(O)},n);M.on("eose",()=>{M.unsub(),clearTimeout(R),C(O)}),M.on("event",q=>{O.push(q)})}),get:(E,D)=>new Promise(C=>{let M=y([E],D),O=setTimeout(()=>{M.unsub(),C(null)},r);M.on("event",R=>{M.unsub(),clearTimeout(O),C(R)})}),count:E=>new Promise(D=>{let C=y(E,{...y,verb:"COUNT"}),M=setTimeout(()=>{C.unsub(),D(null)},o);C.on("count",O=>{C.unsub(),clearTimeout(M),D(O)})}),publish:E=>z(function*(){yield b(E,"EVENT")})(),auth:E=>z(function*(){yield b(E,"AUTH")})(),connect:function p(){return g.apply(this,arguments)},close(){a={connect:[],disconnect:[],error:[],notice:[],auth:[]},c={},u={},i?.readyState===WebSocket.OPEN&&i.close()},get status(){return i?.readyState??3}}}function Mg(){return Mg=function KU(e){return function(){return new za(e.apply(this,arguments))}}(function*(e){let t;const n=[],r=o=>{t?(t(o),t=void 0):n.push(o)};e.on("event",r);try{for(;;)n.length>0?yield n.shift():yield yield XU(new Promise(i=>{t=i}))}finally{e.off("event",r)}}),Mg.apply(this,arguments)}yt({},{getHex64:()=>kl,getInt:()=>wS,getSubscriptionId:()=>bS,matchEventId:()=>wj,matchEventKind:()=>Ej,matchEventPubkey:()=>bj});var _n={};yt(_n,{BECH32_REGEX:()=>SS,decode:()=>Ka,naddrEncode:()=>Tj,neventEncode:()=>xj,noteEncode:()=>Sj,nprofileEncode:()=>Ij,npubEncode:()=>Cj,nrelayEncode:()=>Mj,nsecEncode:()=>Dj});var CS=5e3,SS=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function Ka(e){let{prefix:t,words:n}=wo.decode(e,CS),r=new Uint8Array(wo.fromWords(n));switch(t){case"nprofile":{let o=Nl(r);if(!o[0]?.[0])throw new Error("missing TLV 0 for nprofile");if(32!==o[0][0].length)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:dn(o[0][0]),relays:o[1]?o[1].map(i=>_r.decode(i)):[]}}}case"nevent":{let o=Nl(r);if(!o[0]?.[0])throw new Error("missing TLV 0 for nevent");if(32!==o[0][0].length)throw new Error("TLV 0 should be 32 bytes");if(o[2]&&32!==o[2][0].length)throw new Error("TLV 2 should be 32 bytes");if(o[3]&&4!==o[3][0].length)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:dn(o[0][0]),relays:o[1]?o[1].map(i=>_r.decode(i)):[],author:o[2]?.[0]?dn(o[2][0]):void 0,kind:o[3]?.[0]?parseInt(dn(o[3][0]),16):void 0}}}case"naddr":{let o=Nl(r);if(!o[0]?.[0])throw new Error("missing TLV 0 for naddr");if(!o[2]?.[0])throw new Error("missing TLV 2 for naddr");if(32!==o[2][0].length)throw new Error("TLV 2 should be 32 bytes");if(!o[3]?.[0])throw new Error("missing TLV 3 for naddr");if(4!==o[3][0].length)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:_r.decode(o[0][0]),pubkey:dn(o[2][0]),kind:parseInt(dn(o[3][0]),16),relays:o[1]?o[1].map(i=>_r.decode(i)):[]}}}case"nrelay":{let o=Nl(r);if(!o[0]?.[0])throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:_r.decode(o[0][0])}}case"nsec":case"npub":case"note":return{type:t,data:dn(r)};default:throw new Error(`unknown prefix ${t}`)}}function Nl(e){let t={},n=e;for(;n.length>0;){let r=n[0],o=n[1];if(!o)throw new Error(`malformed TLV ${r}`);let i=n.slice(2,2+o);if(n=n.slice(2+o),i.length<o)throw new Error(`not enough data to read on TLV ${r}`);t[r]=t[r]||[],t[r].push(i)}return t}function Dj(e){return Ag("nsec",e)}function Cj(e){return Ag("npub",e)}function Sj(e){return Ag("note",e)}function ec(e,t){let n=wo.toWords(t);return wo.encode(e,n,CS)}function Ag(e,t){return ec(e,ls(t))}function Ij(e){return ec("nprofile",Ol({0:[ls(e.pubkey)],1:(e.relays||[]).map(n=>Bn.encode(n))}))}function xj(e){let t;return null!=e.kind&&(t=function _j(e){const t=new Uint8Array(4);return t[0]=e>>24&255,t[1]=e>>16&255,t[2]=e>>8&255,t[3]=255&e,t}(e.kind)),ec("nevent",Ol({0:[ls(e.id)],1:(e.relays||[]).map(r=>Bn.encode(r)),2:e.author?[ls(e.author)]:[],3:t?[new Uint8Array(t)]:[]}))}function Tj(e){let t=new ArrayBuffer(4);return new DataView(t).setUint32(0,e.kind,!1),ec("naddr",Ol({0:[Bn.encode(e.identifier)],1:(e.relays||[]).map(r=>Bn.encode(r)),2:[ls(e.pubkey)],3:[new Uint8Array(t)]}))}function Mj(e){return ec("nrelay",Ol({0:[Bn.encode(e)]}))}function Ol(e){let t=[];return Object.entries(e).forEach(([n,r])=>{r.forEach(o=>{let i=new Uint8Array(o.length+2);i.set([parseInt(n)],0),i.set([o.length],1),i.set(o,2),t.push(i)})}),fo(...t)}var IS={};function xS(e,t,n){return Rg.apply(this,arguments)}function Rg(){return Rg=z(function*(e,t,n){const o=TS(Kt.getSharedSecret(e,"02"+t));let i=Uint8Array.from(qa(16)),s=Bn.encode(n),a=yield crypto.subtle.importKey("raw",o,{name:"AES-CBC"},!1,["encrypt"]),c=yield crypto.subtle.encrypt({name:"AES-CBC",iv:i},a,s);return`${Gr.encode(new Uint8Array(c))}?iv=${Gr.encode(new Uint8Array(i.buffer))}`}),Rg.apply(this,arguments)}function Rj(e,t,n){return kg.apply(this,arguments)}function kg(){return kg=z(function*(e,t,n){let[r,o]=n.split("?iv="),s=TS(Kt.getSharedSecret(e,"02"+t)),a=yield crypto.subtle.importKey("raw",s,{name:"AES-CBC"},!1,["decrypt"]),c=Gr.decode(r),u=Gr.decode(o),l=yield crypto.subtle.decrypt({name:"AES-CBC",iv:u},a,c);return _r.decode(l)}),kg.apply(this,arguments)}function TS(e){return e.slice(1,33)}yt(IS,{decrypt:()=>Rj,encrypt:()=>xS}),typeof crypto<"u"&&!crypto.subtle&&crypto.webcrypto&&(crypto.subtle=crypto.webcrypto.subtle);var Ng={};yt(Ng,{NIP05_REGEX:()=>MS,queryProfile:()=>Oj,searchDomain:()=>Nj,useFetchImplementation:()=>kj});var Pl,MS=/^(?:([\w.+-]+)@)?([\w.-]+)$/;try{Pl=fetch}catch{}function kj(e){Pl=e}function Nj(e){return Og.apply(this,arguments)}function Og(){return Og=z(function*(e,t=""){try{return(yield(yield Pl(`https://${e}/.well-known/nostr.json?name=${t}`)).json()).names}catch{return{}}}),Og.apply(this,arguments)}function Oj(e){return Pg.apply(this,arguments)}function Pg(){return Pg=z(function*(e){const t=e.match(MS);if(!t)return null;const[n,r="_",o]=t;try{const i=yield Pl(`https://${o}/.well-known/nostr.json?name=${r}`),{names:s,relays:a}=function Pj(e){const t={names:{}};for(const[n,r]of Object.entries(e.names))"string"==typeof n&&"string"==typeof r&&(t.names[n]=r);if(e.relays){t.relays={};for(const[n,r]of Object.entries(e.relays))"string"==typeof n&&Array.isArray(r)&&(t.relays[n]=r.filter(o=>"string"==typeof o))}return t}(yield i.json()),c=s[r];return c?{pubkey:c,relays:a?.[c]}:null}catch{return null}}),Pg.apply(this,arguments)}function Fj(e,t){let r=Yo.fromMasterSeed(MB(e,t)).derive("m/44'/1237'/0'/0/0").privateKey;if(!r)throw new Error("could not derive private key");return dn(r)}function Uj(){return function CB(e,t=128){if(Bt.number(t),t%32!=0||t>256)throw new TypeError("Invalid entropy");return function xB(e,t){return nS(e),rS(t).encode(e).join(DB(t)?"\u3000":" ")}(qa(t/8),e)}(JC)}function Bj(e){return function TB(e,t){try{!function IB(e,t){const{words:n}=hg(e);nS(rS(t).decode(n))}(e,t)}catch{return!1}return!0}(e,JC)}function $j(e){const t={reply:void 0,root:void 0,mentions:[],profiles:[]},n=[];for(const r of e.tags)"e"===r[0]&&r[1]&&n.push(r),"p"===r[0]&&r[1]&&t.profiles.push({pubkey:r[1],relays:r[2]?[r[2]]:[]});for(let r=0;r<n.length;r++){const o=n[r],[i,s,a,c]=o,u={id:s,relays:a?[a]:[]},d=r===n.length-1;"root"!==c?"reply"!==c?"mention"!==c?0===r?t.root=u:d?t.reply=u:t.mentions.push(u):t.mentions.push(u):t.reply=u:t.root=u}return t}function AS(e){let t=0;for(let n=0;n<e.length;n++){const r=parseInt(e[n],16);if(0!==r){t+=Math.clz32(r)-28;break}t+=4}return t}function Vj(e,t){let n=0;const r=e,o=["nonce",n.toString(),t.toString()];for(r.tags.push(o);;){const i=Math.floor((new Date).getTime()/1e3);if(i!==r.created_at&&(n=0,r.created_at=i),o[1]=(++n).toString(),r.id=Qo(r),AS(r.id)>=t)break}return r}function qj(e,t,n,r){return _o({kind:6,tags:[...e.tags??[],["e",t.id,n],["p",t.pubkey]],content:""===e.content?"":JSON.stringify(t),created_at:e.created_at},r)}function RS(e){if(6!==e.kind)return;let t,n;for(let r=e.tags.length-1;r>=0&&(void 0===t||void 0===n);r--){const o=e.tags[r];o.length>=2&&("e"===o[0]&&void 0===t?t=o:"p"===o[0]&&void 0===n&&(n=o))}return void 0!==t?{id:t[1],relays:[t[2],n?.[2]].filter(r=>"string"==typeof r),author:n?.[1]}:void 0}function Gj(e,{skipVerification:t}={}){const n=RS(e);if(void 0===n||""===e.content)return;let r;try{r=JSON.parse(e.content)}catch{return}return r.id===n.id&&(t||Al(r))?r:void 0}yt({},{generateSeedWords:()=>Uj,privateKeyFromSeedWords:()=>Fj,validateWords:()=>Bj}),yt({},{parse:()=>$j}),yt({},{getPow:()=>AS,minePow:()=>Vj}),yt({},{finishRepostEvent:()=>qj,getRepostedEvent:()=>Gj,getRepostedEventPointer:()=>RS}),yt({},{NOSTR_URI_REGEX:()=>Ll,parse:()=>Yj,test:()=>Zj});var Ll=new RegExp(`nostr:(${SS.source})`);function Zj(e){return"string"==typeof e&&new RegExp(`^${Ll.source}$`).test(e)}function Yj(e){const t=e.match(new RegExp(`^${Ll.source}$`));if(!t)throw new Error(`Invalid Nostr URI: ${e}`);return{uri:t[0],value:t[1],decoded:Ka(t[1])}}function Jj(e,t,n){const r=t.tags.filter(o=>o.length>=2&&("e"===o[0]||"p"===o[0]));return _o({...e,kind:7,tags:[...e.tags??[],...r,["e",t.id],["p",t.pubkey]],content:e.content??"+"},n)}function Xj(e){if(7!==e.kind)return;let t,n;for(let r=e.tags.length-1;r>=0&&(void 0===t||void 0===n);r--){const o=e.tags[r];o.length>=2&&("e"===o[0]&&void 0===t?t=o:"p"===o[0]&&void 0===n&&(n=o))}return void 0!==t&&void 0!==n?{id:t[1],relays:[t[2],n[2]].filter(r=>void 0!==r),author:n[1]}:void 0}function e4(e,t){let n=[];(t.kind||-1)>=0&&n.push(`kind=${t.kind}`),t.until&&n.push(`created_at<${t.until}`),t.since&&n.push(`created_at>${t.since}`);let r=n.join("&");if(""===r)throw new Error("refusing to create a delegation without any conditions");let o=Fn(Bn.encode(`nostr:delegation:${t.pubkey}:${r}`)),i=dn(hs.sign(o,e));return{from:Ig(e),to:t.pubkey,cond:r,sig:i}}function t4(e){let t=e.tags.find(a=>"delegation"===a[0]&&a.length>=4);if(!t)return null;let n=t[1],r=t[2],o=t[3],i=r.split("&");for(let a=0;a<i.length;a++){let[c,u,l]=i[a].split(/\b/);if("kind"!==c||"="!==u||e.kind!==parseInt(l)){if("created_at"===c&&"<"===u&&e.created_at<parseInt(l))continue;if("created_at"===c&&">"===u&&e.created_at>parseInt(l))continue;return null}}let s=Fn(Bn.encode(`nostr:delegation:${e.pubkey}:${r}`));return hs.verify(o,s,n)?n:null}yt({},{finishReactionEvent:()=>Jj,getReactedEventPointer:()=>Xj}),yt({},{createDelegation:()=>e4,getDelegator:()=>t4}),yt({},{matchAll:()=>r4,regex:()=>Lg,replaceAll:()=>o4});var Lg=()=>new RegExp(`\\b${Ll.source}\\b`,"g");function*r4(e){const t=e.matchAll(Lg());for(const n of t)try{const[r,o]=n;yield{uri:r,value:o,decoded:Ka(o),start:n.index,end:n.index+r.length}}catch{}}function o4(e,t){return e.replaceAll(Lg(),(n,r)=>t({uri:n,value:r,decoded:Ka(r)}))}yt({},{channelCreateEvent:()=>s4,channelHideMessageEvent:()=>u4,channelMessageEvent:()=>c4,channelMetadataEvent:()=>a4,channelMuteUserEvent:()=>l4});var Fg,s4=(e,t)=>{let n;if("object"==typeof e.content)n=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;n=e.content}return _o({kind:40,tags:[...e.tags??[]],content:n,created_at:e.created_at},t)},a4=(e,t)=>{let n;if("object"==typeof e.content)n=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;n=e.content}return _o({kind:41,tags:[["e",e.channel_create_event_id],...e.tags??[]],content:n,created_at:e.created_at},t)},c4=(e,t)=>{const n=[["e",e.channel_create_event_id,e.relay_url,"root"]];return e.reply_to_channel_message_event_id&&n.push(["e",e.reply_to_channel_message_event_id,e.relay_url,"reply"]),_o({kind:42,tags:[...n,...e.tags??[]],content:e.content,created_at:e.created_at},t)},u4=(e,t)=>{let n;if("object"==typeof e.content)n=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;n=e.content}return _o({kind:43,tags:[["e",e.channel_message_event_id],...e.tags??[]],content:n,created_at:e.created_at},t)},l4=(e,t)=>{let n;if("object"==typeof e.content)n=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;n=e.content}return _o({kind:44,tags:[["p",e.pubkey_to_mute],...e.tags??[]],content:n,created_at:e.created_at},t)};yt({},{useFetchImplementation:()=>f4,validateGithub:()=>h4});try{Fg=fetch}catch{}function f4(e){Fg=e}function h4(e,t,n){return Ug.apply(this,arguments)}function Ug(){return Ug=z(function*(e,t,n){try{return(yield(yield Fg(`https://gist.github.com/${t}/${n}/raw`)).text())===`Verifying that I control the following Nostr public key: ${e}`}catch{return!1}}),Ug.apply(this,arguments)}yt({},{authenticate:()=>g4});var g4=function(){var e=z(function*({challenge:t,relay:n,sign:r}){const o={kind:22242,created_at:Math.floor(Date.now()/1e3),tags:[["relay",n.url],["challenge",t]],content:""};return n.auth(yield r(o))});return function(n){return e.apply(this,arguments)}}();yt({},{decrypt:()=>v4,encrypt:()=>y4,utils:()=>Jo});var Jo={v2:{maxPlaintextSize:65408,minCiphertextSize:100,maxCiphertextSize:102400,getConversationKey:(e,t)=>Kt.getSharedSecret(e,"02"+t).subarray(1,33),getMessageKeys(e,t){const n=((e,t,n,r,o)=>function sj(e,t,n,r=32){if(Bt.hash(e),Bt.number(r),r>255*e.outputLen)throw new Error("Length should be <= 255*HashLen");const o=Math.ceil(r/e.outputLen);void 0===n&&(n=pS);const i=new Uint8Array(o*e.outputLen),s=zr.create(e,t),a=s._cloneInto(),c=new Uint8Array(s.outputLen);for(let u=0;u<o;u++)Sg[0]=u+1,a.update(0===u?pS:c).update(n).update(Sg).digestInto(c),i.set(c,e.outputLen*u),s._cloneInto(a);return s.destroy(),a.destroy(),c.fill(0),Sg.fill(0),i.slice(0,r)}(e,function ij(e,t,n){return Bt.hash(e),void 0===n&&(n=new Uint8Array(e.outputLen)),zr(e,Vr(n),Vr(t))}(e,t,n),r,o))(Fn,e,t,"nip44-v2",76);return{encryption:n.subarray(0,32),nonce:n.subarray(32,44),auth:n.subarray(44,76)}},calcPadding(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("expected positive integer");if(e<=32)return 32;const t=1<<Math.floor(Math.log2(e-1))+1,n=t<=256?32:t/8;return n*(Math.floor((e-1)/n)+1)},pad(e){const t=Bn.encode(e),n=t.length;if(n<1||n>=Jo.v2.maxPlaintextSize)throw new Error("invalid plaintext length: must be between 1b and 64KB");const r=Jo.v2.calcPadding(n),o=new Uint8Array(r-n),i=new Uint8Array(2);return new DataView(i.buffer).setUint16(0,n),fo(i,t,o)},unpad(e){const t=new DataView(e.buffer).getUint16(0),n=e.subarray(2,2+t);if(0===t||n.length!==t||e.length!==2+Jo.v2.calcPadding(t))throw new Error("invalid padding");return _r.decode(n)}}};function y4(e,t,n={}){const r=n.version??2;if(2!==r)throw new Error("unknown encryption version "+r);const o=n.salt??qa(32);Dg(o,32);const i=Jo.v2.getMessageKeys(e,o),s=Jo.v2.pad(t),a=dS(i.encryption,i.nonce,s),c=zr(Fn,i.auth,a);return Gr.encode(fo(new Uint8Array([r]),o,a,c))}function v4(e,t){const n=Jo.v2;Dg(e,32);const r=t.length;if(r<n.minCiphertextSize||r>=n.maxCiphertextSize)throw new Error("invalid ciphertext length: "+r);if("#"===t[0])throw new Error("unknown encryption version");let o;try{o=Gr.decode(t)}catch(f){throw new Error("invalid base64: "+f.message)}const i=o.subarray(0,1)[0];if(2!==i)throw new Error("unknown encryption version "+i);const s=o.subarray(1,33),a=o.subarray(33,-32),c=o.subarray(-32),u=n.getMessageKeys(e,s);if(!function GB(e,t){if(e.length!==t.length)throw new Error("equalBytes: Different size of Uint8Arrays");let n=!0;for(let r=0;r<e.length;r++)n&&(n=e[r]===t[r]);return n}(zr(Fn,u.auth,a),c))throw new Error("invalid MAC");const d=dS(u.encryption,u.nonce,a);return n.unpad(d)}function b4(e){const{pathname:t,searchParams:n}=new URL(e),r=t,o=n.get("relay"),i=n.get("secret");if(!r||!o||!i)throw new Error("invalid connection string");return{pubkey:r,relay:o,secret:i}}function E4(e){return Bg.apply(this,arguments)}function Bg(){return Bg=z(function*({pubkey:e,secret:t,invoice:n}){const o=yield xS(t,e,JSON.stringify({method:"pay_invoice",params:{invoice:n}}));return _o({kind:23194,created_at:Math.round(Date.now()/1e3),content:o,tags:[["p",e]]},t)}),Bg.apply(this,arguments)}yt({},{makeNwcRequestEvent:()=>E4,parseConnectionString:()=>b4});var jg,kS={};yt(kS,{getZapEndpoint:()=>D4,makeZapReceipt:()=>I4,makeZapRequest:()=>C4,useFetchImplementation:()=>_4,validateZapRequest:()=>S4});try{jg=fetch}catch{}function _4(e){jg=e}function D4(e){return $g.apply(this,arguments)}function $g(){return $g=z(function*(e){try{let t="",{lud06:n,lud16:r}=JSON.parse(e.content);if(n){let{words:s}=wo.decode(n,1e3),a=wo.fromWords(s);t=_r.decode(a)}else{if(!r)return null;{let[s,a]=r.split("@");t=`https://${a}/.well-known/lnurlp/${s}`}}let i=yield(yield jg(t)).json();if(i.allowsNostr&&i.nostrPubkey)return i.callback}catch{}return null}),$g.apply(this,arguments)}function C4({profile:e,event:t,amount:n,relays:r,comment:o=""}){if(!n)throw new Error("amount not given");if(!e)throw new Error("profile not given");let i={kind:9734,created_at:Math.round(Date.now()/1e3),content:o,tags:[["p",e],["amount",n.toString()],["relays",...r]]};return t&&i.tags.push(["e",t]),i}function S4(e){let t;try{t=JSON.parse(e)}catch{return"Invalid zap request JSON."}if(!Tg(t))return"Zap request is not a valid Nostr event.";if(!Al(t))return"Invalid signature on zap request.";let n=t.tags.find(([i,s])=>"p"===i&&s);if(!n)return"Zap request doesn't have a 'p' tag.";if(!n[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let r=t.tags.find(([i,s])=>"e"===i&&s);return r&&!r[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":t.tags.find(([i,s])=>"relays"===i&&s)?null:"Zap request doesn't have a 'relays' tag."}function I4({zapRequest:e,preimage:t,bolt11:n,paidAt:r}){let i=JSON.parse(e).tags.filter(([a])=>"e"===a||"p"===a||"a"===a),s={kind:9735,created_at:Math.round(r.getTime()/1e3),content:"",tags:[...i,["bolt11",n],["description",e]]};return t&&s.tags.push(["preimage",t]),s}yt({},{getToken:()=>T4,unpackEventFromToken:()=>OS,validateEvent:()=>PS,validateToken:()=>M4});var NS="Nostr ";function T4(e,t,n){return Hg.apply(this,arguments)}function Hg(){return Hg=z(function*(e,t,n,r=!1){if(!e||!t)throw new Error("Missing loginUrl or httpMethod");const o=function pj(e=255){return{kind:e,content:"",tags:[],created_at:0}}(27235);o.tags=[["u",e],["method",t]],o.created_at=Math.round((new Date).getTime()/1e3);const i=yield n(o);return(r?NS:"")+Gr.encode(Bn.encode(JSON.stringify(i)))}),Hg.apply(this,arguments)}function M4(e,t,n){return Vg.apply(this,arguments)}function Vg(){return Vg=z(function*(e,t,n){const r=yield OS(e).catch(i=>{throw i});return yield PS(r,t,n).catch(i=>{throw i})}),Vg.apply(this,arguments)}function OS(e){return zg.apply(this,arguments)}function zg(){return zg=z(function*(e){if(!e)throw new Error("Missing token");e=e.replace(NS,"");const t=_r.decode(Gr.decode(e));if(!t||0===t.length||!t.startsWith("{"))throw new Error("Invalid token");return JSON.parse(t)}),zg.apply(this,arguments)}function PS(e,t,n){return qg.apply(this,arguments)}function qg(){return qg=z(function*(e,t,n){if(!e)throw new Error("Invalid nostr event");if(!Al(e))throw new Error("Invalid nostr event, signature invalid");if(27235!==e.kind)throw new Error("Invalid nostr event, kind invalid");if(!e.created_at)throw new Error("Invalid nostr event, created_at invalid");if(Math.round((new Date).getTime()/1e3)-e.created_at>60)throw new Error("Invalid nostr event, expired");const r=e.tags.find(i=>"u"===i[0]);if(1!==r?.length&&r?.[1]!==t)throw new Error("Invalid nostr event, url tag invalid");const o=e.tags.find(i=>"method"===i[0]);if(1!==o?.length&&o?.[1].toLowerCase()!==n.toLowerCase())throw new Error("Invalid nostr event, method tag invalid");return!0}),qg.apply(this,arguments)}class Xo{constructor(t){const{type:n,data:r}=_n.decode(t);if("nsec"===n)this.nostrSecret=t,this.privateKeyHex=r.toString(),this.publicKeyHex=Ig(this.privateKeyHex),this.nostrPublic=_n.npubEncode(this.publicKeyHex);else{if("npub"!==n)throw new Error("Invalid argument, NostrUser expect nsec or npub string");this.nostrPublic=t,this.publicKeyHex=r.toString(),this.nostrSecret=void 0,this.privateKeyHex=void 0}}static fromPubkey(t){return new Xo(_n.npubEncode(t))}toString(){return this.publicKeyHex}}let Fl=(()=>{class e{constructor(){this.SEARCH_GLOBAL_WANNACHAT_TIMEOUT_IN_MS=5e3,this.WANNACHAT_STATUS_DEFAULT_TIMEOUT_IN_MS=1e4}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=oe({token:e,factory:e.\u0275fac})}return e})(),Gg=(()=>{class e{constructor(n){this.globalConfigService=n}getCurrentTimestamp(){return Math.floor(Date.now()/1e3)}getExpirationTimestamp(n=this.globalConfigService.WANNACHAT_STATUS_DEFAULT_TIMEOUT_IN_MS){const o=Math.floor(Date.now()/1e3)+n;return String(o)}createEncryptedDirectMessage(n,r,o){var i=this;return z(function*(){const s=yield IS.encrypt(n.nostrSecret,r.nostrPublic,o),a={id:"",kind:er.EncryptedDirectMessage,content:s,pubkey:n.publicKeyHex,created_at:i.getCurrentTimestamp(),tags:[["p",r.publicKeyHex]]};a.id=Qo(a);const c=Rl(a,n.privateKeyHex);return Promise.resolve({sig:c,...a})})()}createWannaChatUserStatus(n){return this.createUserStatus(n,"wannachat",[["d","general"],["expiration",this.getExpirationTimestamp()],["t","wannachat"]])}createDisconnectedUserStatus(n){return this.createUserStatus(n,"disconnected")}createTypingUserStatus(n){return this.createUserStatus(n,"typing")}createChatingUserStatus(n,r){return this.createUserStatus(n,"chating",[["p",r.publicKeyHex]])}cleanUserStatus(n){return this.createUserStatus(n,"")}createUserStatus(n,r,o){let i=[["d","general"]];i=i.concat(o||[]),i.push(["t","omegle"]);const s={id:"",kind:er.UserStatuses,content:r,pubkey:n.publicKeyHex,created_at:this.getCurrentTimestamp(),tags:i};return s.id=Qo(s),{sig:Rl(s,n.privateKeyHex),...s}}static#e=this.\u0275fac=function(r){return new(r||e)(ee(Fl))};static#t=this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const Do=ce(893);var LS=ce(563),k4=ce(927);function FS(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,o])=>{t[r]=Array.isArray(o)?void 0===t[r]?[...o]:Array.from(new Set([...t[r],...o])):o})}),t}function US(e){return!(!function F4(e){return!!e.ids}(e.filter)||!function U4(e){const t=e.filter.ids;return!!t&&t.length===e.eventFirstSeen.size}(e))}function L4(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const[n,r]of Object.entries(e)){const o=t[n];if(!o)return!1;if(Array.isArray(r)&&Array.isArray(o)){const i=r;for(const s of o)if(!i.includes(s))return!1}else if(o!==r)return!1}return!0}ce(319);var BS=/^(\d+):([0-9A-Fa-f]+)(?::(.*))?$/,jS=class extends Do{subscriptions;req;debug;constructor(e,t){super(),this.subscriptions=e,this.debug=t||this.subscriptions[0].subscription.debug.extend("grouped");for(const n of e)this.handleSubscriptionClosure(n)}addSubscription(e){this.subscriptions.push(e),this.handleSubscriptionClosure(e)}eventReceived(e){for(const t of this.subscriptions)t.eventReceived(e)}eoseReceived(e){Array.from(this.subscriptions).forEach(function(){var n=z(function*(r){r.subscription.eoseReceived(e)});return function(r){return n.apply(this,arguments)}}())}handleSubscriptionClosure(e){e.subscription.on("close",()=>{const t=this.subscriptions.findIndex(n=>n.subscription===e.subscription);this.subscriptions.splice(t,1),this.subscriptions.length<=0&&this.emit("close")})}map(e){return this.subscriptions.map(e)}[Symbol.iterator](){let e=0;const t=this.subscriptions;return{next:()=>e<t.length?{value:t[e++],done:!1}:{value:null,done:!0}}}},$S=class{subscription;filters=[];ndkRelay;constructor(e,t,n){this.subscription=e,this.filters=t,this.ndkRelay=n}eventReceived(e){this.eventMatchesLocalFilter(e)&&this.subscription.eventReceived(e,this.ndkRelay,!1)}eventMatchesLocalFilter(e){const t=e.rawEvent();return this.filters.some(n=>yS(n,t))}},gs=class extends Do{url;scores;connectivity;subs;publisher;complaining=!1;debug;constructor(e){super(),this.url=e,this.scores=new Map,this.debug=LS(`ndk:relay:${e}`),this.connectivity=new class{ndkRelay;_status;relay;connectedAt;_connectionStats={attempts:0,success:0,durations:[]};debug;constructor(e){this.ndkRelay=e,this._status=3,this.relay=_S(this.ndkRelay.url),this.debug=this.ndkRelay.debug.extend("connectivity"),this.relay.on("notice",t=>this.handleNotice(t))}connect(){var e=this;return z(function*(){const t=()=>{e.updateConnectionStats.connected(),e._status=1,e.ndkRelay.emit("connect")},n=()=>{e.updateConnectionStats.disconnected(),1===e._status&&(e._status=3,e.handleReconnection()),e.ndkRelay.emit("disconnect")};try{e.updateConnectionStats.attempt(),e._status=0,e.relay.off("connect",t),e.relay.off("disconnect",n),e.relay.on("connect",t),e.relay.on("disconnect",n),yield e.relay.connect()}catch(r){throw e.debug("Failed to connect",r),e._status=3,r}})()}disconnect(){this._status=2,this.relay.close()}get status(){return this._status}isAvailable(){return 1===this._status}isFlapping(){const e=this._connectionStats.durations;if(e.length%3!=0)return!1;const n=e.reduce((s,a)=>s+a,0)/e.length,r=e.map(s=>Math.pow(s-n,2)).reduce((s,a)=>s+a,0)/e.length;return Math.sqrt(r)<1e3}handleNotice(e){var t=this;return z(function*(){(e.includes("oo many")||e.includes("aximum"))&&(t.disconnect(),setTimeout(()=>t.connect(),2e3),t.debug(t.relay.url,"Relay complaining?",e)),t.ndkRelay.emit("notice",t,e)})()}handleReconnection(e=0){if(this.isFlapping())return this.ndkRelay.emit("flapping",this,this._connectionStats),void(this._status=5);const t=this.connectedAt?Math.max(0,6e4-(Date.now()-this.connectedAt)):0;setTimeout(()=>{this._status=4,this.connect().then(()=>{this.debug("Reconnected")}).catch(n=>{this.debug("Reconnect failed",n),e<5?setTimeout(()=>{this.handleReconnection(e+1)},6e4):this.debug("Reconnect failed after 5 attempts")})},t)}updateConnectionStats={connected:()=>{this._connectionStats.success++,this._connectionStats.connectedAt=Date.now()},disconnected:()=>{this._connectionStats.connectedAt&&(this._connectionStats.durations.push(Date.now()-this._connectionStats.connectedAt),this._connectionStats.durations.length>100&&this._connectionStats.durations.shift()),this._connectionStats.connectedAt=void 0},attempt:()=>{this._connectionStats.attempts++}};get connectionStats(){return this._connectionStats}}(this),this.subs=new class{ndkRelay;delayedItems=new Map;delayedTimers=new Map;activeSubscriptions=new Map;activeSubscriptionsByGroupId=new Map;debug;groupingDebug;conn;constructor(e){this.ndkRelay=e,this.conn=e.connectivity,this.debug=e.debug.extend("subscriptions"),this.groupingDebug=e.debug.extend("grouping")}subscribe(e,t){const n=function P4(e){const t=[];for(const n of e){if(n.since||n.until)return null;const o=Object.keys(n||{}).sort().join("-");t.push(o)}return t.join("|")}(t),r=new $S(e,t,this.ndkRelay);if(!n||!e.isGroupable())return this.groupingDebug("No groupable ID for filters",t),void this.executeSubscriptions(n,new jS([r]),t);const o=this.activeSubscriptionsByGroupId.get(n);if(o&&function V4(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length&&L4(e[n],t[n]);n++)return e[n]}(o.filters,t))return void this.activeSubscriptions.get(o.sub)?.addSubscription(new $S(e,t,this.ndkRelay));let i=this.delayedItems.get(n);i?i.addSubscription(r):(i=new jS([r]),this.delayedItems.set(n,i),i.once("close",()=>{this.delayedItems.get(n)&&this.delayedItems.delete(n)}));const s=setTimeout(()=>{this.executeGroup(n,e)},e.opts.groupableDelay);this.delayedTimers.has(n)?this.delayedTimers.get(n).push(s):this.delayedTimers.set(n,[s])}executeGroup(e,t){const n=this.delayedItems.get(e);this.delayedItems.delete(e);const r=this.delayedTimers.get(e);if(this.delayedTimers.delete(e),r)for(const o of r)clearTimeout(o);if(n){const o=n.subscriptions[0].filters.length,i=[];for(let s=0;s<o;s++){const a=n.map(c=>c.filters[s]);i.push(FS(a))}this.executeSubscriptions(e,n,i)}}executeSubscriptions(e,t,n){if(this.conn.isAvailable())this.executeSubscriptionsConnected(e,t,n);else{const r=()=>{this.debug("new relay coming online for active subscription",{relay:this.ndkRelay.url,mergeFilters:FS}),this.executeSubscriptionsConnected(e,t,n)};this.ndkRelay.once("connect",r),t.once("close",()=>{this.ndkRelay.removeListener("connect",r)})}}executeSubscriptionsConnected(e,t,n){const r=[];for(const{subscription:s}of t)r.push(s);const o=function B4(e,t){const n=e.map(s=>s.subId).filter(Boolean),r=[],o=new Set,i=new Set;if(n.length>0)r.push(Array.from(new Set(n)).join(","));else{for(const s of t)for(const a of Object.keys(s))"kinds"===a?s.kinds?.forEach(c=>i.add(c)):o.add(a);i.size>0&&r.push("kinds:"+Array.from(i).join(",")),o.size>0&&r.push(Array.from(o).join(","))}return 1!==n.length&&r.push(Math.floor(999*Math.random()).toString()),r.join("-")}(r,n);t.req=n;const i=this.conn.relay.sub(n,{id:o});return this.activeSubscriptions.set(i,t),e&&this.activeSubscriptionsByGroupId.set(e,{filters:n,sub:i}),i.on("event",s=>{const a=new jt(void 0,s);a.relay=this.ndkRelay,this.activeSubscriptions.get(i)?.eventReceived(a)}),i.on("eose",()=>{this.activeSubscriptions.get(i)?.eoseReceived(this.ndkRelay)}),t.once("close",()=>{i.unsub(),this.activeSubscriptions.delete(i),e&&this.activeSubscriptionsByGroupId.delete(e)}),i}executedFilters(){const e=new Map;for(const[,t]of this.activeSubscriptions)e.set(t.req,t.map(n=>n.subscription));return e}}(this),this.publisher=new class{ndkRelay;constructor(e){this.ndkRelay=e}publish(e,t=2500){var n=this;return z(function*(){const r=()=>new Promise((c,u)=>{try{n.publishEvent(e,t).then(l=>c(l)).catch(l=>u(l))}catch(l){u(l)}}),o=new Promise((c,u)=>{setTimeout(()=>u(new Error("Timeout")),t)}),i=()=>{r().then(c=>s(c)).catch(c=>a(c))};let s,a;return 1===n.ndkRelay.status?Promise.race([r(),o]):Promise.race([new Promise((c,u)=>{s=c,a=u,n.ndkRelay.once("connect",i)}),o]).finally(()=>{n.ndkRelay.removeListener("connect",i)})})()}publishEvent(e,t){var n=this;return z(function*(){const r=yield e.toNostrEvent(),o=n.ndkRelay.connectivity.relay.publish(r);let i;const s=new Promise((c,u)=>{o.then(()=>{clearTimeout(i),n.ndkRelay.emit("published",e),c(!0)}).catch(l=>{clearTimeout(i),n.ndkRelay.debug("Publish failed",l,e.id),n.ndkRelay.emit("publish:failed",e,l),u(l)})});if(!t||e.isEphemeral())return s;const a=new Promise((c,u)=>{i=setTimeout(()=>{n.ndkRelay.debug("Publish timed out",e.rawEvent()),n.ndkRelay.emit("publish:failed",e,"Timeout"),u(new Error("Publish operation timed out"))},t)});return Promise.race([s,a])})()}}(this)}get status(){return this.connectivity.status}get connectionStats(){return this.connectivity.connectionStats}connect(){var e=this;return z(function*(){return e.connectivity.connect()})()}disconnect(){this.connectivity.disconnect()}subscribe(e,t){this.subs.subscribe(e,t)}publish(e,t=2500){var n=this;return z(function*(){return n.publisher.publish(e,t)})()}scoreSlowerEvent(e){}tagReference(e){const t=["r",this.url];return e&&t.push(e),t}referenceTags(){return[["r",this.url]]}activeSubscriptions(){return this.subs.executedFilters()}},tc=class{relays;debug;ndk;constructor(e,t){this.relays=e,this.ndk=t,this.debug=t.debug.extend("relayset")}addRelay(e){this.relays.add(e)}static fromRelayUrls(e,t){const n=new Set;for(const r of e){const o=t.pool.relays.get(r);if(o)n.add(o);else{const i=new gs(r);t.pool.useTemporaryRelay(i),n.add(i)}}return new tc(new Set(n),t)}publish(e,t){var n=this;return z(function*(){const r=new Set,o=e.isEphemeral(),i=Array.from(n.relays).map(s=>new Promise(a=>{s.publish(e,t).then(()=>{r.add(s),a()}).catch(c=>{o||n.debug("error publishing to relay",{relay:s.url,err:c}),a()})}));if(yield Promise.all(i),0===r.size&&!o)throw new Error("No relay was able to receive the event");return r})()}size(){return this.relays.size}};function W4(e,t){if(e.outboxTracker)return e.outboxTracker.data.get(t)?.writeRelays}var Q4=["wss://nos.lol","wss://relay.nostr.band","wss://relay.f7z.io","wss://relay.damus.io","wss://nostr.mom","wss://no.str.cr"],HS=class extends Do{ndk;zappedEvent;zappedUser;constructor(e){super(),this.ndk=e.ndk,this.zappedEvent=e.zappedEvent,this.zappedUser=e.zappedUser||this.ndk.getUser({hexpubkey:this.zappedEvent?.pubkey})}getZapEndpoint(){var e=this;return z(function*(){let t,n,r,o;if(e.zappedUser&&(e.zappedUser.profile||(yield e.zappedUser.fetchProfile()),t=(e.zappedUser.profile||{}).lud06,n=(e.zappedUser.profile||{}).lud16),n&&!n.startsWith("LNURL")){const[a,c]=n.split("@");r=`https://${c}/.well-known/lnurlp/${a}`}else if(t){const{words:a}=wo.decode(t,1e3),c=wo.fromWords(a);r=new TextDecoder("utf-8").decode(c)}if(!r)throw new Error("No zap endpoint found");const s=yield(yield fetch(r)).json();return s?.allowsNostr&&(s?.nostrPubkey||s?.nostrPubKey)&&(o=s.callback),o})()}createZapRequest(e,t,n,r,o){var i=this;return z(function*(){const s=yield i.getZapEndpoint();if(!s)throw new Error("No zap endpoint found");if(!i.zappedEvent&&!i.zappedUser)throw new Error("No zapped event or user found");const a=kS.makeZapRequest({profile:i.zappedUser.hexpubkey,event:null,amount:e,comment:t||"",relays:r??i.relays()});if(i.zappedEvent){const f=i.zappedEvent.referenceTags();a.tags.push(...f)}a.tags.push(["lnurl",s]);const c=new jt(i.ndk,a);n&&(c.tags=c.tags.concat(n)),yield c.sign(o);const u=yield c.toNostrEvent();return(yield(yield fetch(`${s}?`+new URLSearchParams({amount:e.toString(),nostr:JSON.stringify(u)}))).json()).pr})()}relays(){let e=[];return this.ndk?.pool?.relays&&(e=this.ndk.pool.urls()),e.length||(e=Q4),e}};function Wg(){return Wg=z(function*(e,t=[]){let o=[];const i=s=>{t.find(a=>a[0]===s[0]&&a[1]===s[1])||t.push(s)};return e=e.replace(/(@|nostr:)(npub|nprofile|note|nevent|naddr)[a-zA-Z0-9]+/g,s=>{try{const a=s.split(/(@|nostr:)/)[2],{type:c,data:u}=_n.decode(a);let l;switch(c){case"npub":l=["p",u];break;case"nprofile":l=["p",u.pubkey];break;case"note":o.push(new Promise(function(){var d=z(function*(f){i(["e",u,yield Zg(a),"mention"]),f()});return function(f){return d.apply(this,arguments)}}()));break;case"nevent":o.push(new Promise(function(){var d=z(function*(f){let{id:h,relays:p,author:g}=u;(!p||0===p.length)&&(p=[yield Zg(a)]),i(["e",h,p[0],"mention"]),g&&i(["p",g]),f()});return function(f){return d.apply(this,arguments)}}()));break;case"naddr":o.push(new Promise(function(){var d=z(function*(f){const h=[u.kind,u.pubkey,u.identifier].join(":");let p=u.relays??[];0===p.length&&(p=[yield Zg(a)]),i(["a",h,p[0],"mention"]),i(["p",u.pubkey]),f()});return function(f){return d.apply(this,arguments)}}()));break;default:return s}return l&&i(l),`nostr:${a}`}catch{return s}}),yield Promise.all(o),{content:e=e.replace(/#(\w+)/g,(s,a)=>{const c=["t",a];return t.find(u=>u[0]===c[0]&&u[1]===c[1])||t.push(c),s}),tags:t}}),Wg.apply(this,arguments)}function Zg(e){return Yg.apply(this,arguments)}function Yg(){return(Yg=z(function*(e){return""})).apply(this,arguments)}function X4(){if(void 0===this.kind)throw new Error("Kind not set");return this.kind>=1e4&&this.kind<2e4}function K4(){if(void 0===this.kind)throw new Error("Kind not set");return this.kind>=2e4&&this.kind<3e4}function e$(){if(void 0===this.kind)throw new Error("Kind not set");return this.kind>=3e4&&this.kind<4e4}function n$(e,t){return Qg.apply(this,arguments)}function Qg(){return Qg=z(function*(e,t){if(!this.ndk)throw new Error("No NDK instance found!");if(t||(yield this.ndk.assertSigner(),t=this.ndk.signer),!e){const n=this.getMatchingTags("p");if(1!==n.length)throw new Error("No recipient could be determined and no explicit recipient was provided");e=this.ndk.getUser({hexpubkey:n[0][1]})}this.content=yield t?.encrypt(e,this.content)}),Qg.apply(this,arguments)}function r$(e,t){return Jg.apply(this,arguments)}function Jg(){return Jg=z(function*(e,t){if(!this.ndk)throw new Error("No NDK instance found!");t||(yield this.ndk.assertSigner(),t=this.ndk.signer),e||(e=this.author),this.content=yield t?.decrypt(e,this.content)}),Jg.apply(this,arguments)}function o$(){return this.isParamReplaceable()?_n.naddrEncode({kind:this.kind,pubkey:this.pubkey,identifier:this.replaceableDTag(),relays:this.relay?[this.relay.url]:[]}):this.relay?_n.neventEncode({id:this.tagId(),relays:[this.relay.url],author:this.pubkey}):_n.noteEncode(this.tagId())}function i$(){return Xg.apply(this,arguments)}function Xg(){return Xg=z(function*(e=!0,t){if(!t&&e){if(!this.ndk)throw new Error("No NDK instance found");this.ndk.assertSigner(),t=this.ndk.signer}const n=new jt(this.ndk,{kind:s$(this),content:""});return n.tag(this),16===n.kind&&n.tags.push(["k",`${this.kind}`]),t&&(yield n.sign(t)),e&&(yield n.publish()),n}),Xg.apply(this,arguments)}function s$(e){return 1===e.kind?6:16}var jt=class extends Do{ndk;created_at;content="";tags=[];kind;id="";sig;pubkey="";_author=void 0;relay;constructor(e,t){super(),this.ndk=e,this.created_at=t?.created_at,this.content=t?.content||"",this.tags=t?.tags||[],this.id=t?.id||"",this.sig=t?.sig,this.pubkey=t?.pubkey||"",this.kind=t?.kind}rawEvent(){return{created_at:this.created_at,content:this.content,tags:this.tags,kind:this.kind,pubkey:this.pubkey,id:this.id,sig:this.sig}}set author(e){this.pubkey=e.hexpubkey,this._author=void 0}get author(){if(this._author)return this._author;if(!this.ndk)throw new Error("No NDK instance found");const e=this.ndk.getUser({hexpubkey:this.pubkey});return this._author=e,e}tag(e,t){const n=e.referenceTags();if(t&&n[0].push(t),this.tags.push(...n),e instanceof jt){const r=e.author;r&&this.pubkey!==r.hexpubkey&&this.tag(r);for(const o of e.getMatchingTags("p"))o[1]!==this.pubkey&&(this.tags.find(i=>"p"===i[0]&&i[1]===o[1])||this.tags.push(["p",o[1]]))}}toNostrEvent(e){var t=this;return z(function*(){if(!e&&""===t.pubkey){const i=yield t.ndk?.signer?.user();t.pubkey=i?.hexpubkey||""}t.created_at||(t.created_at=Math.floor(Date.now()/1e3));const n=t.rawEvent(),{content:r,tags:o}=yield t.generateTags();n.content=r||"",n.tags=o;try{t.id=Qo(n)}catch{}return t.id&&(n.id=t.id),t.sig&&(n.sig=t.sig),n})()}isReplaceable=X4.bind(this);isEphemeral=K4.bind(this);isParamReplaceable=e$.bind(this);encode=o$.bind(this);encrypt=n$.bind(this);decrypt=r$.bind(this);getMatchingTags(e){return this.tags.filter(t=>t[0]===e)}tagValue(e){const t=this.getMatchingTags(e);if(0!==t.length)return t[0][1]}removeTag(e){this.tags=this.tags.filter(t=>t[0]!==e)}sign(e){var t=this;return z(function*(){e?t.author=yield e.user():(t.ndk?.assertSigner(),e=t.ndk.signer),yield t.generateTags(),t.isReplaceable()&&(t.created_at=Math.floor(Date.now()/1e3));const n=yield t.toNostrEvent();return t.sig=yield e.sign(n),t.sig})()}publish(e,t){var n=this;return z(function*(){if(n.sig||(yield n.sign()),!n.ndk)throw new Error("NDKEvent must be associated with an NDK instance to publish");return e||(e=n.ndk.devWriteRelaySet||function G4(e,t){const n=new Set;return e.pool?.relays.forEach(r=>n.add(r)),new tc(n,e)}(n.ndk)),e.publish(n,t)})()}generateTags(){var e=this;return z(function*(){let t=[];const n=yield function J4(e){return Wg.apply(this,arguments)}(e.content,e.tags),r=n.content;if(t=n.tags,e.kind&&e.isParamReplaceable()&&!e.getMatchingTags("d")[0]){const i=[...Array(16)].map(()=>Math.random().toString(36)[2]).join("");t.push(["d",i])}return{content:r||"",tags:t}})()}muted(){const e=this.ndk?.mutedIds.get(this.pubkey);if(e&&"p"===e)return"author";const t=this.tagReference(),n=this.ndk?.mutedIds.get(t[1]);return n&&n===t[0]?"event":null}replaceableDTag(){if(this.kind&&this.kind>=3e4&&this.kind<=4e4){const e=this.getMatchingTags("d")[0];return e?e[1]:""}throw new Error("Event is not a parameterized replaceable event")}deduplicationKey(){return 0===this.kind||3===this.kind||this.kind&&this.kind>=1e4&&this.kind<2e4?`${this.kind}:${this.pubkey}`:this.tagId()}tagId(){return this.isParamReplaceable()?this.tagAddress():this.id}tagAddress(){if(!this.isParamReplaceable())throw new Error("This must only be called on replaceable events");const e=this.replaceableDTag();return`${this.kind}:${this.pubkey}:${e}`}tagReference(){return this.isParamReplaceable()?["a",this.tagAddress()]:["e",this.tagId()]}referenceTags(e){let t=[];return t=this.isParamReplaceable()?[["a",this.tagAddress()],["e",this.id]]:[["e",this.id]],e&&t.forEach(n=>n.push(e)),t.push(...this.author.referenceTags()),t}filter(){return this.isParamReplaceable()?{"#a":[this.tagId()]}:{"#e":[this.tagId()]}}zap(e,t,n,r,o){var i=this;return z(function*(){if(!i.ndk)throw new Error("No NDK instance found");o||i.ndk.assertSigner();const s=new HS({ndk:i.ndk,zappedEvent:i,zappedUser:r}),a=Array.from(i.ndk.pool.relays.keys());return yield s.createZapRequest(e,t,n,a,o)})()}delete(e){var t=this;return z(function*(){if(!t.ndk)throw new Error("No NDK instance found");t.ndk.assertSigner();const n=new jt(t.ndk,{kind:5,content:e||""});return n.tag(t),yield n.publish(),n})()}repost=i$.bind(this);react(e){var t=this;return z(function*(){if(!t.ndk)throw new Error("No NDK instance found");t.ndk.assertSigner();const n=new jt(t.ndk,{kind:7,content:e});return n.tag(t),yield n.publish(),n})()}},Kg=class extends jt{constructor(e,t){super(e,t),this.kind??=10002}static from(e){return new Kg(e.ndk,e.rawEvent())}get readRelayUrls(){return this.getMatchingTags("r").filter(e=>!e[2]||e[2]&&"read"===e[2]).map(e=>e[1])}set readRelayUrls(e){for(const t of e)this.tags.push(["r",t,"read"])}get writeRelayUrls(){return this.getMatchingTags("r").filter(e=>!e[2]||e[2]&&"write"===e[2]).map(e=>e[1])}set writeRelayUrls(e){for(const t of e)this.tags.push(["r",t,"write"])}get bothRelayUrls(){return this.getMatchingTags("r").filter(e=>!e[2]).map(e=>e[1])}set bothRelayUrls(e){for(const t of e)this.tags.push(["r",t])}get relays(){return this.getMatchingTags("r").map(e=>e[1])}},qS=(e=>(e.ONLY_CACHE="ONLY_CACHE",e.CACHE_FIRST="CACHE_FIRST",e.PARALLEL="PARALLEL",e.ONLY_RELAY="ONLY_RELAY",e))(qS||{}),a$={closeOnEose:!1,cacheUsage:"CACHE_FIRST",groupable:!0,groupableDelay:100},c$=class extends Do{subId;filters;opts;pool;relayFilters;relaySet;ndk;debug;eoseDebug;eventFirstSeen=new Map;eosesSeen=new Set;eventsPerRelay=new Map;lastEventReceivedAt;internalId;constructor(e,t,n,r,o){if(super(),this.ndk=e,this.pool=n?.pool||e.pool,this.opts={...a$,...n||{}},this.filters=t instanceof Array?t:[t],this.subId=o||n?.subId,this.internalId=Math.random().toString(36).substring(7),this.relaySet=r,this.debug=e.debug.extend(`subscription[${n?.subId??this.internalId}]`),this.eoseDebug=this.debug.extend("eose"),this.opts.closeOnEose||this.debug("Creating a permanent subscription",this.opts,JSON.stringify(this.filters)),"ONLY_CACHE"===this.opts.cacheUsage&&!this.opts.closeOnEose)throw new Error("Cannot use cache-only options with a persistent subscription")}get filter(){return this.filters[0]}isGroupable(){return this.opts?.groupable||!1}shouldQueryCache(){return"ONLY_RELAY"!==this.opts?.cacheUsage}shouldQueryRelays(){return"ONLY_CACHE"!==this.opts?.cacheUsage}shouldWaitForCache(){return this.opts.closeOnEose&&!!this.ndk.cacheAdapter?.locking&&"PARALLEL"!==this.opts.cacheUsage}start(){var e=this;return z(function*(){let t;e.shouldQueryCache()&&(t=e.startWithCache(),e.shouldWaitForCache()&&(yield t,US(e)))?e.emit("eose",e):e.shouldQueryRelays()?e.startWithRelays():e.emit("eose",e)})()}stop(){this.emit("close",this)}hasAuthorsFilter(){return this.filters.some(e=>e.authors?.length)}startWithCache(){var e=this;return z(function*(){if(e.ndk.cacheAdapter?.query){const t=e.ndk.cacheAdapter.query(e);e.ndk.cacheAdapter.locking&&(yield t)}})()}startWithRelays(){if(this.relaySet){this.relayFilters=new Map;for(const e of this.relaySet.relays)this.relayFilters.set(e.url,this.filters)}else this.relayFilters=function Y4(e,t){return function Z4(e,t){const n=new Map,r=new Set;if(t.forEach(o=>{o.authors&&o.authors.forEach(i=>r.add(i))}),r.size>0){const o=new Map;for(const i of r){const s=W4(e,i);s&&s.size>0?(e.debug(`Adding ${s.size} relays for ${i}`),s.forEach(a=>{const c=o.get(a)||[];c.push(i),o.set(a,c)})):e.explicitRelayUrls?.forEach(a=>{const c=o.get(a)||[];c.push(i),o.set(a,c)})}for(const i of o.keys())n.set(i,[]);for(const i of t)if(i.authors)for(const[s,a]of o.entries())n.set(s,[...n.get(s),{...i,authors:a}]);else for(const s of o.keys())n.set(s,[...n.get(s),i])}else e.explicitRelayUrls?.forEach(o=>{n.set(o,t)});return n}(e,t)}(this.ndk,this.filters);for(const[e,t]of this.relayFilters)this.pool.getRelay(e).subscribe(this,t)}eventReceived(e,t,n=!1){if(t&&(e.relay=t),t||(t=e.relay),!n&&t){let r=this.eventsPerRelay.get(t);if(r||(r=new Set,this.eventsPerRelay.set(t,r)),r.add(e.id),this.eventFirstSeen.has(e.id)){const i=Date.now()-(this.eventFirstSeen.get(e.id)||0);return t.scoreSlowerEvent(i),void this.emit("event:dup",e,t,i,this)}this.ndk.cacheAdapter&&this.ndk.cacheAdapter.setEvent(e,this.filters[0],t),this.eventFirstSeen.set(e.id,Date.now())}else this.eventFirstSeen.set(e.id,0);e.ndk||(e.ndk=this.ndk),this.emit("event",e,t,this),this.lastEventReceivedAt=Date.now()}eoseTimeout;eoseReceived(e){this.eosesSeen.add(e),this.eoseDebug(`received from ${e.url}`);let t=this.lastEventReceivedAt?Date.now()-this.lastEventReceivedAt:void 0;const n=this.eosesSeen.size===this.relayFilters?.size;if(US(this))this.emit("eose"),this.eoseDebug("Query fully filled"),this.opts?.closeOnEose&&this.stop();else if(n)this.emit("eose"),this.eoseDebug("All EOSEs seen"),this.opts?.closeOnEose&&this.stop();else{let o=1e3;const i=this.eosesSeen.size/this.relayFilters.size;if(this.eosesSeen.size>=2&&i>=.5){o*=1-i,this.eoseTimeout&&clearTimeout(this.eoseTimeout);const s=()=>{t=this.lastEventReceivedAt?Date.now()-this.lastEventReceivedAt:void 0,void 0!==t&&t<20?this.eoseTimeout=setTimeout(s,o):(this.emit("eose"),this.opts?.closeOnEose&&this.stop())};this.eoseTimeout=setTimeout(s,o)}}}};function u$(e,t){return em.apply(this,arguments)}function em(){return em=z(function*(e,t){if(!this.ndk)throw new Error("NDK not set");const n=yield this.ndk.fetchEvent({kinds:[3],authors:[this.hexpubkey]},e||{groupable:!1});if(n){const r=new Set;return n.tags.forEach(o=>{if("p"===o[0])try{r.add(o[1]),t&&this.ndk?.outboxTracker?.trackUsers([o[1]])}catch{}}),[...r].reduce((o,i)=>{const s=new en({hexpubkey:i});return s.ndk=this.ndk,o.add(s),o},new Set)}return new Set}),em.apply(this,arguments)}function d$(e){const t={};for(const[n,r]of Object.entries(e))switch(n){case"username":case"name":t.name=r;break;case"displayName":t.display_name=r;break;case"image":case"picture":t.picture=r;break;case"bio":case"about":t.about=r;break;default:t[n]=r}return JSON.stringify(t)}var en=class{ndk;profile;_npub;_pubkey;relayUrls=[];constructor(e){e.npub&&(this._npub=e.npub),e.hexpubkey&&(this._pubkey=e.hexpubkey),e.pubkey&&(this._pubkey=e.pubkey),e.relayUrls&&(this.relayUrls=e.relayUrls)}get npub(){if(!this._npub){if(!this._pubkey)throw new Error("hexpubkey not set");this._npub=_n.npubEncode(this.hexpubkey)}return this._npub}set npub(e){this._npub=e}get hexpubkey(){return this.pubkey}set hexpubkey(e){this._pubkey=e}get pubkey(){if(!this._pubkey){if(!this._npub)throw new Error("npub not set");this._pubkey=_n.decode(this.npub).data}return this._pubkey}set pubkey(e){this._pubkey=e}static fromNip05(e){return z(function*(){const t=yield Ng.queryProfile(e);if(t)return new en({hexpubkey:t.pubkey,relayUrls:t.relays})})()}fetchProfile(e){var t=this;return z(function*(){if(!t.ndk)throw new Error("NDK not set");t.profile||(t.profile={});let n=null;if(t.ndk.cacheAdapter&&t.ndk.cacheAdapter.fetchProfile&&"ONLY_RELAY"!==e?.cacheUsage){const o=yield t.ndk.cacheAdapter.fetchProfile(t.hexpubkey);if(o)return t.profile=o,o}!e&&t.ndk.cacheAdapter&&t.ndk.cacheAdapter.locking&&(n=yield t.ndk.fetchEvents({kinds:[0],authors:[t.hexpubkey]},{cacheUsage:"ONLY_CACHE",closeOnEose:!0,groupable:!1}),e={cacheUsage:"ONLY_RELAY",closeOnEose:!0,groupable:!0,groupableDelay:250}),(!n||0===n.size)&&(n=yield t.ndk.fetchEvents({kinds:[0],authors:[t.hexpubkey]},e));const r=Array.from(n).sort((o,i)=>o.created_at-i.created_at);return 0===r.length?null:(t.profile=function l$(e){const t={},n=JSON.parse(e.content);return Object.keys(n).forEach(r=>{switch(r){case"name":t.name=n.name;break;case"display_name":t.displayName=n.display_name;break;case"image":case"picture":t.image=n.image||n.picture;break;case"banner":t.banner=n.banner;break;case"bio":t.bio=n.bio;break;case"nip05":t.nip05=n.nip05;break;case"lud06":t.lud06=n.lud06;break;case"lud16":t.lud16=n.lud16;break;case"about":t.about=n.about;break;case"zapService":t.zapService=n.zapService;break;case"website":t.website=n.website;break;default:t[r]=n[r]}}),t}(r[0]),t.profile&&t.ndk.cacheAdapter&&t.ndk.cacheAdapter.saveProfile&&t.ndk.cacheAdapter.saveProfile(t.hexpubkey,t.profile),t.profile)})()}follows=u$.bind(this);relayList(){var e=this;return z(function*(){if(!e.ndk)throw new Error("NDK not set");const t=e.ndk.outboxPool||e.ndk.pool,n=new Set;for(const i of t.relays.values())n.add(i);const r=new tc(n,e.ndk),o=yield e.ndk.fetchEvent({kinds:[10002],authors:[e.hexpubkey]},{closeOnEose:!0,pool:t,groupable:!0,subId:`relay-list-${e.hexpubkey.slice(0,6)}`},r);return o?Kg.from(o):yield e.relayListFromKind3()})()}relayListFromKind3(){var e=this;return z(function*(){if(!e.ndk)throw new Error("NDK not set");const t=yield e.ndk.fetchEvent({kinds:[3],authors:[e.hexpubkey]});if(t)try{const n=JSON.parse(t.content),r=new Kg(e.ndk),o=new Set,i=new Set;for(const[s,a]of Object.entries(n))if(a){const c=a;c.write&&i.add(s),c.read&&o.add(s)}else o.add(s),i.add(s);return r.readRelayUrls=Array.from(o),r.writeRelayUrls=Array.from(i),r}catch{}})()}tagReference(){return["p",this.hexpubkey]}referenceTags(){return[["p",this.hexpubkey]]}publish(){var e=this;return z(function*(){if(!e.ndk)throw new Error("No NDK instance found");if(!e.profile)throw new Error("No profile available");e.ndk.assertSigner(),yield new jt(e.ndk,{kind:0,content:d$(e.profile)}).publish()})()}follow(e,t){var n=this;return z(function*(){if(!n.ndk)throw new Error("No NDK instance found");if(n.ndk.assertSigner(),t||(t=yield n.follows()),t.has(e))return!1;t.add(e);const r=new jt(n.ndk,{kind:3});for(const o of t)r.tag(o);return yield r.publish(),!0})()}validateNip05(e){var t=this;return z(function*(){if(!t.ndk)throw new Error("No NDK instance found");const n=yield Ng.queryProfile(e);return null===n?null:n.pubkey===t.hexpubkey})()}zap(e,t,n,r){var o=this;return z(function*(){if(!o.ndk)throw new Error("No NDK instance found");r||o.ndk.assertSigner();const i=new HS({ndk:o.ndk,zappedUser:o}),s=Array.from(o.ndk.pool.relays.keys());return yield i.createZapRequest(e,t,n,s,r)})()}},YS=class extends jt{_encryptedTags;encryptedTagsLength;constructor(e,t){super(e,t),this.kind??=30001}static from(e){return new YS(e.ndk,e.rawEvent())}get title(){const e=this.tagValue("title")||this.tagValue("name");return 3!==this.kind||e?1e4!==this.kind||e?10001!==this.kind||e?10002!==this.kind||e?e??this.tagValue("d"):"Relay Metadata":"Pin":"Mute":"Contacts"}set title(e){if(this.removeTag("title"),this.removeTag("name"),!e)throw new Error("Title cannot be empty");this.tags.push(["title",e])}get name(){const e=this.tagValue("name");return 3!==this.kind||e?1e4!==this.kind||e?10001!==this.kind||e?10002!==this.kind||e?e??this.tagValue("d"):"Relay Metadata":"Pin":"Mute":"Contacts"}set name(e){if(this.removeTag("name"),!e)throw new Error("Name cannot be empty");this.tags.push(["title",e])}get description(){return this.tagValue("description")}set description(e){e?this.tags.push(["description",e]):this.removeTag("description")}isEncryptedTagsCacheValid(){return!(!this._encryptedTags||this.encryptedTagsLength!==this.content.length)}encryptedTags(e=!0){var t=this;return z(function*(){if(e&&t.isEncryptedTagsCacheValid())return t._encryptedTags;if(!t.ndk)throw new Error("NDK instance not set");if(!t.ndk.signer)throw new Error("NDK signer not set");const n=yield t.ndk.signer.user();try{if(t.content.length>0)try{const r=yield t.ndk.signer.decrypt(n,t.content),o=JSON.parse(r);return o&&o[0]?(t.encryptedTagsLength=t.content.length,t._encryptedTags=o):(t.encryptedTagsLength=t.content.length,t._encryptedTags=[])}catch{console.log(`error decrypting ${t.content}`)}}catch{}return[]})()}validateTag(e){return!0}get items(){return this.tags.filter(e=>!["d","name","description"].includes(e[0]))}addItem(e,t=void 0,n=!1){var r=this;return z(function*(){if(!r.ndk)throw new Error("NDK instance not set");if(!r.ndk.signer)throw new Error("NDK signer not set");let o;if(e instanceof jt)o=e.referenceTags();else if(e instanceof en)o=e.referenceTags();else if(e instanceof gs)o=e.referenceTags();else{if(!Array.isArray(e))throw new Error("Invalid object type");o=[e]}if(t&&o[0].push(t),n){const i=yield r.ndk.signer.user(),s=yield r.encryptedTags();s.push(...o),r._encryptedTags=s,r.encryptedTagsLength=r.content.length,r.content=JSON.stringify(s),yield r.encrypt(i)}else r.tags.push(...o);r.created_at=Math.floor(Date.now()/1e3),r.emit("change")})()}removeItem(e,t){var n=this;return z(function*(){if(!n.ndk)throw new Error("NDK instance not set");if(!n.ndk.signer)throw new Error("NDK signer not set");if(t){const r=yield n.ndk.signer.user(),o=yield n.encryptedTags();o.splice(e,1),n._encryptedTags=o,n.encryptedTagsLength=n.content.length,n.content=JSON.stringify(o),yield n.encrypt(r)}else n.tags.splice(e,1);return n.created_at=Math.floor(Date.now()/1e3),n.emit("change"),n})()}},m$=YS,T$=class extends Do{data;ndk;debug;constructor(e){super(),this.ndk=e,this.debug=e.debug.extend("outbox-tracker"),this.data=new k4.LRUCache({maxSize:1e5,entryExpirationTimeInMS:5e3})}trackUsers(e){for(const t of e){const n=JS(t);if(this.data.has(n))continue;const r=this.track(t,"user"),o=t instanceof en?t:new en({hexpubkey:t});o.ndk=this.ndk,o.relayList().then(i=>{if(i){r.readRelays=new Set(i.readRelayUrls),r.writeRelays=new Set(i.writeRelayUrls);for(const s of r.readRelays)this.ndk.pool.blacklistRelayUrls.has(s)&&(this.debug(`removing blacklisted relay ${s} from read relays`),r.readRelays.delete(s));for(const s of r.writeRelays)this.ndk.pool.blacklistRelayUrls.has(s)&&(this.debug(`removing blacklisted relay ${s} from write relays`),r.writeRelays.delete(s));this.data.set(n,r),this.debug(`Adding ${r.readRelays.size} read relays and ${r.writeRelays.size} write relays for ${o.hexpubkey}`)}})}}track(e,t){const n=JS(e);t??=function M$(e){return e instanceof en?"user":"kind"}(e);let r=this.data.get(n);return r||(r=new class{type;relayUrlScores;readRelays;writeRelays;constructor(e){this.type=e,this.relayUrlScores=new Map,this.readRelays=new Set,this.writeRelays=new Set}}(t)),this.data.set(n,r),r}};function JS(e){return e instanceof en?e.hexpubkey:e}var XS=class extends Do{relays=new Map;blacklistRelayUrls;debug;temporaryRelayTimers=new Map;flappingRelays=new Set;backoffTimes=new Map;constructor(e=[],t=[],n,r){super(),this.debug=r??n.debug.extend("pool");for(const o of e){const i=new gs(o);this.addRelay(i,!1)}this.blacklistRelayUrls=new Set(t)}useTemporaryRelay(e,t=6e5){const n=this.relays.has(e.url);n||this.addRelay(e);const r=this.temporaryRelayTimers.get(e.url);if(r&&clearTimeout(r),!n||r){const o=setTimeout(()=>{this.removeRelay(e.url)},t);this.temporaryRelayTimers.set(e.url,o)}}addRelay(e,t=!0){const n=e.url;this.blacklistRelayUrls?.has(n)?this.debug(`Relay ${n} is blacklisted`):(e.on("notice",(r,o)=>this.emit("notice",r,o)),e.on("connect",()=>this.handleRelayConnect(n)),e.on("disconnect",()=>this.emit("relay:disconnect",e)),e.on("flapping",()=>this.handleFlapping(e)),this.relays.set(n,e),t&&e.connect().catch(r=>{this.debug(`Failed to connect to relay ${n}`,r)}))}removeRelay(e){const t=this.relays.get(e);if(t)return t.disconnect(),this.relays.delete(e),this.emit("relay:disconnect",t),!0;const n=this.temporaryRelayTimers.get(e);return n&&(clearTimeout(n),this.temporaryRelayTimers.delete(e)),!1}getRelay(e){let t=this.relays.get(e);return t||(t=new gs(e),this.addRelay(t)),t}handleRelayConnect(e){this.debug(`Relay ${e} connected`),this.emit("relay:connect",this.relays.get(e)),this.stats().connected===this.relays.size&&this.emit("connect")}connect(e){var t=this;return z(function*(){const n=[];t.debug(`Connecting to ${t.relays.size} relays${e?`, timeout ${e}...`:""}`);for(const r of t.relays.values())if(e){const o=new Promise((i,s)=>{setTimeout(()=>s(`Timed out after ${e}ms`),e)});n.push(Promise.race([r.connect(),o]).catch(i=>{t.debug(`Failed to connect to relay ${r.url}: ${i??"No reason specified"}`)}))}else n.push(r.connect());e&&setTimeout(()=>{const r=t.stats().connected===t.relays.size,o=t.stats().connected>0;!r&&o&&t.emit("connect")},e),yield Promise.all(n)})()}checkOnFlappingRelays(){if(this.flappingRelays.size/this.relays.size>=.8)for(const n of this.flappingRelays)this.backoffTimes.set(n,0)}handleFlapping(e){this.debug(`Relay ${e.url} is flapping`);let t=this.backoffTimes.get(e.url)||5e3;t*=2,this.backoffTimes.set(e.url,t),this.debug(`Backoff time for ${e.url} is ${t}ms`),setTimeout(()=>{this.debug(`Attempting to reconnect to ${e.url}`),e.connect(),this.checkOnFlappingRelays()},t),e.disconnect(),this.emit("flapping",e)}size(){return this.relays.size}stats(){const e={total:0,connected:0,disconnected:0,connecting:0};for(const t of this.relays.values())e.total++,1===t.status?e.connected++:3===t.status?e.disconnected++:0===t.status&&e.connecting++;return e}connectedRelays(){return Array.from(this.relays.values()).filter(e=>1===e.status)}urls(){return Array.from(this.relays.keys())}},R$=["wss://purplepag.es","wss://relay.snort.social"],k$=["wss://brb.io"],N$=class extends Do{explicitRelayUrls;pool;outboxPool;_signer;_activeUser;cacheAdapter;debug;devWriteRelaySet;outboxTracker;mutedIds;autoConnectUserRelays=!0;autoFetchUserMutelist=!0;constructor(e={}){super(),this.debug=e.debug||LS("ndk"),this.explicitRelayUrls=e.explicitRelayUrls,this.pool=new XS(e.explicitRelayUrls||[],e.blacklistRelayUrls,this),this.debug(`Starting with explicit relays: ${JSON.stringify(this.explicitRelayUrls)}`),this.autoConnectUserRelays=e.autoConnectUserRelays??!0,this.autoFetchUserMutelist=e.autoFetchUserMutelist??!0,e.enableOutboxModel&&(this.outboxPool=new XS(e.outboxRelayUrls||R$,e.blacklistRelayUrls||k$,this,this.debug.extend("outbox-pool")),this.outboxTracker=new T$(this)),this.signer=e.signer,this.cacheAdapter=e.cacheAdapter,this.mutedIds=e.mutedIds||new Map,e.devWriteRelayUrls&&(this.devWriteRelaySet=tc.fromRelayUrls(e.devWriteRelayUrls,this))}toJSON(){return{relayCount:this.pool.relays.size}.toString()}get activeUser(){return this._activeUser}set activeUser(e){var t=this;const n=this._activeUser!==e;if(this._activeUser=e,e&&n){const r=function(){var c=z(function*(u){const l=yield u.relayList();if(l){t.debug("Connecting to user relays",{npub:u.npub,relays:l.relays});for(const d of l.relays){let f=t.pool.relays.get(d);f||(f=new gs(d),t.pool.addRelay(f))}}else t.debug("No relay list found for user",{npub:u.npub})});return function(l){return c.apply(this,arguments)}}(),o=function(){var c=z(function*(u){const l=yield t.fetchEvents([{kinds:[1e4],authors:[u.pubkey]},{kinds:[3e4],authors:[u.pubkey],"#d":["mute"],limit:1}]);if(l)for(const d of l){const f=m$.from(d);for(const h of f.items)t.mutedIds.set(h[1],h[0])}else t.debug("No mute list found for user",{npub:u.npub})});return function(l){return c.apply(this,arguments)}}(),i=[];this.autoConnectUserRelays&&i.push(r),this.autoFetchUserMutelist&&i.push(o);const s=function(){var c=z(function*(u){for(const l of i)yield l(u)});return function(l){return c.apply(this,arguments)}}(),a=this.outboxPool||this.pool;a.connectedRelays.length>0?s(e):(this.debug("Waiting for connection to main relays"),a.once("relay:connect",c=>{this.debug("New relay came online",c),s(e)}))}else e||(this.mutedIds=new Map)}get signer(){return this._signer}set signer(e){this._signer=e,this.debug("setting signer",this.autoConnectUserRelays),e?.user().then(t=>{t.ndk=this,this.activeUser=t})}connect(e){var t=this;return z(function*(){const n=[t.pool.connect(e)];return t.outboxPool&&n.push(t.outboxPool.connect(e)),t.debug("Connecting to relays",{timeoutMs:e}),Promise.allSettled(n).then(()=>{})})()}getUser(e){const t=new en(e);return t.ndk=this,t}subscribe(e,t,n,r=!0){const o=new c$(this,e,t,n);if(n)for(const i of n.relays)this.pool.useTemporaryRelay(i);if(this.outboxPool&&o.hasAuthorsFilter()){const i=o.filters.filter(s=>s.authors&&s.authors?.length>0).map(s=>s.authors).flat();this.outboxTracker?.trackUsers(i)}return r&&o.start(),o}publish(e,t,n){var r=this;return z(function*(){return r.debug("Deprecated: Use `event.publish()` instead"),e.publish(t,n)})()}fetchEvent(e,t,n){var r=this;return z(function*(){let o;if(!n&&"string"==typeof e&&!function $4(e){return null!==e.match(BS)}(e)){const i=function H4(e){try{const t=_n.decode(e);if(["naddr","nevent"].includes(t?.type)){const n=t.data;if(n?.relays)return n.relays.map(r=>new gs(r))}}catch{}return[]}(e);i.length>0&&(n=function A$(e,t){const n=t.connectedRelays();if(!Array.from(e.relays).some(o=>n.map(i=>i.url).includes(o.url)))for(const o of n)e.addRelay(o);if(0===n.length)for(const o of t.relays.values())e.addRelay(o);return e}(n=new tc(new Set(i),r),r.pool))}if(o="string"==typeof e?function j4(e){let t;if(e.match(BS)){const[n,r,o]=e.split(":"),i={authors:[r],kinds:[parseInt(n)]};return o&&(i["#d"]=[o]),i}try{switch(t=_n.decode(e),t.type){case"nevent":return{ids:[t.data.id]};case"note":return{ids:[t.data]};case"naddr":return{authors:[t.data.pubkey],"#d":[t.data.identifier],kinds:[t.data.kind]}}}catch{}return{ids:[e]}}(e):e,!o)throw new Error(`Invalid filter: ${JSON.stringify(e)}`);return new Promise(i=>{const s=r.subscribe(o,{...t||{},closeOnEose:!0},n,!1);s.on("event",a=>{a.ndk=r,i(a)}),s.on("eose",()=>{i(null)}),s.start()})})()}fetchEvents(e,t,n){var r=this;return z(function*(){return new Promise(o=>{const i=new Map,s=r.subscribe(e,{...t||{},closeOnEose:!0},n,!1),a=c=>{const u=c.deduplicationKey(),l=i.get(u);l&&(c=function I$(e,t){return e.created_at>t.created_at?e:t}(l,c)),c.ndk=r,i.set(u,c)};s.on("event",a),s.on("event:dup",a),s.on("eose",()=>{o(new Set(i.values()))}),s.start()})})()}assertSigner(){if(!this.signer)throw this.emit("signerRequired"),new Error("Signer required")}};const O$=[...new Set(["wss://relay.damus.io","wss://nos.lol","wss://relay.snort.social","wss://nostr-pub.wellorder.net","wss://offchain.pub","wss://relay.shitforce.one","wss://yabu.me","wss://nostr.vulpem.com","wss://nostrich.friendship.tw","wss://n.xmr.se","wss://nostr-1.nbo.angani.co","wss://eden.nostr.land","wss://feeds.nostr.band","wss://nostr.wine","wss://e.nos.lol","wss://nostrue.com","wss://nostr.mom","wss://nostr.fmt.wiz.biz","wss://relay.nostrati.com","wss://relay.nostr.com.au","wss://eden.nostr.land","wss://nostr.fmt.wiz.biz","wss://relay.damus.io","wss://nostr-pub.wellorder.net","wss://offchain.pub","wss://nos.lol","wss://relay.snort.social","wss://soloco.nl","wss://eden.nostr.land","wss://nostr.fmt.wiz.biz","wss://relay.damus.io","wss://nostr-pub.wellorder.net","wss://offchain.pub","wss://nos.lol","wss://relay.snort.social","wss://soloco.nl","wss://relay.shitforce.one","wss://yabu.me","wss://nostr.vulpem.com","wss://nostrich.friendship.tw","wss://n.xmr.se","wss://nostr-1.nbo.angani.co","wss://eden.nostr.land","wss://feeds.nostr.band","wss://nostr.wine","wss://e.nos.lol","wss://nostrue.com","wss://nostr.mom","wss://nostr.fmt.wiz.biz","wss://relay.nostrati.com","wss://relay.nostr.com.au"])];let Ul=(()=>{class e{static#e=this.instance=null;constructor(){return this.ndk=new N$({explicitRelayUrls:O$}),e.instance||(e.instance=this),e.instance}subscribe(n){const r=this.ndk.subscribe(n,{cacheUsage:qS.CACHE_FIRST}),o=new ot,i=new ot;return i.subscribe(()=>{r.stop(),i.unsubscribe()}),o.asObservable().pipe(hD(i)),r.eventReceived=s=>o.next(s),o.asObservable()}request(n){var r=this;return z(function*(){const o=yield r.ndk.fetchEvents(n);return Promise.resolve([...o])})()}publish(n){var r=this;return z(function*(){const o=new jt(r.ndk);return Object.assign(o,n),yield o.publish(),Promise.resolve()})()}static#t=this.\u0275fac=function(r){return new(r||e)};static#n=this.\u0275prov=oe({token:e,factory:e.\u0275fac})}return e})(),KS=(()=>{class e{constructor(n,r){this.config=n,this.nostrService=r}getProfileStatus(n){return this.nostrService.request([{kinds:[+er.UserStatuses],authors:n}])}getRecentOmegleStatus(){const n=(new Date).getTime()/1e3-this.config.WANNACHAT_STATUS_DEFAULT_TIMEOUT_IN_MS;return this.nostrService.request([{kinds:[Number(er.UserStatuses)],"#t":["omegle"],since:n}])}listenUpdatedProfileStatus(n){return this.nostrService.subscribe([{authors:[n],kinds:[Number(er.UserStatuses)],since:Math.floor((new Date).getTime()/1e3),limit:1}])}listenChatingResponse(n){return this.nostrService.subscribe([{kinds:[Number(er.UserStatuses)],"#t":["chating"],"#p":[n.publicKeyHex],since:(new Date).getTime()/1e3-5}])}listenNewWannaChatStatus(){return this.nostrService.subscribe([{kinds:[Number(er.UserStatuses)],"#t":["wannachat"],since:(new Date).getTime()/1e3}])}listenDirectMessage(n){return this.nostrService.subscribe([{kinds:[+er.EncryptedDirectMessage],authors:[n]}])}listenChatInvite(n){return this.nostrService.subscribe([{kinds:[+er.EncryptedDirectMessage],"#p":[n]}])}static#e=this.\u0275fac=function(r){return new(r||e)(ee(Fl),ee(Ul))};static#t=this.\u0275prov=oe({token:e,factory:e.\u0275fac})}return e})(),eI=(()=>{class e{constructor(n,r,o,i){this.nostrEventFactory=n,this.globalConfigService=r,this.omegleNostr=o,this.nostrService=i}publish(n){return this.nostrService.publish(n)}searchStranger(n){var r=this;return z(function*(){const o=yield r.listenGlobalWannaChatStatus();if(o){yield r.inviteToChating(n,o);const s=yield r.listenWannaChatConfirmation(o.pubkey,n);if(s)return Promise.resolve(Xo.fromPubkey(s.pubkey));r.disconnect(n)}r.publishWannaChatStatus(n);const i=yield r.listenWannaChatRequest(n);return Promise.resolve(Xo.fromPubkey(i.pubkey))})()}inviteToChating(n,r){const o=Xo.fromPubkey(r.pubkey);return this.publishChatInviteStatus(n,o)}listenWannaChatRequest(n){return function A4(e,t){const n="object"==typeof t;return new Promise((r,o)=>{const i=new Le({next:s=>{r(s),i.unsubscribe()},error:o,complete:()=>{n?r(t.defaultValue):o(new Sa)}});e.subscribe(i)})}(this.omegleNostr.listenChatingResponse(n))}listenWannaChatConfirmation(n,r){return new Promise((o,i)=>{let s=0;const a=this.omegleNostr.listenUpdatedProfileStatus(n).subscribe(c=>{clearTimeout(s);const u=this.checkEventIsWannaChatConfirmation(c,r);o(u?c:null)});s=+setTimeout(()=>{a.unsubscribe(),o(null)},this.globalConfigService.SEARCH_GLOBAL_WANNACHAT_TIMEOUT_IN_MS)})}checkEventIsWannaChatConfirmation(n,r){return n.tags.filter(([s])=>"p"===s).map(([,s])=>s).at(0)===r.publicKeyHex}listenGlobalWannaChatStatus(){var n=this;return z(function*(){const r=yield n.omegleNostr.getRecentOmegleStatus(),o=n.searchWannaChatEventStatus(r);return o?Promise.resolve(o):new Promise(i=>{let s=0;const a=n.omegleNostr.listenNewWannaChatStatus().subscribe(c=>{clearTimeout(s),i(c)});s=+setTimeout(()=>{a.unsubscribe(),i(null)},n.globalConfigService.SEARCH_GLOBAL_WANNACHAT_TIMEOUT_IN_MS)})})()}searchWannaChatEventStatus(n){const r={};n.forEach(i=>{r[i.pubkey]||(r[i.pubkey]=[]),r[i.pubkey].push(i)}),Object.keys(r).forEach(i=>{r[i]=r[i].sort((s,a)=>(a.created_at||0)-(s.created_at||0))});const o=Object.values(r).find(i=>i[0].kind===er.UserStatuses&&"wannachat"===i[0].content);return o&&o[0]||null}publishWannaChatStatus(n){const r=this.nostrEventFactory.createWannaChatUserStatus(n);return this.nostrService.publish(r)}publishChatInviteStatus(n,r){const o=this.nostrEventFactory.createChatingUserStatus(n,r);return this.nostrService.publish(o)}connect(){return new Xo(function uj(){return dn(hs.utils.randomPrivateKey())}())}disconnect(n){const r=this.nostrEventFactory.createDisconnectedUserStatus(n);return this.nostrService.publish(r)}static#e=this.\u0275fac=function(r){return new(r||e)(ee(Gg),ee(Fl),ee(KS),ee(Ul))};static#t=this.\u0275prov=oe({token:e,factory:e.\u0275fac})}return e})(),tI=(()=>{class e{constructor(n,r){this.nostrEventFactory=n,this.nostrService=r}sendMessage(n,r,o){var i=this;return z(function*(){const s=yield i.nostrEventFactory.createEncryptedDirectMessage(n,r,o);return i.nostrService.publish(s)})()}isTyping(n){const r=this.nostrEventFactory.createTypingUserStatus(n);return this.nostrService.publish(r)}stopTyping(n){const r=this.nostrEventFactory.cleanUserStatus(n);return this.nostrService.publish(r)}static#e=this.\u0275fac=function(r){return new(r||e)(ee(Gg),ee(Ul))};static#t=this.\u0275prov=oe({token:e,factory:e.\u0275fac})}return e})(),P$=(()=>{class e{constructor(){this.authorTypes={[Va.STRANGE]:"Stranger",[Va.YOU]:"You"}}transform(n){return this.authorTypes[n]}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275pipe=Ht({name:"author",type:e,pure:!0})}return e})();function L$(e,t){if(1&e&&(Yt(0,"div",16)(1,"span"),Pr(2),function nE(e,t){const n=Ue();let r;const o=e+Re;n.firstCreatePass?(r=function zN(e,t){if(t)for(let n=t.length-1;n>=0;n--){const r=t[n];if(e===r.name)return r}}(t,n.pipeRegistry),n.data[o]=r,r.onDestroy&&(n.destroyHooks??=[]).push(o,r.onDestroy)):r=n.data[o];const i=r.factory||(r.factory=Io(r.type)),a=on(le);try{const c=_c(!1),u=i();return _c(c),function _R(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}(n,T(),o,u),u}finally{on(a)}}(3,"author"),wn(),Yt(4,"span",17),Pr(5),wn()()),2&e){const n=t.$implicit,r=ca();Wn(1),th("author-stranger",n.author===r.AUTHOR_STRANGE)("author-you",n.author===r.AUTHOR_YOU),Wn(1),bu("",rE(3,6,n.author),": "),Wn(3),wu(n.text)}}function F$(e,t){if(1&e){const n=aa();Yt(0,"button",18),oo("click",function(){return li(n),di(ca().findStranger())}),Pr(1," Start "),wn()}}function U$(e,t){if(1&e){const n=aa();Yt(0,"button",19),oo("click",function(){li(n);const o=ca();return di(o.currentState=o.STATE_UP_TO_DISCONNECT)}),Pr(1," Stop "),wn()}}function B$(e,t){if(1&e){const n=aa();Yt(0,"button",20),oo("click",function(){return li(n),di(ca().disconnect())}),Pr(1," Really? "),wn()}}const j$=[{path:"chat",component:(()=>{class e{constructor(n,r){this.findStrangerProxy=n,this.talkToStrangerProxy=r,this.STATE_CONNECTED=Ho.CONNECTED,this.STATE_UP_TO_DISCONNECT=Ho.UP_TO_DISCONNECT,this.STATE_DISCONNECTED=Ho.DISCONNECTED,this.AUTHOR_STRANGE=Va.STRANGE,this.AUTHOR_YOU=Va.YOU,this.TYPING_TIMEOUT=3e3,this.typingTimeoutId=0,this.currentState=Ho.DISCONNECTED,this.currentOnline=0,this.you=null,this.stranger=null,this.messages=[]}findStranger(){this.you=this.findStrangerProxy.connect(),this.findStrangerProxy.searchStranger(this.you).then(n=>this.startConversation(n)).catch(n=>console.error(n))}disconnect(){return this.you?this.findStrangerProxy.disconnect(this.you).then(()=>(this.currentState=Ho.DISCONNECTED,Promise.resolve())):Promise.resolve()}startConversation(n){this.stranger=n,this.currentState=Ho.CONNECTED}sendMessage(n){const r=this.you,o=this.stranger;r&&o&&this.talkToStrangerProxy.sendMessage(r,o,n)}onTyping(){const n=this.you;n&&(this.talkToStrangerProxy.isTyping(n),clearTimeout(this.typingTimeoutId),this.typingTimeoutId=Number(setTimeout(()=>{this.talkToStrangerProxy.stopTyping(n)},this.TYPING_TIMEOUT)))}static#e=this.\u0275fac=function(r){return new(r||e)(le(eI),le(tI))};static#t=this.\u0275cmp=dc({type:e,selectors:[["omg-chat"]],decls:19,vars:7,consts:[[1,"navbar"],["src","/omegle-nostr/assets/logo.png","alt","logo",1,"logo"],[1,"description"],[1,"online"],[1,"main"],[1,"conversation"],["conversation",""],["class","chat",4,"ngFor","ngForOf"],["novalidate","","autocomplete","off",1,"form",3,"submit"],["type","button","class","btn start bottom-left-radius",3,"click",4,"ngIf"],["type","button","class","btn bottom-left-radius",3,"click",4,"ngIf"],["type","button","class","btn bottom-left-radius bold",3,"click",4,"ngIf"],["name","text",1,"textarea",3,"keydown.enter","keydown"],["messageField",""],["type","submit",1,"btn","bottom-right-radius"],["send",""],[1,"chat"],[1,"text"],["type","button",1,"btn","start","bottom-left-radius",3,"click"],["type","button",1,"btn","bottom-left-radius",3,"click"],["type","button",1,"btn","bottom-left-radius","bold",3,"click"]],template:function(r,o){if(1&r){const i=aa();Yt(0,"section",0),sa(1,"img",1),Yt(2,"h2",2),Pr(3,"Talk to strangers!"),wn(),Yt(4,"h2",3),Pr(5),wn()(),Yt(6,"main",4)(7,"section",5,6),ia(9,L$,6,8,"div",7),wn(),Yt(10,"form",8),oo("submit",function(){li(i);const a=Wf(15);return di(o.sendMessage(a.value))}),ia(11,F$,2,0,"button",9),ia(12,U$,2,0,"button",10),ia(13,B$,2,0,"button",11),Yt(14,"textarea",12,13),oo("keydown.enter",function(){li(i);const a=Wf(15);return di(o.sendMessage(a.value))})("keydown",function(){return o.onTyping()}),wn(),Yt(16,"button",14,15),Pr(18," Send "),wn()()()}2&r&&(Wn(5),wu(o.currentOnline),Wn(4),qi("ngForOf",o.messages),Wn(2),qi("ngIf",o.currentState===o.STATE_DISCONNECTED),Wn(1),qi("ngIf",o.currentState===o.STATE_CONNECTED),Wn(1),qi("ngIf",o.currentState===o.STATE_UP_TO_DISCONNECT),Wn(1),ta("disabled",o.currentState===o.STATE_DISCONNECTED?"disabled":null),Wn(2),ta("disabled",o.currentState===o.STATE_DISCONNECTED?"disabled":null))},dependencies:[O_,L_,P$]})}return e})()},{path:"",redirectTo:"chat",pathMatch:"full"}];let $$=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=zn({type:e});static#n=this.\u0275inj=xn({imports:[pC.forRoot(j$,{useHash:!0}),pC]})}return e})(),H$=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275cmp=dc({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(r,o){1&r&&sa(0,"router-outlet")},dependencies:[Np]})}return e})(),V$=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=zn({type:e});static#n=this.\u0275inj=xn({imports:[_a]})}return e})(),z$=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=zn({type:e});static#n=this.\u0275inj=xn({providers:[Ul,Gg],imports:[_a]})}return e})(),q$=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=zn({type:e});static#n=this.\u0275inj=xn({providers:[Fl],imports:[_a]})}return e})(),G$=(()=>{class e{constructor(){}getAuthorFromEvent(n){return new Xo(_n.npubEncode(n.pubkey))}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=oe({token:e,factory:e.\u0275fac})}return e})(),W$=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=zn({type:e});static#n=this.\u0275inj=xn({providers:[KS,eI,tI,G$],imports:[_a]})}return e})(),Z$=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=zn({type:e,bootstrap:[H$]});static#n=this.\u0275inj=xn({imports:[V$,dF,$$,q$,W$,z$]})}return e})();uF().bootstrapModule(Z$).catch(e=>console.error(e))},893:vt=>{"use strict";var N=Object.prototype.hasOwnProperty,ce="~";function de(){}function j(H,F,G){this.fn=H,this.context=F,this.once=G||!1}function Se(H,F,G,B,X){if("function"!=typeof G)throw new TypeError("The listener must be a function");var te=new j(G,B||H,X),V=ce?ce+F:F;return H._events[V]?H._events[V].fn?H._events[V]=[H._events[V],te]:H._events[V].push(te):(H._events[V]=te,H._eventsCount++),H}function w(H,F){0==--H._eventsCount?H._events=new de:delete H._events[F]}function x(){this._events=new de,this._eventsCount=0}Object.create&&(de.prototype=Object.create(null),(new de).__proto__||(ce=!1)),x.prototype.eventNames=function(){var G,B,F=[];if(0===this._eventsCount)return F;for(B in G=this._events)N.call(G,B)&&F.push(ce?B.slice(1):B);return Object.getOwnPropertySymbols?F.concat(Object.getOwnPropertySymbols(G)):F},x.prototype.listeners=function(F){var B=this._events[ce?ce+F:F];if(!B)return[];if(B.fn)return[B.fn];for(var X=0,te=B.length,V=new Array(te);X<te;X++)V[X]=B[X].fn;return V},x.prototype.listenerCount=function(F){var B=this._events[ce?ce+F:F];return B?B.fn?1:B.length:0},x.prototype.emit=function(F,G,B,X,te,V){var ue=ce?ce+F:F;if(!this._events[ue])return!1;var wt,_e,Y=this._events[ue],gt=arguments.length;if(Y.fn){switch(Y.once&&this.removeListener(F,Y.fn,void 0,!0),gt){case 1:return Y.fn.call(Y.context),!0;case 2:return Y.fn.call(Y.context,G),!0;case 3:return Y.fn.call(Y.context,G,B),!0;case 4:return Y.fn.call(Y.context,G,B,X),!0;case 5:return Y.fn.call(Y.context,G,B,X,te),!0;case 6:return Y.fn.call(Y.context,G,B,X,te,V),!0}for(_e=1,wt=new Array(gt-1);_e<gt;_e++)wt[_e-1]=arguments[_e];Y.fn.apply(Y.context,wt)}else{var Ge,qe=Y.length;for(_e=0;_e<qe;_e++)switch(Y[_e].once&&this.removeListener(F,Y[_e].fn,void 0,!0),gt){case 1:Y[_e].fn.call(Y[_e].context);break;case 2:Y[_e].fn.call(Y[_e].context,G);break;case 3:Y[_e].fn.call(Y[_e].context,G,B);break;case 4:Y[_e].fn.call(Y[_e].context,G,B,X);break;default:if(!wt)for(Ge=1,wt=new Array(gt-1);Ge<gt;Ge++)wt[Ge-1]=arguments[Ge];Y[_e].fn.apply(Y[_e].context,wt)}}return!0},x.prototype.on=function(F,G,B){return Se(this,F,G,B,!1)},x.prototype.once=function(F,G,B){return Se(this,F,G,B,!0)},x.prototype.removeListener=function(F,G,B,X){var te=ce?ce+F:F;if(!this._events[te])return this;if(!G)return w(this,te),this;var V=this._events[te];if(V.fn)V.fn===G&&(!X||V.once)&&(!B||V.context===B)&&w(this,te);else{for(var ue=0,Y=[],gt=V.length;ue<gt;ue++)(V[ue].fn!==G||X&&!V[ue].once||B&&V[ue].context!==B)&&Y.push(V[ue]);Y.length?this._events[te]=1===Y.length?Y[0]:Y:w(this,te)}return this},x.prototype.removeAllListeners=function(F){var G;return F?this._events[G=ce?ce+F:F]&&w(this,G):(this._events=new de,this._eventsCount=0),this},x.prototype.off=x.prototype.removeListener,x.prototype.addListener=x.prototype.on,x.prefixed=ce,x.EventEmitter=x,vt.exports=x},845:(vt,N)=>{"use strict";function ce(_){if(!Number.isSafeInteger(_))throw new Error(`Wrong integer: ${_}`)}function de(..._){const S=(re,W)=>De=>re(W(De));return{encode:Array.from(_).reverse().reduce((re,W)=>re?S(re,W.encode):W.encode,void 0),decode:_.reduce((re,W)=>re?S(re,W.decode):W.decode,void 0)}}function j(_){return{encode:S=>{if(!Array.isArray(S)||S.length&&"number"!=typeof S[0])throw new Error("alphabet.encode input should be an array of numbers");return S.map(A=>{if(ce(A),A<0||A>=_.length)throw new Error(`Digit index outside alphabet: ${A} (alphabet: ${_.length})`);return _[A]})},decode:S=>{if(!Array.isArray(S)||S.length&&"string"!=typeof S[0])throw new Error("alphabet.decode input should be array of strings");return S.map(A=>{if("string"!=typeof A)throw new Error(`alphabet.decode: not string element=${A}`);const ne=_.indexOf(A);if(-1===ne)throw new Error(`Unknown letter: "${A}". Allowed: ${_}`);return ne})}}}function Se(_=""){if("string"!=typeof _)throw new Error("join separator should be string");return{encode:S=>{if(!Array.isArray(S)||S.length&&"string"!=typeof S[0])throw new Error("join.encode input should be array of strings");for(let A of S)if("string"!=typeof A)throw new Error(`join.encode: non-string input=${A}`);return S.join(_)},decode:S=>{if("string"!=typeof S)throw new Error("join.decode input should be string");return S.split(_)}}}function w(_,S="="){if(ce(_),"string"!=typeof S)throw new Error("padding chr should be string");return{encode(A){if(!Array.isArray(A)||A.length&&"string"!=typeof A[0])throw new Error("padding.encode input should be array of strings");for(let ne of A)if("string"!=typeof ne)throw new Error(`padding.encode: non-string input=${ne}`);for(;A.length*_%8;)A.push(S);return A},decode(A){if(!Array.isArray(A)||A.length&&"string"!=typeof A[0])throw new Error("padding.encode input should be array of strings");for(let re of A)if("string"!=typeof re)throw new Error(`padding.decode: non-string input=${re}`);let ne=A.length;if(ne*_%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;ne>0&&A[ne-1]===S;ne--)if(!((ne-1)*_%8))throw new Error("Invalid padding: string has too much padding");return A.slice(0,ne)}}}function x(_){if("function"!=typeof _)throw new Error("normalize fn should be function");return{encode:S=>S,decode:S=>_(S)}}function H(_,S,A){if(S<2)throw new Error(`convertRadix: wrong from=${S}, base cannot be less than 2`);if(A<2)throw new Error(`convertRadix: wrong to=${A}, base cannot be less than 2`);if(!Array.isArray(_))throw new Error("convertRadix: data should be array");if(!_.length)return[];let ne=0;const re=[],W=Array.from(_);for(W.forEach(De=>{if(ce(De),De<0||De>=S)throw new Error(`Wrong integer: ${De}`)});;){let De=0,St=!0;for(let Me=ne;Me<W.length;Me++){const rr=W[Me],Oe=S*De+rr;if(!Number.isSafeInteger(Oe)||S*De/S!==De||Oe-rr!=S*De)throw new Error("convertRadix: carry overflow");if(De=Oe%A,W[Me]=Math.floor(Oe/A),!Number.isSafeInteger(W[Me])||W[Me]*A+De!==Oe)throw new Error("convertRadix: carry overflow");St&&(W[Me]?St=!1:ne=Me)}if(re.push(De),St)break}for(let De=0;De<_.length-1&&0===_[De];De++)re.push(0);return re.reverse()}Object.defineProperty(N,"__esModule",{value:!0}),N.bytes=N.stringToBytes=N.str=N.bytesToString=N.hex=N.utf8=N.bech32m=N.bech32=N.base58check=N.base58xmr=N.base58xrp=N.base58flickr=N.base58=N.base64url=N.base64=N.base32crockford=N.base32hex=N.base32=N.base16=N.utils=N.assertNumber=void 0,N.assertNumber=ce;const F=(_,S)=>S?F(S,_%S):_,G=(_,S)=>_+(S-F(_,S));function B(_,S,A,ne){if(!Array.isArray(_))throw new Error("convertRadix2: data should be array");if(S<=0||S>32)throw new Error(`convertRadix2: wrong from=${S}`);if(A<=0||A>32)throw new Error(`convertRadix2: wrong to=${A}`);if(G(S,A)>32)throw new Error(`convertRadix2: carry overflow from=${S} to=${A} carryBits=${G(S,A)}`);let re=0,W=0;const De=2**A-1,St=[];for(const Me of _){if(ce(Me),Me>=2**S)throw new Error(`convertRadix2: invalid data word=${Me} from=${S}`);if(re=re<<S|Me,W+S>32)throw new Error(`convertRadix2: carry overflow pos=${W} from=${S}`);for(W+=S;W>=A;W-=A)St.push((re>>W-A&De)>>>0);re&=2**W-1}if(re=re<<A-W&De,!ne&&W>=S)throw new Error("Excess padding");if(!ne&&re)throw new Error(`Non-zero padding: ${re}`);return ne&&W>0&&St.push(re>>>0),St}function X(_){return ce(_),{encode:S=>{if(!(S instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return H(Array.from(S),256,_)},decode:S=>{if(!Array.isArray(S)||S.length&&"number"!=typeof S[0])throw new Error("radix.decode input should be array of strings");return Uint8Array.from(H(S,_,256))}}}function te(_,S=!1){if(ce(_),_<=0||_>32)throw new Error("radix2: bits should be in (0..32]");if(G(8,_)>32||G(_,8)>32)throw new Error("radix2: carry overflow");return{encode:A=>{if(!(A instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return B(Array.from(A),8,_,!S)},decode:A=>{if(!Array.isArray(A)||A.length&&"number"!=typeof A[0])throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(B(A,_,8,S))}}}function V(_){if("function"!=typeof _)throw new Error("unsafeWrapper fn should be function");return function(...S){try{return _.apply(null,S)}catch{}}}function ue(_,S){if(ce(_),"function"!=typeof S)throw new Error("checksum fn should be function");return{encode(A){if(!(A instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const ne=S(A).slice(0,_),re=new Uint8Array(A.length+_);return re.set(A),re.set(ne,A.length),re},decode(A){if(!(A instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const ne=A.slice(0,-_),re=S(ne).slice(0,_),W=A.slice(-_);for(let De=0;De<_;De++)if(re[De]!==W[De])throw new Error("Invalid checksum");return ne}}}N.utils={alphabet:j,chain:de,checksum:ue,radix:X,radix2:te,join:Se,padding:w},N.base16=de(te(4),j("0123456789ABCDEF"),Se("")),N.base32=de(te(5),j("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),w(5),Se("")),N.base32hex=de(te(5),j("0123456789ABCDEFGHIJKLMNOPQRSTUV"),w(5),Se("")),N.base32crockford=de(te(5),j("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),Se(""),x(_=>_.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),N.base64=de(te(6),j("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),w(6),Se("")),N.base64url=de(te(6),j("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),w(6),Se(""));const Y=_=>de(X(58),j(_),Se(""));N.base58=Y("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),N.base58flickr=Y("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),N.base58xrp=Y("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const gt=[0,2,3,5,6,7,9,10,11];N.base58xmr={encode(_){let S="";for(let A=0;A<_.length;A+=8){const ne=_.subarray(A,A+8);S+=N.base58.encode(ne).padStart(gt[ne.length],"1")}return S},decode(_){let S=[];for(let A=0;A<_.length;A+=11){const ne=_.slice(A,A+11),re=gt.indexOf(ne.length),W=N.base58.decode(ne);for(let De=0;De<W.length-re;De++)if(0!==W[De])throw new Error("base58xmr: wrong padding");S=S.concat(Array.from(W.slice(W.length-re)))}return Uint8Array.from(S)}},N.base58check=_=>de(ue(4,S=>_(_(S))),N.base58);const _e=de(j("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Se("")),qe=[996825010,642813549,513874426,1027748829,705979059];function Ge(_){const S=_>>25;let A=(33554431&_)<<5;for(let ne=0;ne<qe.length;ne++)1==(S>>ne&1)&&(A^=qe[ne]);return A}function $n(_,S,A=1){const ne=_.length;let re=1;for(let W=0;W<ne;W++){const De=_.charCodeAt(W);if(De<33||De>126)throw new Error(`Invalid prefix (${_})`);re=Ge(re)^De>>5}re=Ge(re);for(let W=0;W<ne;W++)re=Ge(re)^31&_.charCodeAt(W);for(let W of S)re=Ge(re)^W;for(let W=0;W<6;W++)re=Ge(re);return re^=A,_e.encode(B([re%2**30],30,5,!1))}function pe(_){const S="bech32"===_?1:734539939,A=te(5),ne=A.decode,re=A.encode,W=V(ne);function St(Oe,dt=90){if("string"!=typeof Oe)throw new Error("bech32.decode input should be string, not "+typeof Oe);if(Oe.length<8||!1!==dt&&Oe.length>dt)throw new TypeError(`Wrong string length: ${Oe.length} (${Oe}). Expected (8..${dt})`);const rn=Oe.toLowerCase();if(Oe!==rn&&Oe!==Oe.toUpperCase())throw new Error("String must be lowercase or uppercase");const ot=(Oe=rn).lastIndexOf("1");if(0===ot||-1===ot)throw new Error('Letter "1" must be present between prefix and data only');const Wr=Oe.slice(0,ot),nt=Oe.slice(ot+1);if(nt.length<6)throw new Error("Data must be at least 6 characters long");const We=_e.decode(nt).slice(0,-6),it=$n(Wr,We,S);if(!nt.endsWith(it))throw new Error(`Invalid checksum in ${Oe}: expected "${it}"`);return{prefix:Wr,words:We}}return{encode:function De(Oe,dt,rn=90){if("string"!=typeof Oe)throw new Error("bech32.encode prefix should be string, not "+typeof Oe);if(!Array.isArray(dt)||dt.length&&"number"!=typeof dt[0])throw new Error("bech32.encode words should be array of numbers, not "+typeof dt);const ot=Oe.length+7+dt.length;if(!1!==rn&&ot>rn)throw new TypeError(`Length ${ot} exceeds limit ${rn}`);return`${Oe=Oe.toLowerCase()}1${_e.encode(dt)}${$n(Oe,dt,S)}`},decode:St,decodeToBytes:function rr(Oe){const{prefix:dt,words:rn}=St(Oe,!1);return{prefix:dt,words:rn,bytes:ne(rn)}},decodeUnsafe:V(St),fromWords:ne,fromWordsUnsafe:W,toWords:re}}N.bech32=pe("bech32"),N.bech32m=pe("bech32m"),N.utf8={encode:_=>(new TextDecoder).decode(_),decode:_=>(new TextEncoder).encode(_)},N.hex=de(te(4),j("0123456789abcdef"),Se(""),x(_=>{if("string"!=typeof _||_.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof _} with length ${_.length}`);return _.toLowerCase()}));const Te={utf8:N.utf8,hex:N.hex,base16:N.base16,base32:N.base32,base64:N.base64,base64url:N.base64url,base58:N.base58,base58xmr:N.base58xmr},Ne=`Invalid encoding type. Available types: ${Object.keys(Te).join(", ")}`;N.bytesToString=(_,S)=>{if("string"!=typeof _||!Te.hasOwnProperty(_))throw new TypeError(Ne);if(!(S instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return Te[_].encode(S)},N.str=N.bytesToString,N.stringToBytes=(_,S)=>{if(!Te.hasOwnProperty(_))throw new TypeError(Ne);if("string"!=typeof S)throw new TypeError("stringToBytes() expects string");return Te[_].decode(S)},N.bytes=N.stringToBytes},563:(vt,N,ce)=>{N.formatArgs=function j(F){if(F[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+F[0]+(this.useColors?"%c ":" ")+"+"+vt.exports.humanize(this.diff),!this.useColors)return;const G="color: "+this.color;F.splice(1,0,G,"color: inherit");let B=0,X=0;F[0].replace(/%[a-zA-Z%]/g,te=>{"%%"!==te&&(B++,"%c"===te&&(X=B))}),F.splice(X,0,G)},N.save=function Se(F){try{F?N.storage.setItem("debug",F):N.storage.removeItem("debug")}catch{}},N.load=function w(){let F;try{F=N.storage.getItem("debug")}catch{}return!F&&typeof process<"u"&&"env"in process&&(F=process.env.DEBUG),F},N.useColors=function de(){return!(!(typeof window<"u"&&window.process)||"renderer"!==window.process.type&&!window.process.__nwjs)||!(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},N.storage=function x(){try{return localStorage}catch{}}(),N.destroy=(()=>{let F=!1;return()=>{F||(F=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),N.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],N.log=console.debug||console.log||(()=>{}),vt.exports=ce(18)(N);const{formatters:H}=vt.exports;H.j=function(F){try{return JSON.stringify(F)}catch(G){return"[UnexpectedJSONParseError]: "+G.message}}},18:(vt,N,ce)=>{vt.exports=function de(j){function w(V){let ue,gt,wt,Y=null;function _e(...qe){if(!_e.enabled)return;const Ge=_e,$n=Number(new Date);Ge.diff=$n-(ue||$n),Ge.prev=ue,Ge.curr=$n,ue=$n,qe[0]=w.coerce(qe[0]),"string"!=typeof qe[0]&&qe.unshift("%O");let Te=0;qe[0]=qe[0].replace(/%([a-zA-Z%])/g,(tt,Le)=>{if("%%"===tt)return"%";Te++;const _=w.formatters[Le];return"function"==typeof _&&(tt=_.call(Ge,qe[Te]),qe.splice(Te,1),Te--),tt}),w.formatArgs.call(Ge,qe),(Ge.log||w.log).apply(Ge,qe)}return _e.namespace=V,_e.useColors=w.useColors(),_e.color=w.selectColor(V),_e.extend=x,_e.destroy=w.destroy,Object.defineProperty(_e,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==Y?Y:(gt!==w.namespaces&&(gt=w.namespaces,wt=w.enabled(V)),wt),set:qe=>{Y=qe}}),"function"==typeof w.init&&w.init(_e),_e}function x(V,ue){const Y=w(this.namespace+(typeof ue>"u"?":":ue)+V);return Y.log=this.log,Y}function B(V){return V.toString().substring(2,V.toString().length-2).replace(/\.\*\?$/,"*")}return w.debug=w,w.default=w,w.coerce=function X(V){return V instanceof Error?V.stack||V.message:V},w.disable=function F(){const V=[...w.names.map(B),...w.skips.map(B).map(ue=>"-"+ue)].join(",");return w.enable(""),V},w.enable=function H(V){let ue;w.save(V),w.namespaces=V,w.names=[],w.skips=[];const Y=("string"==typeof V?V:"").split(/[\s,]+/),gt=Y.length;for(ue=0;ue<gt;ue++)Y[ue]&&("-"===(V=Y[ue].replace(/\*/g,".*?"))[0]?w.skips.push(new RegExp("^"+V.slice(1)+"$")):w.names.push(new RegExp("^"+V+"$")))},w.enabled=function G(V){if("*"===V[V.length-1])return!0;let ue,Y;for(ue=0,Y=w.skips.length;ue<Y;ue++)if(w.skips[ue].test(V))return!1;for(ue=0,Y=w.names.length;ue<Y;ue++)if(w.names[ue].test(V))return!0;return!1},w.humanize=ce(253),w.destroy=function te(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(j).forEach(V=>{w[V]=j[V]}),w.names=[],w.skips=[],w.formatters={},w.selectColor=function Se(V){let ue=0;for(let Y=0;Y<V.length;Y++)ue=(ue<<5)-ue+V.charCodeAt(Y),ue|=0;return w.colors[Math.abs(ue)%w.colors.length]},w.enable(w.load()),w}},319:(vt,N,ce)=>{const{bech32:de,hex:j,utf8:Se}=ce(845),w={bech32:"bc",pubKeyHash:0,scriptHash:5,validWitnessVersions:[0]},x={bech32:"tb",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},H={bech32:"bcrt",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},F={bech32:"sb",pubKeyHash:63,scriptHash:123,validWitnessVersions:[0]},G=["option_data_loss_protect","initial_routing_sync","option_upfront_shutdown_script","gossip_queries","var_onion_optin","gossip_queries_ex","option_static_remotekey","payment_secret","basic_mpp","option_support_large_channel"],B={m:BigInt(1e3),u:BigInt(1e6),n:BigInt(1e9),p:BigInt(1e12)},X=BigInt("2100000000000000000"),te=BigInt(1e11),V={payment_hash:1,payment_secret:16,description:13,payee:19,description_hash:23,expiry:6,min_final_cltv_expiry:24,fallback_address:9,route_hint:3,feature_bits:5,metadata:27},ue={};for(let pe=0,Te=Object.keys(V);pe<Te.length;pe++){const Ne=Te[pe],tt=V[Te[pe]].toString();ue[tt]=Ne}const Y={1:pe=>j.encode(de.fromWordsUnsafe(pe)),16:pe=>j.encode(de.fromWordsUnsafe(pe)),13:pe=>Se.encode(de.fromWordsUnsafe(pe)),19:pe=>j.encode(de.fromWordsUnsafe(pe)),23:pe=>j.encode(de.fromWordsUnsafe(pe)),27:pe=>j.encode(de.fromWordsUnsafe(pe)),6:wt,24:wt,3:function _e(pe){const Te=[];let Ne,tt,Le,_,S,A=de.fromWordsUnsafe(pe);for(;A.length>0;)Ne=j.encode(A.slice(0,33)),tt=j.encode(A.slice(33,41)),Le=parseInt(j.encode(A.slice(41,45)),16),_=parseInt(j.encode(A.slice(45,49)),16),S=parseInt(j.encode(A.slice(49,51)),16),A=A.slice(51),Te.push({pubkey:Ne,short_channel_id:tt,fee_base_msat:Le,fee_proportional_millionths:_,cltv_expiry_delta:S});return Te},5:function qe(pe){const Te=pe.slice().reverse().map(Le=>[!!(1&Le),!!(2&Le),!!(4&Le),!!(8&Le),!!(16&Le)]).reduce((Le,_)=>Le.concat(_),[]);for(;Te.length<2*G.length;)Te.push(!1);const Ne={};G.forEach((Le,_)=>{let S;S=Te[2*_]?"required":Te[2*_+1]?"supported":"unsupported",Ne[Le]=S});const tt=Te.slice(2*G.length);return Ne.extra_bits={start_bit:2*G.length,bits:tt,has_required:tt.reduce((Le,_,S)=>S%2!=0?Le||!1:Le||_,!1)},Ne}};function gt(pe){return Te=>({tagCode:parseInt(pe),words:de.encode("unknown",Te,Number.MAX_SAFE_INTEGER)})}function wt(pe){return pe.reverse().reduce((Te,Ne,tt)=>Te+Ne*Math.pow(32,tt),0)}function Ge(pe,Te){let Ne,tt;if(pe.slice(-1).match(/^[munp]$/))Ne=pe.slice(-1),tt=pe.slice(0,-1);else{if(pe.slice(-1).match(/^[^munp0-9]$/))throw new Error("Not a valid multiplier for the amount");tt=pe}if(!tt.match(/^\d+$/))throw new Error("Not a valid human readable amount");const Le=BigInt(tt),_=Ne?Le*te/B[Ne]:Le*te;if("p"===Ne&&Le%BigInt(10)!==BigInt(0)||_>X)throw new Error("Amount is outside of valid range");return Te?_.toString():_}vt.exports={decode:function $n(pe,Te){if("string"!=typeof pe)throw new Error("Lightning Payment Request must be string");if("ln"!==pe.slice(0,2).toLowerCase())throw new Error("Not a proper lightning payment request");const Ne=[],tt=de.decode(pe,Number.MAX_SAFE_INTEGER);pe=pe.toLowerCase();const Le=tt.prefix;let _=tt.words,S=pe.slice(Le.length+1),A=_.slice(-104);_=_.slice(0,-104);let ne=Le.match(/^ln(\S+?)(\d*)([a-zA-Z]?)$/);if(ne&&!ne[2]&&(ne=Le.match(/^ln(\S+)$/)),!ne)throw new Error("Not a proper lightning payment request");Ne.push({name:"lightning_network",letters:"ln"});const re=ne[1];let W;if(Te){if(void 0===Te.bech32||void 0===Te.pubKeyHash||void 0===Te.scriptHash||!Array.isArray(Te.validWitnessVersions))throw new Error("Invalid network");W=Te}else switch(re){case w.bech32:W=w;break;case x.bech32:W=x;break;case H.bech32:W=H;break;case F.bech32:W=F}if(!W||W.bech32!==re)throw new Error("Unknown coin bech32 prefix");Ne.push({name:"coin_network",letters:re,value:W});const De=ne[2];let St;De?(St=Ge(De+ne[3],!0),Ne.push({name:"amount",letters:ne[2]+ne[3],value:St})):St=null,Ne.push({name:"separator",letters:"1"});const Me=wt(_.slice(0,7));let rr,Oe,dt,rn;for(_=_.slice(7),Ne.push({name:"timestamp",letters:S.slice(0,7),value:Me}),S=S.slice(7);_.length>0;){const nt=_[0].toString();rr=ue[nt]||"unknown_tag",Oe=Y[nt]||gt(nt),_=_.slice(1),dt=wt(_.slice(0,2)),_=_.slice(2),rn=_.slice(0,dt),_=_.slice(dt),Ne.push({name:rr,tag:S[0],letters:S.slice(0,3+dt),value:Oe(rn)}),S=S.slice(3+dt)}Ne.push({name:"signature",letters:S.slice(0,104),value:j.encode(de.fromWordsUnsafe(A))}),S=S.slice(104),Ne.push({name:"checksum",letters:S});let ot={paymentRequest:pe,sections:Ne,get expiry(){let nt=Ne.find(We=>"expiry"===We.name);if(nt)return Wr("timestamp")+nt.value},get route_hints(){return Ne.filter(nt=>"route_hint"===nt.name).map(nt=>nt.value)}};for(let nt in V)"route_hint"!==nt&&Object.defineProperty(ot,nt,{get:()=>Wr(nt)});return ot;function Wr(nt){let We=Ne.find(it=>it.name===nt);return We?We.value:void 0}},hrpToMillisat:Ge}},253:vt=>{var N=1e3,ce=60*N,de=60*ce,j=24*de;function G(B,X,te,V){var ue=X>=1.5*te;return Math.round(B/te)+" "+V+(ue?"s":"")}vt.exports=function(B,X){X=X||{};var te=typeof B;if("string"===te&&B.length>0)return function x(B){if(!((B=String(B)).length>100)){var X=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(B);if(X){var te=parseFloat(X[1]);switch((X[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*te;case"weeks":case"week":case"w":return 6048e5*te;case"days":case"day":case"d":return te*j;case"hours":case"hour":case"hrs":case"hr":case"h":return te*de;case"minutes":case"minute":case"mins":case"min":case"m":return te*ce;case"seconds":case"second":case"secs":case"sec":case"s":return te*N;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return te;default:return}}}}(B);if("number"===te&&isFinite(B))return X.long?function F(B){var X=Math.abs(B);return X>=j?G(B,X,j,"day"):X>=de?G(B,X,de,"hour"):X>=ce?G(B,X,ce,"minute"):X>=N?G(B,X,N,"second"):B+" ms"}(B):function H(B){var X=Math.abs(B);return X>=j?Math.round(B/j)+"d":X>=de?Math.round(B/de)+"h":X>=ce?Math.round(B/ce)+"m":X>=N?Math.round(B/N)+"s":B+"ms"}(B);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(B))}},209:(vt,N,ce)=>{"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.LRUCache=void 0;const de=ce(516);class j{constructor(w){this.lookupTable=new Map,this.head=null,this.tail=null;const{maxSize:x=25,entryExpirationTimeInMS:H=null,onEntryEvicted:F,onEntryMarkedAsMostRecentlyUsed:G,cloneFn:B,clone:X}=w??{};if(Number.isNaN(x)||x<=0)throw new Error("maxSize must be greater than 0.");if("number"==typeof H&&(H<=0||Number.isNaN(H)))throw new Error("entryExpirationTimeInMS must either be null (no expiry) or greater than 0");this.maxSizeInternal=x,this.entryExpirationTimeInMS=H,this.onEntryEvicted=F,this.onEntryMarkedAsMostRecentlyUsed=G,this.clone=X,this.cloneFn=B}get size(){return this.cleanCache(),this.lookupTable.size}get remainingSize(){return this.maxSizeInternal-this.size}get newest(){return this.head?this.head.isExpired?(this.removeNodeFromListAndLookupTable(this.head),this.newest):this.mapNodeToEntry(this.head):null}get oldest(){return this.tail?this.tail.isExpired?(this.removeNodeFromListAndLookupTable(this.tail),this.oldest):this.mapNodeToEntry(this.tail):null}get maxSize(){return this.maxSizeInternal}set maxSize(w){if(Number.isNaN(w)||w<=0)throw new Error("maxSize must be greater than 0.");this.maxSizeInternal=w,this.enforceSizeLimit()}set(w,x,H){const F=this.lookupTable.get(w);F&&this.removeNodeFromListAndLookupTable(F);const G=new de.LRUCacheNode(w,x,{entryExpirationTimeInMS:this.entryExpirationTimeInMS,onEntryEvicted:this.onEntryEvicted,onEntryMarkedAsMostRecentlyUsed:this.onEntryMarkedAsMostRecentlyUsed,clone:this.clone,cloneFn:this.cloneFn,...H});return this.setNodeAsHead(G),this.lookupTable.set(w,G),this.enforceSizeLimit(),this}get(w){const x=this.lookupTable.get(w);return x?x.isExpired?(this.removeNodeFromListAndLookupTable(x),null):(this.setNodeAsHead(x),x.value):null}peek(w){const x=this.lookupTable.get(w);return x?x.isExpired?(this.removeNodeFromListAndLookupTable(x),null):x.value:null}delete(w){const x=this.lookupTable.get(w);return!!x&&this.removeNodeFromListAndLookupTable(x)}has(w){const x=this.lookupTable.get(w);return!(!x||x.isExpired&&(this.removeNodeFromListAndLookupTable(x),1))}clear(){this.head=null,this.tail=null,this.lookupTable.clear()}find(w){let x=this.head;for(;x;){if(x.isExpired){const F=x.next;this.removeNodeFromListAndLookupTable(x),x=F;continue}const H=this.mapNodeToEntry(x);if(w(H))return this.setNodeAsHead(x),H;x=x.next}return null}forEach(w){let x=this.head,H=0;for(;x;)if(x.isExpired){const F=x.next;this.removeNodeFromListAndLookupTable(x),x=F}else w(x.value,x.key,H),x=x.next,H++}*values(){let w=this.head;for(;w;)if(w.isExpired){const x=w.next;this.removeNodeFromListAndLookupTable(w),w=x}else yield w.value,w=w.next}*keys(){let w=this.head;for(;w;)if(w.isExpired){const x=w.next;this.removeNodeFromListAndLookupTable(w),w=x}else yield w.key,w=w.next}*entries(){let w=this.head;for(;w;)if(w.isExpired){const x=w.next;this.removeNodeFromListAndLookupTable(w),w=x}else yield this.mapNodeToEntry(w),w=w.next}*[Symbol.iterator](){let w=this.head;for(;w;)if(w.isExpired){const x=w.next;this.removeNodeFromListAndLookupTable(w),w=x}else yield this.mapNodeToEntry(w),w=w.next}enforceSizeLimit(){let w=this.tail;for(;null!==w&&this.size>this.maxSizeInternal;){const x=w.prev;this.removeNodeFromListAndLookupTable(w),w=x}}mapNodeToEntry({key:w,value:x}){return{key:w,value:x}}setNodeAsHead(w){this.removeNodeFromList(w),this.head?(w.next=this.head,this.head.prev=w,this.head=w):(this.head=w,this.tail=w),w.invokeOnEntryMarkedAsMostRecentlyUsed()}removeNodeFromList(w){null!==w.prev&&(w.prev.next=w.next),null!==w.next&&(w.next.prev=w.prev),this.head===w&&(this.head=w.next),this.tail===w&&(this.tail=w.prev),w.next=null,w.prev=null}removeNodeFromListAndLookupTable(w){return w.invokeOnEvicted(),this.removeNodeFromList(w),this.lookupTable.delete(w.key)}cleanCache(){if(!this.entryExpirationTimeInMS)return;const w=[];for(const x of this.lookupTable.values())x.isExpired&&w.push(x);w.forEach(x=>this.removeNodeFromListAndLookupTable(x))}}N.LRUCache=j},516:(vt,N)=>{"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.LRUCacheNode=void 0,N.LRUCacheNode=class ce{constructor(j,Se,w){const{entryExpirationTimeInMS:x=null,next:H=null,prev:F=null,onEntryEvicted:G,onEntryMarkedAsMostRecentlyUsed:B,clone:X,cloneFn:te}=w??{};if("number"==typeof x&&(x<=0||Number.isNaN(x)))throw new Error("entryExpirationTimeInMS must either be null (no expiry) or greater than 0");this.clone=X??!1,this.cloneFn=te??this.defaultClone,this.key=j,this.internalValue=this.clone?this.cloneFn(Se):Se,this.created=Date.now(),this.entryExpirationTimeInMS=x,this.next=H,this.prev=F,this.onEntryEvicted=G,this.onEntryMarkedAsMostRecentlyUsed=B}get value(){return this.clone?this.cloneFn(this.internalValue):this.internalValue}get isExpired(){return"number"==typeof this.entryExpirationTimeInMS&&Date.now()-this.created>this.entryExpirationTimeInMS}invokeOnEvicted(){if(this.onEntryEvicted){const{key:j,value:Se,isExpired:w}=this;this.onEntryEvicted({key:j,value:Se,isExpired:w})}}invokeOnEntryMarkedAsMostRecentlyUsed(){if(this.onEntryMarkedAsMostRecentlyUsed){const{key:j,value:Se}=this;this.onEntryMarkedAsMostRecentlyUsed({key:j,value:Se})}}defaultClone(j){return"boolean"==typeof j||"string"==typeof j||"number"==typeof j?j:JSON.parse(JSON.stringify(j))}}},927:function(vt,N,ce){"use strict";var de=this&&this.__createBinding||(Object.create?function(Se,w,x,H){void 0===H&&(H=x);var F=Object.getOwnPropertyDescriptor(w,x);(!F||("get"in F?!w.__esModule:F.writable||F.configurable))&&(F={enumerable:!0,get:function(){return w[x]}}),Object.defineProperty(Se,H,F)}:function(Se,w,x,H){void 0===H&&(H=x),Se[H]=w[x]}),j=this&&this.__exportStar||function(Se,w){for(var x in Se)"default"!==x&&!Object.prototype.hasOwnProperty.call(w,x)&&de(w,Se,x)};Object.defineProperty(N,"__esModule",{value:!0}),j(ce(209),N)}},vt=>{vt(vt.s=985)}]);